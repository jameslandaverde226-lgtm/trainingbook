--- FILE: ./app/(main)/settings/page.tsx ---
"use client";

import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { 
  User, Shield, Bell, Database, Cpu, 
  ChevronRight, Check, Save, RefreshCw, 
  Lock, Fingerprint, Globe, AlertTriangle, 
  Cloud, Terminal, Zap, Activity
} from "lucide-react";
import { cn } from "@/lib/utils";
import toast from "react-hot-toast";

// Store Integration
import { useAppStore } from "@/lib/store/useStore";

type TabID = "identity" | "operations" | "security" | "alerts" | "intelligence";

export default function AdvancedSettings() {
  const { team, subscribeTeam, events } = useAppStore();
  const [activeTab, setActiveTab] = useState<TabID>("identity");
  const [isSyncing, setIsSyncing] = useState(false);

  // --- HANDLERS ---
  const handleManualExtraction = () => {
    setIsSyncing(true);
    // Re-trigger the cross-project subscription
    subscribeTeam(); 
    
    setTimeout(() => {
      setIsSyncing(false);
      toast.success("CARES PATH DATA EXTRACTED", {
        style: { background: '#0F172A', color: '#fff', fontWeight: '900', borderRadius: '15px' }
      });
    }, 1500);
  };

  const menuItems = [
    { id: "identity", label: "Identity", icon: User },
    { id: "operations", label: "Operations", icon: Cpu },
    { id: "security", label: "Security", icon: Shield },
    { id: "alerts", label: "Alerts", icon: Bell },
    { id: "intelligence", label: "Intelligence", icon: Database },
  ];

  return (
    <div className="max-w-[1700px] mx-auto pt-10 pb-20 px-6 space-y-10">
      
      {/* --- COMMAND HEADER --- */}
      <div className="flex items-center justify-between px-2">
        <div className="space-y-1">
          <div className="flex items-center gap-2">
             <div className="w-1.5 h-6 bg-[#E51636] rounded-full" />
             <span className="text-[10px] font-black uppercase tracking-[0.4em] text-slate-400">System Configuration</span>
          </div>
          <h1 className="text-6xl font-black text-slate-900 tracking-tighter leading-none">Command Settings</h1>
        </div>

        <button 
          onClick={handleManualExtraction}
          disabled={isSyncing}
          className="group relative px-10 py-5 bg-[#E51636] text-white rounded-[24px] font-black uppercase text-[11px] tracking-[0.2em] shadow-2xl shadow-red-900/20 hover:scale-[1.03] active:scale-95 transition-all flex items-center gap-4 overflow-hidden disabled:opacity-50"
        >
          {isSyncing ? <RefreshCw className="w-4 h-4 animate-spin" /> : <Save className="w-4 h-4" />}
          <span>Deploy Changes</span>
        </button>
      </div>

      <div className="grid grid-cols-12 gap-12 items-start">
        
        {/* --- LEFT SIDEBAR --- */}
        <div className="col-span-3 space-y-8">
          <div className="bg-white/50 backdrop-blur-md rounded-[32px] p-2 space-y-1 border border-slate-100 shadow-sm">
            {menuItems.map((item) => {
              const isActive = activeTab === item.id;
              return (
                <button
                  key={item.id}
                  onClick={() => setActiveTab(item.id as TabID)}
                  className={cn(
                    "w-full flex items-center justify-between p-4 rounded-[24px] transition-all duration-500 group",
                    isActive ? "bg-white shadow-xl shadow-slate-200/40 ring-1 ring-black/5" : "hover:bg-white/80"
                  )}
                >
                  <div className="flex items-center gap-4">
                    <div className={cn(
                      "w-12 h-12 rounded-2xl flex items-center justify-center transition-all duration-500",
                      isActive ? "bg-[#004F71] text-white shadow-lg" : "bg-slate-100 text-slate-400 group-hover:bg-white"
                    )}>
                      <item.icon className="w-5 h-5" />
                    </div>
                    <span className={cn(
                      "text-xs font-black uppercase tracking-widest",
                      isActive ? "text-slate-900" : "text-slate-400 group-hover:text-slate-600"
                    )}>
                      {item.label}
                    </span>
                  </div>
                  {isActive && (
                    <motion.div layoutId="chevron" initial={{ opacity: 0, x: -10 }} animate={{ opacity: 1, x: 0 }}>
                       <ChevronRight className="w-4 h-4 text-[#E51636]" />
                    </motion.div>
                  )}
                </button>
              );
            })}
          </div>

          {/* CLOUD STATUS WIDGET */}
          <div className="bg-[#0F172A] rounded-[40px] p-8 text-white relative overflow-hidden group">
             <div className="absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full blur-3xl group-hover:bg-blue-500/20 transition-all" />
             <div className="relative z-10 space-y-6">
                <div>
                   <p className="text-[9px] font-black uppercase tracking-[0.3em] text-blue-400 mb-1">Source: CARES Path</p>
                   <h4 className="text-xl font-black tracking-tight">Systems Nominal</h4>
                </div>
                <div className="space-y-3">
                   <div className="flex items-center gap-3">
                      <div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_#10b981]" />
                      <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Extraction Active</span>
                   </div>
                   <div className="flex items-center gap-3">
                      <div className="w-2 h-2 rounded-full bg-blue-500" />
                      <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">{team.length} Profiles Synced</span>
                   </div>
                </div>
             </div>
          </div>
        </div>

        {/* --- RIGHT CONTENT --- */}
        <div className="col-span-9 bg-white rounded-[48px] border border-slate-100 shadow-2xl shadow-slate-200/50 flex flex-col min-h-[750px] relative overflow-hidden">
          <div className="flex-1 p-12 overflow-y-auto custom-scrollbar">
            <AnimatePresence mode="wait">
              
              {activeTab === "identity" && (
                <motion.div key="identity" initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -20 }} className="space-y-12">
                   <div className="space-y-2">
                      <h2 className="text-4xl font-black tracking-tighter text-slate-900">Operator Identity</h2>
                      <p className="text-slate-400 text-lg font-medium">Manage your administrative profile and access levels.</p>
                   </div>
                   <div className="bg-[#F8FAFC] rounded-[40px] p-10 border border-slate-100 flex items-center gap-12">
                      <div className="w-40 h-40 rounded-[56px] bg-white p-2 shadow-2xl rotate-[-3deg] border border-slate-100">
                         <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=500&q=80" className="w-full h-full rounded-[48px] object-cover" />
                      </div>
                      <div className="flex-1 grid grid-cols-2 gap-8">
                         <div className="space-y-3">
                            <label className="text-[10px] font-black uppercase text-slate-400 tracking-[0.2em] ml-2">Display Name</label>
                            <input type="text" defaultValue="James Lemons" className="w-full bg-white border border-slate-200 px-6 py-4 rounded-[22px] text-sm font-black text-slate-700 outline-none focus:border-[#004F71] transition-all" />
                         </div>
                         <div className="space-y-3">
                            <label className="text-[10px] font-black uppercase text-slate-400 tracking-[0.2em] ml-2">Administrative Email</label>
                            <input type="email" defaultValue="james@trainingbook.com" className="w-full bg-white border border-slate-200 px-6 py-4 rounded-[22px] text-sm font-black text-slate-700 outline-none focus:border-[#004F71] transition-all" />
                         </div>
                      </div>
                   </div>
                </motion.div>
              )}

              {activeTab === "intelligence" && (
                <motion.div key="intel" initial={{ opacity: 0, x: 20 }} animate={{ opacity: 1, x: 0 }} exit={{ opacity: 0, x: -20 }} className="space-y-10">
                   <div className="space-y-2">
                      <h2 className="text-4xl font-black tracking-tighter text-slate-900">Extraction Manual</h2>
                      <p className="text-slate-400 text-lg font-medium">Monitoring cross-project data flow from CARES Path.</p>
                   </div>

                   <div className="grid grid-cols-2 gap-6">
                      <div className="bg-slate-900 rounded-[40px] p-8 text-white">
                         <div className="flex items-center gap-3 mb-6">
                            <div className="p-2 bg-blue-500/20 rounded-xl"><Zap className="w-5 h-5 text-blue-400" /></div>
                            <span className="text-[10px] font-black uppercase tracking-widest text-blue-400">Live Connection</span>
                         </div>
                         <p className="text-3xl font-black mb-1">CARES-PATH-PROD</p>
                         <p className="text-slate-400 text-xs font-mono">Syncing collection: /teamMembers</p>
                         <div className="mt-8 pt-8 border-t border-white/5 flex justify-between items-center">
                            <div className="space-y-1">
                               <p className="text-[9px] font-black text-slate-500 uppercase">Profiles In State</p>
                               <p className="text-2xl font-black">{team.length}</p>
                            </div>
                            <button onClick={handleManualExtraction} className="p-4 bg-white/5 hover:bg-white/10 rounded-2xl transition-all">
                               <RefreshCw className={cn("w-5 h-5 text-white", isSyncing && "animate-spin")} />
                            </button>
                         </div>
                      </div>

                      <div className="bg-[#F8FAFC] rounded-[40px] p-8 border border-slate-100 flex flex-col justify-between">
                         <div className="flex items-center gap-3">
                            <Activity className="w-5 h-5 text-[#004F71]" />
                            <span className="text-[10px] font-black uppercase tracking-widest text-slate-400">Data Integrity</span>
                         </div>
                         <div className="space-y-4">
                            <div className="flex justify-between items-center">
                               <span className="text-xs font-bold text-slate-600">Cross-Project Read</span>
                               <span className="text-[10px] font-black text-emerald-500 uppercase">Success</span>
                            </div>
                            <div className="h-1.5 w-full bg-slate-200 rounded-full overflow-hidden">
                               <div className="h-full w-full bg-emerald-500" />
                            </div>
                         </div>
                      </div>
                   </div>

                   {/* REAL-TIME TERMINAL LOG */}
                   <div className="bg-[#0F172A] rounded-[32px] overflow-hidden border border-slate-800">
                      <div className="px-6 py-4 border-b border-slate-800 bg-slate-900/50 flex items-center justify-between">
                         <div className="flex items-center gap-2">
                            <Terminal className="w-4 h-4 text-blue-400" />
                            <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Extraction Stream</span>
                         </div>
                         <div className="flex gap-1.5">
                            <div className="w-2 h-2 rounded-full bg-red-500/20" />
                            <div className="w-2 h-2 rounded-full bg-amber-500/20" />
                            <div className="w-2 h-2 rounded-full bg-emerald-500/20" />
                         </div>
                      </div>
                      <div className="p-6 font-mono text-[10px] space-y-2 max-h-[300px] overflow-y-auto custom-scrollbar">
                         {team.map((member, i) => (
                           <div key={i} className="flex gap-4 items-center opacity-80 hover:opacity-100 transition-opacity">
                              <span className="text-blue-500">[{new Date().toLocaleTimeString()}]</span>
                              <span className="text-emerald-400">EXTRACTED</span>
                              <span className="text-slate-300">Entity: {member.name}</span>
                              <span className="text-slate-500 ml-auto">UID: {member.id.substring(0,8)}...</span>
                           </div>
                         ))}
                         <div className="text-blue-400 animate-pulse mt-4">_ Listeners active. Waiting for CARES project updates...</div>
                      </div>
                   </div>
                </motion.div>
              )}
              
              {/* Placeholders for other tabs */}
              {activeTab !== "identity" && activeTab !== "intelligence" && (
                <div className="py-20 text-center text-slate-300 font-black uppercase tracking-[0.5em]">
                   Module "{activeTab}" Loading...
                </div>
              )}

            </AnimatePresence>
          </div>

          {/* --- FOOTER --- */}
          <div className="px-12 py-6 bg-slate-50 border-t border-slate-100 flex items-center justify-between">
             <div className="flex items-center gap-4">
                <span className="px-3 py-1 bg-white border border-slate-200 rounded-full text-[9px] font-black text-slate-400 uppercase tracking-widest shadow-sm">v4.0.2 Stable</span>
             </div>
             <div className="flex items-center gap-2">
                <Check className="w-4 h-4 text-emerald-500" />
                <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Operational Sync: Active</span>
             </div>
          </div>
        </div>
      </div>
    </div>
  );
}
--- FILE: ./app/(main)/calendar/_components/AdvancedCreateModal.tsx ---
"use client";

import { useState } from "react";
import { 
    format, startOfWeek, startOfMonth, endOfWeek, endOfMonth, 
    isSameMonth, isSameDay, subMonths, addMonths, eachDayOfInterval, 
    isWithinInterval, isBefore, differenceInDays 
} from "date-fns";
import { motion, AnimatePresence } from "framer-motion";
import { 
  X, ChevronLeft, ChevronRight, ChevronDown, Flag, Layers, 
  Clock, User, Save, Target, Activity, Shield, Users, Zap, AlignLeft, Check, Calendar as CalendarIcon,
  Plus, Crown, UserCircle, Sparkles, ArrowRight, PenTool, Terminal, Command, Type
} from "lucide-react";
import { cn } from "@/lib/utils";
import { DraftEvent, TeamMember, EventType, PRIORITIES, getEventLabel, getTypeColor } from "./types";

interface Props {
    isOpen: boolean;
    onClose: () => void;
    onCreate: (d: any) => void;
    teamMembers: TeamMember[];
}

const TRANSITION_SPRING = { type: "spring", damping: 30, stiffness: 300, mass: 0.8 } as const;

// --- REFINED DROPDOWN ---
function WebAppDropdown({ label, icon: Icon, options, selected, onSelect, placeholder }: any) {
    const [isOpen, setIsOpen] = useState(false);
    return (
        <div className="relative space-y-1.5">
            <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] flex items-center gap-2 px-1">
                <Icon className="w-3 h-3" /> {label}
            </label>
            <button 
                onClick={() => setIsOpen(!isOpen)}
                className={cn(
                    "w-full flex items-center justify-between px-4 py-3.5 bg-white border rounded-[20px] transition-all duration-300 shadow-sm",
                    isOpen ? "border-[#E51636] ring-4 ring-red-500/5 shadow-md" : "border-slate-200 hover:border-slate-300"
                )}
            >
                <div className="flex items-center gap-3 text-left overflow-hidden">
                    {selected ? (
                        <>
                            <div className="w-6 h-6 rounded-lg bg-slate-100 flex items-center justify-center overflow-hidden shrink-0">
                                <img src={selected.image} className="w-full h-full object-cover" alt="" />
                            </div>
                            <span className="text-xs font-black text-slate-800 truncate">{selected.name}</span>
                        </>
                    ) : (
                        <span className="text-xs font-bold text-slate-400">{placeholder}</span>
                    )}
                </div>
                <ChevronDown className={cn("w-4 h-4 text-slate-300 transition-transform duration-300", isOpen && "rotate-180")} />
            </button>
            <AnimatePresence>
                {isOpen && (
                    <motion.div 
                        initial={{ opacity: 0, y: 5, scale: 0.98 }} animate={{ opacity: 1, y: 0, scale: 1 }} exit={{ opacity: 0, y: 5, scale: 0.98 }}
                        className="absolute top-full left-0 right-0 mt-2 bg-white border border-slate-100 rounded-2xl shadow-2xl z-50 overflow-hidden py-1 ring-1 ring-black/5"
                    >
                        <div className="max-h-48 overflow-y-auto custom-scrollbar">
                            {options.map((opt: TeamMember) => (
                                <button key={opt.id} onClick={() => { onSelect(opt); setIsOpen(false); }} className="w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50/30 transition-colors text-left border-b border-slate-50 last:border-0 group">
                                    <img src={opt.image} className="w-8 h-8 rounded-lg object-cover" alt="" />
                                    <div className="flex flex-col">
                                        <span className="text-xs font-black text-slate-700 group-hover:text-[#E51636] transition-colors">{opt.name}</span>
                                        <span className="text-[8px] font-bold text-slate-400 uppercase">{opt.role}</span>
                                    </div>
                                </button>
                            ))}
                        </div>
                    </motion.div>
                )}
            </AnimatePresence>
        </div>
    );
}

// --- RANGE PICKER ---
function IntegratedRangePicker({ start, end, onChange }: { start: Date, end: Date, onChange: (s: Date, e: Date) => void }) {
    const [viewDate, setViewDate] = useState(start);
    const days = eachDayOfInterval({ start: startOfWeek(startOfMonth(viewDate)), end: endOfWeek(endOfMonth(viewDate)) });

    const handleDateClick = (clickedDate: Date) => {
        if (isSameDay(start, end)) {
            if (isBefore(clickedDate, start)) onChange(clickedDate, clickedDate);
            else onChange(start, clickedDate);
        } else onChange(clickedDate, clickedDate);
    };

    return (
        <div className="w-full bg-white rounded-[32px] p-5 border border-slate-100 shadow-sm relative overflow-hidden">
            <div className="flex justify-between items-center mb-6 px-1">
                <div className="flex flex-col">
                    <span className="text-[8px] font-black text-slate-300 uppercase tracking-[0.3em] mb-1">Calendar</span>
                    <span className="text-[11px] font-black text-[#E51636] uppercase tracking-widest">{format(viewDate, "MMMM yyyy")}</span>
                </div>
                <div className="flex gap-1.5">
                    <button onClick={() => setViewDate(subMonths(viewDate, 1))} className="p-2 hover:bg-slate-50 rounded-xl text-slate-400 transition-all active:scale-90"><ChevronLeft className="w-4 h-4" /></button>
                    <button onClick={() => setViewDate(addMonths(viewDate, 1))} className="p-2 hover:bg-slate-50 rounded-xl text-slate-400 transition-all active:scale-90"><ChevronRight className="w-4 h-4" /></button>
                </div>
            </div>
            <div className="grid grid-cols-7 gap-1">
                {["S","M","T","W","T","F","S"].map((d, i) => (
                    <div key={`${d}-${i}`} className="h-6 flex items-center justify-center text-[9px] font-black text-slate-200 uppercase">{d}</div>
                ))}
                {days.map(d => {
                    const isStart = isSameDay(d, start);
                    const isEnd = isSameDay(d, end);
                    const inRange = isWithinInterval(d, { start, end });
                    const isCurrentMonth = isSameMonth(d, viewDate);
                    return (
                        <button key={d.toString()} onClick={() => handleDateClick(d)} 
                            className={cn(
                                "h-9 w-full flex items-center justify-center text-xs font-bold transition-all relative rounded-xl",
                                !isCurrentMonth && "opacity-5",
                                inRange && !isStart && !isEnd && "bg-red-50 text-[#E51636] rounded-none",
                                isStart && "bg-[#E51636] text-white shadow-lg z-10",
                                isEnd && "bg-[#E51636] text-white shadow-lg z-10",
                            )}
                        >
                            {format(d, "d")}
                        </button>
                    );
                })}
            </div>
        </div>
    );
}

export default function AdvancedCreateModal({ isOpen, onClose, onCreate, teamMembers }: Props) {
    const [draft, setDraft] = useState<DraftEvent>({
        title: "", type: "Training", priority: "Medium", assignee: "", assigneeName: "",
        teamMemberId: "", teamMemberName: "", startDate: new Date(), endDate: new Date(),
        description: "", stickers: []
    });

    const [isBriefingFocused, setIsBriefingFocused] = useState(false);
    const [isTitleFocused, setIsTitleFocused] = useState(false);

    const categories: { id: EventType; icon: any }[] = [
        { id: "Training", icon: Shield }, { id: "Goal", icon: Target },
        { id: "Deadline", icon: Zap }, { id: "Operation", icon: Activity },
        { id: "OneOnOne", icon: Users },
    ];

    if (!isOpen) return null;

    const getPriorityStyles = (p: string, isSelected: boolean) => {
        if (!isSelected) return "text-slate-400 hover:text-slate-600 hover:bg-white";
        switch (p) {
            case "High": return "bg-[#E51636] text-white shadow-lg shadow-red-500/20";
            case "Medium": return "bg-amber-500 text-white shadow-lg shadow-amber-500/20";
            case "Low": return "bg-[#004F71] text-white shadow-lg shadow-blue-500/20";
            default: return "bg-slate-900 text-white shadow-lg";
        }
    };

    return (
        <div className="fixed inset-0 z-[120] flex items-end md:items-center justify-center">
            {/* BACKDROP */}
            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onClick={onClose} />
            
            {/* MAIN CARD / SHEET */}
            <motion.div 
                initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} 
                transition={TRANSITION_SPRING}
                className="relative w-full md:w-[95%] md:max-w-4xl h-[92vh] md:h-auto md:max-h-[85vh] bg-white shadow-2xl flex flex-col overflow-hidden rounded-t-[40px] md:rounded-[48px] border border-white/20"
            >
                {/* --- HEADER --- */}
                <div className="bg-[#E51636] px-6 py-8 md:px-10 md:py-8 text-white relative shrink-0 overflow-hidden">
                    <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#fff_1px,transparent_1px)] [background-size:16px_16px]" />
                    <div className="absolute top-0 right-0 p-6 opacity-5 rotate-12"><Command className="w-32 h-32 md:w-48 md:h-48" /></div>
                    
                    <div className="relative z-10 flex items-start justify-between gap-6">
                        <div className="flex-1 w-full">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="px-3 py-1 bg-white/10 rounded-full border border-white/20 backdrop-blur-xl flex items-center gap-2">
                                    <span className="text-[8px] font-black uppercase tracking-[0.4em] text-white">Ops Command Center</span>
                                </div>
                                <Sparkles className="w-3 h-3 text-white/40 animate-pulse" />
                            </div>
                            <h2 className="text-3xl md:text-4xl font-[1000] tracking-tighter leading-none">Deploy New Mission</h2>
                        </div>
                        <button onClick={onClose} className="shrink-0 p-2 md:p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all active:scale-90 border border-white/10">
                            <X className="w-5 h-5 md:w-6 md:h-6 text-white" />
                        </button>
                    </div>
                </div>

                {/* --- CONTENT BODY --- */}
                <div className="flex-1 overflow-y-auto custom-scrollbar p-6 md:p-8 space-y-8 bg-[#F8FAFC] relative">
                    
                    {/* SECTION 1: MISSION OBJECTIVE (HERO) */}
                    <div className="space-y-2">
                        <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2">
                            <Type className="w-3 h-3" /> Mission Objective
                        </label>
                        <div className={cn(
                            "bg-white rounded-[28px] border transition-all duration-300 overflow-hidden relative group",
                            isTitleFocused ? "border-[#E51636] shadow-xl shadow-red-500/10 ring-4 ring-red-500/5" : "border-slate-200 shadow-sm hover:border-slate-300"
                        )}>
                            <div className="absolute top-0 left-0 w-2 h-full bg-slate-100 group-hover:bg-[#E51636] transition-colors" />
                            <div className="p-5 pl-7 flex items-start gap-4">
                                <div className="p-3 bg-slate-50 rounded-2xl text-slate-400 mt-1 shrink-0">
                                    <Terminal className="w-5 h-5" />
                                </div>
                                <textarea
                                    autoFocus
                                    rows={1}
                                    onFocus={() => setIsTitleFocused(true)}
                                    onBlur={() => setIsTitleFocused(false)}
                                    value={draft.title}
                                    onChange={e => setDraft({...draft, title: e.target.value})}
                                    className="w-full bg-transparent text-xl md:text-2xl font-[900] text-slate-800 placeholder:text-slate-300 outline-none resize-none leading-tight tracking-tight mt-1.5"
                                    placeholder="Enter directive..."
                                />
                            </div>
                        </div>
                    </div>

                    {/* SECTION 2: GRID LAYOUT (2-COL ON DESKTOP) */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        
                        {/* LEFT COLUMN: SCHEDULING + TYPE */}
                        <div className="space-y-6">
                            {/* TYPE */}
                            <div className="space-y-2">
                                <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Layers className="w-3 h-3" /> Classification</label>
                                <div className="grid grid-cols-2 gap-2">
                                    {categories.map(cat => {
                                        const isSelected = draft.type === cat.id;
                                        const styles = getTypeColor(cat.id).split(' ');
                                        return (
                                            <button key={cat.id} onClick={() => setDraft({...draft, type: cat.id})} className={cn("px-4 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest border transition-all flex items-center justify-center gap-2 shadow-sm", isSelected ? `${styles[0]} ${styles[2]} ${styles[1]} ring-2 ring-white shadow-md` : "bg-white border-slate-200 text-slate-400 hover:border-slate-300")}>
                                                <cat.icon className="w-3 h-3" /> {getEventLabel(cat.id)}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>

                            {/* SCHEDULING */}
                            <div className="space-y-2">
                                <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Clock className="w-3.5 h-3.5" /> Scheduling</label>
                                <IntegratedRangePicker start={draft.startDate} end={draft.endDate} onChange={(s, e) => setDraft({...draft, startDate: s, endDate: e})} />
                            </div>
                        </div>

                        {/* RIGHT COLUMN: LOGISTICS + INTEL */}
                        <div className="space-y-6">
                            
                            {/* LOGISTICS */}
                            <div className="space-y-2">
                                <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Activity className="w-3 h-3" /> Logistics</label>
                                <div className="bg-white p-5 rounded-[32px] border border-slate-100 shadow-sm space-y-4">
                                    <WebAppDropdown label="Mission Lead" icon={Crown} placeholder="Select Leader..." options={teamMembers.filter(m => m.status === 'Director' || m.status === 'Assistant Director' || m.status === 'Team Leader')} selected={teamMembers.find(m => m.id === draft.assignee)} onSelect={(u: TeamMember) => setDraft({...draft, assignee: u.id, assigneeName: u.name})} />
                                    <WebAppDropdown label="Participant" icon={UserCircle} placeholder="Assign Member..." options={teamMembers} selected={teamMembers.find(m => m.id === draft.teamMemberId)} onSelect={(u: TeamMember) => setDraft({...draft, teamMemberId: u.id, teamMemberName: u.name})} />
                                    
                                    <div>
                                        <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] block mb-2 px-1">Impact Level</label>
                                        <div className="flex gap-1.5 p-1 bg-slate-50 rounded-xl border border-slate-100">
                                            {PRIORITIES.map(p => {
                                                const isSelected = draft.priority === p;
                                                return (
                                                    <button key={p} onClick={() => setDraft({...draft, priority: p})} className={cn("flex-1 py-2.5 rounded-xl text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1.5", getPriorityStyles(p, isSelected))}>
                                                        <Flag className={cn("w-2.5 h-2.5", isSelected ? "fill-white" : p === 'High' ? 'text-[#E51636]' : p === 'Medium' ? 'text-amber-500' : 'text-[#004F71]')} />
                                                        {p}
                                                    </button>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* MISSION BRIEFING */}
                            <div className="space-y-2">
                                <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Terminal className="w-3 h-3" /> Intel</label>
                                <div className={cn("relative bg-white border border-slate-200 rounded-[28px] overflow-hidden shadow-sm transition-all duration-300 group", isBriefingFocused && "border-[#E51636] shadow-md")}>
                                    <textarea onFocus={() => setIsBriefingFocused(true)} onBlur={() => setIsBriefingFocused(false)} value={draft.description} onChange={e => setDraft({...draft, description: e.target.value})} className="w-full h-32 p-5 bg-transparent text-sm font-medium outline-none resize-none placeholder:text-slate-300 leading-relaxed text-slate-700" placeholder="Add operational context..." />
                                    <div className="absolute bottom-3 right-4 pointer-events-none opacity-10"><PenTool className="w-5 h-5 text-[#E51636]" /></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                {/* --- FOOTER --- */}
                <div className="px-6 py-4 md:px-8 md:py-6 bg-white border-t border-slate-100 flex justify-between items-center shrink-0 z-20 pb-10 md:pb-6">
                    <button onClick={onClose} className="px-6 py-3 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-[#E51636] transition-all">Discard</button>
                    <button onClick={() => onCreate(draft)} className="px-8 md:px-10 py-3.5 bg-[#004F71] text-white rounded-2xl font-black uppercase text-[10px] tracking-[0.3em] shadow-2xl shadow-blue-900/40 flex items-center gap-3 hover:scale-[1.03] active:scale-95 transition-all">
                        <Save className="w-4 h-4" /> Deploy
                    </button>
                </div>
            </motion.div>
        </div>
    );
}
--- FILE: ./app/(main)/calendar/_components/TimelineConnections.tsx ---
"use client";

import { motion, AnimatePresence } from "framer-motion";
import { CalendarEvent } from "./types";
import { Scissors } from "lucide-react";
import { useState } from "react";
import { cn } from "@/lib/utils";

interface Props {
  events: CalendarEvent[];
  eventCoordinates: Map<string, { xStart: number; xEnd: number; y: number }>;
  onRemoveLink?: (targetId: string, sourceId: string) => void;
  mode?: 'cables' | 'controls';
  draggingId?: string | null;
  isUnlinkingMode?: boolean; 
}

export default function TimelineConnections({ 
  events, 
  eventCoordinates, 
  onRemoveLink,
  mode = 'cables',
  draggingId,
  isUnlinkingMode = false
}: Props) {
  const [hoveredLink, setHoveredLink] = useState<string | null>(null);

  // Intelligent Bezier Path Generator
  const getPath = (x1: number, y1: number, x2: number, y2: number, index: number = 0) => {
    const width = Math.abs(x2 - x1);
    const isBackwards = x2 < x1;
    const fanOffset = (index % 2 === 0 ? 1 : -1) * (index * 6); 

    if (isBackwards) {
        const loopSize = Math.max(width * 0.4, 150) + Math.abs(fanOffset); 
        return `M ${x1} ${y1} C ${x1 + 50} ${y1 + 80 + fanOffset}, ${x2 - 50} ${y2 + 80 + fanOffset}, ${x2} ${y2}`;
    } else {
        const curvature = Math.min(width * 0.6, 250) + Math.abs(fanOffset); 
        return `M ${x1} ${y1} C ${x1 + curvature} ${y1}, ${x2 - curvature} ${y2}, ${x2} ${y2}`;
    }
  };

  return (
    // FIX: Remove 'pointer-events-none' from here if it blocks children, 
    // but we keep it to allow clicking through empty space. 
    // We will ensure children override this.
    <svg className="absolute inset-0 pointer-events-none overflow-visible w-full h-full">
      <defs>
        <linearGradient id="activeFlow" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stopColor="#3b82f6" stopOpacity="0" />
          <stop offset="50%" stopColor="#60a5fa" stopOpacity="1" />
          <stop offset="100%" stopColor="#3b82f6" stopOpacity="0" />
        </linearGradient>
        
        <marker id="arrowHead" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
          <path d="M0,0 L4,2 L0,4 L1,2 Z" fill="#94a3b8" />
        </marker>
        <marker id="arrowHeadSever" markerWidth="4" markerHeight="4" refX="2" refY="2" orient="auto">
          <path d="M0,0 L4,2 L0,4 L1,2 Z" fill="#ef4444" />
        </marker>

        <filter id="wireShadow" x="-50%" y="-50%" width="200%" height="200%">
          <feDropShadow dx="0" dy="2" stdDeviation="1.5" floodColor="#0f172a" floodOpacity="0.15" />
        </filter>
      </defs>

      {events.map((event) => {
        if (!event.linkedEventIds || event.linkedEventIds.length === 0 || !eventCoordinates.has(event.id)) return null;

        return event.linkedEventIds.map((sourceId, idx) => {
            if (!eventCoordinates.has(sourceId)) return null;

            if (draggingId && (event.id === draggingId || sourceId === draggingId)) return null;

            const source = eventCoordinates.get(sourceId)!;
            const target = eventCoordinates.get(event.id)!;

            const path = getPath(source.xEnd, source.y, target.xStart, target.y, idx);
            
            const isBackwards = target.xStart < source.xEnd;
            const midX = (source.xEnd + target.xStart) / 2;
            const midY = isBackwards ? Math.max(source.y, target.y) + 60 : (source.y + target.y) / 2;

            const linkKey = `${event.id}-${sourceId}`;
            const isHovered = hoveredLink === linkKey;
            
            const showTriggers = isHovered || isUnlinkingMode;

            // RENDER VISUALS (LAYER 0)
            if (mode === 'cables') {
                return (
                    <g key={linkKey}>
                        {/* Visible Base Line */}
                        <path 
                          d={path} 
                          fill="none" 
                          stroke={isHovered ? "#fca5a5" : "#cbd5e1"} 
                          strokeWidth={isHovered ? "3" : "2"} 
                          strokeLinecap="round"
                          style={{ filter: "url(#wireShadow)", transition: "stroke 0.3s ease, stroke-width 0.3s ease" }}
                          markerEnd={isHovered ? "url(#arrowHeadSever)" : "url(#arrowHead)"}
                        />

                        {/* Flow Animation */}
                        {!showTriggers && (
                            <motion.path
                              d={path} 
                              fill="none" 
                              stroke="url(#activeFlow)" 
                              strokeWidth="3" 
                              strokeLinecap="round"
                              strokeDasharray="100 400"
                              initial={{ strokeDashoffset: 500 }}
                              animate={{ strokeDashoffset: 0 }}
                              transition={{ duration: 3, repeat: Infinity, ease: "linear", delay: idx * 0.3 }} 
                            />
                        )}
                    </g>
                );
            }

            // RENDER CONTROLS (LAYER 30+)
            if (mode === 'controls') {
                return (
                    <g 
                        key={linkKey} 
                        onMouseEnter={() => setHoveredLink(linkKey)}
                        onMouseLeave={() => setHoveredLink(null)}
                        // FIX: Explicitly re-enable pointer events for this group
                        style={{ pointerEvents: 'auto' }} 
                    >
                        {/* Invisible Hit Path - Widened for usability */}
                        <path 
                          d={path} 
                          fill="none" 
                          stroke="transparent" 
                          strokeWidth="30" 
                          strokeLinecap="round"
                          style={{ cursor: isUnlinkingMode ? 'not-allowed' : 'pointer' }}
                        />

                        {/* Scissor Button - Always rendered if trigger active */}
                        <AnimatePresence>
                            {showTriggers && (
                                <g transform={`translate(${midX}, ${midY})`}>
                                    {/* FIX: Ensure ForeignObject allows interaction */}
                                    <foreignObject x="-20" y="-20" width="40" height="40" style={{ overflow: 'visible', pointerEvents: 'auto' }}>
                                        <motion.button
                                            initial={{ scale: 0, opacity: 0 }}
                                            animate={{ scale: 1, opacity: 1 }}
                                            exit={{ scale: 0, opacity: 0 }}
                                            whileHover={{ scale: 1.1 }}
                                            whileTap={{ scale: 0.9 }}
                                            onClick={(e) => {
                                                e.stopPropagation();
                                                e.preventDefault(); // Stop event bubbling
                                                if(onRemoveLink) onRemoveLink(event.id, sourceId);
                                            }}
                                            className={cn(
                                                "w-10 h-10 rounded-full border shadow-sm flex items-center justify-center transition-all cursor-pointer relative z-[100] backdrop-blur-sm",
                                                isUnlinkingMode 
                                                    ? "bg-white/95 border-red-300 text-red-500 shadow-md ring-2 ring-red-100" 
                                                    : "bg-white border-slate-200 text-slate-400 hover:text-red-600 hover:border-red-200 hover:shadow-md"
                                            )}
                                        >
                                            <Scissors className="w-5 h-5" />
                                        </motion.button>
                                    </foreignObject>
                                </g>
                            )}
                        </AnimatePresence>
                    </g>
                );
            }
            
            return null;
        });
      })}
    </svg>
  );
}
--- FILE: ./app/(main)/calendar/_components/CalendarGrid.tsx ---
"use client";

import { useMemo } from "react";
import { format, startOfMonth, endOfMonth, startOfWeek, endOfWeek, addDays, isSameMonth, isToday } from "date-fns";
import { cn } from "@/lib/utils";
import { CalendarEvent, getLayoutForWeek } from "./types";
import DraggableEventCard from "./DraggableEventCard";

interface CalendarGridProps {
  currentDate: Date;
  events: CalendarEvent[];
  isStamping: boolean; 
  onDragEnd: (id: string, offsetDays: number) => void;
  onSelectEvent: (event: CalendarEvent) => void;
  onStamp?: (eventId: string) => void;
}

export default function CalendarGrid({
  currentDate,
  events,
  isStamping,
  onDragEnd,
  onSelectEvent,
  onStamp
}: CalendarGridProps) {
  
  const startDate = startOfWeek(startOfMonth(currentDate));
  const endDate = endOfWeek(endOfMonth(currentDate));

  const calendarWeeks = useMemo(() => {
    const weeks = [];
    let day = startDate;
    while (day <= endDate) {
      const week = [];
      for (let i = 0; i < 7; i++) { 
        week.push(day); 
        day = addDays(day, 1); 
      }
      weeks.push(week);
    }
    return weeks;
  }, [currentDate, startDate, endDate]);

  const handleCardClick = (event: CalendarEvent) => {
      // PRIORITY: STAMPING
      if (isStamping && onStamp) {
          onStamp(event.id);
      } else {
          onSelectEvent(event);
      }
  };

  return (
    <div className="flex-1 bg-white min-w-[800px] select-none pb-20">
      <div className="grid grid-cols-7 border-b border-slate-200 bg-white sticky top-0 z-30 shadow-sm">
        {["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"].map((d) => (
          <div key={d} className="py-4 text-center text-[10px] font-black text-slate-400 tracking-widest border-r border-slate-50 last:border-0 bg-slate-50/30">
            {d}
          </div>
        ))}
      </div>

      <div className="flex-1">
        {calendarWeeks.map((week, wIdx) => {
          const { placedItems, totalSlots } = getLayoutForWeek(week[0], events);
          
          // COMPACT LAYOUT: Reduced multiplier from 50 to 40, and base height from 160 to 120
          const dynamicHeight = Math.max(120, (totalSlots * 40) + 60);

          return (
            <div key={wIdx} className="grid grid-cols-7 border-b border-slate-100 last:border-0 relative group" style={{ height: dynamicHeight }}>
              
              {week.map(day => (
                  <div 
                    key={day.toString()}
                    data-date={format(day, "yyyy-MM-dd")} 
                    className={cn(
                      "relative border-r border-slate-100 last:border-0 p-2 transition-colors duration-200 z-0 h-full",
                      !isSameMonth(day, currentDate) && "bg-slate-50/60",
                      isToday(day) && "bg-blue-50/10"
                    )}
                  >
                    <span className={cn(
                      "absolute top-2 left-2 w-7 h-7 flex items-center justify-center rounded-lg text-xs font-bold transition-all pointer-events-none",
                      isToday(day) ? "bg-[#004F71] text-white shadow-md" : "text-slate-400",
                    )}>
                      {format(day, "d")}
                    </span>
                  </div>
              ))}

              <div className="absolute inset-0 grid grid-cols-7 mt-10 z-20 pointer-events-none">
                  {placedItems.map((item) => {
                      const segmentDate = addDays(week[0], item.col - 1);

                      return (
                        <DraggableEventCard
                            key={`${item.event.id}-${wIdx}`}
                            {...item}
                            segmentDate={segmentDate}
                            isDragging={false}
                            isStamping={isStamping}
                            onDragEnd={onDragEnd}
                            onClick={handleCardClick}
                        />
                      );
                  })}
              </div>
            </div>
          )
        })}
      </div>
    </div>
  );
}
--- FILE: ./app/(main)/calendar/_components/types.ts ---
import { 
  startOfDay, 
  addDays, 
  differenceInCalendarDays, 
  max, 
  min,
  isValid
} from "date-fns";
import { 
  Layers, 
  GraduationCap, 
  Utensils, 
  Star, 
  Briefcase, 
  Crown 
} from "lucide-react";

// --- 1. SHARED BASE TYPES ---

export type EventType = "Training" | "Goal" | "Deadline" | "Operation" | "OneOnOne";
export type Priority = "Low" | "Medium" | "High";
export type StickerType = "star" | "alert" | "fire" | "party" | "check";
export type Department = "FOH" | "BOH";
export type Status = "Onboarding" | "Training" | "Team Member" | "Team Leader" | "Assistant Director" | "Director";

// --- 2. TEAM & PERFORMANCE TYPES ---

export interface Goal {
    id: string;
    label: string;
    progress: number;
    status: "In Progress" | "Completed" | "At Risk";
    dueDate: string;
    priority: Priority;
}

export interface Subtask {
  id: string;
  label: string;
  isCompleted: boolean;
}

export interface TeamMember {
  id: string;
  name: string;
  role: string;
  dept: Department;
  status: Status;
  email: string;
  phone: string;
  joined: string;
  image: string;
  level: number;
  progress: number; 
  
  // --- ADDED THIS FIELD ---
  completedTaskIds?: string[];
  // -----------------------

  badges: string[];
  tags: { label: string; color: string }[];
  stats: {
    speed: number;
    accuracy: number;
    hospitality: number;
    knowledge: number;
    leadership: number;
  };
  performance: number[]; 
  goals?: Goal[];
  pairing?: { name: string; image: string; role: string }; 
  promotionDates?: Record<string, string>; 
  curriculum?: {
    currentModule: string;
    moduleProgress: number;
    tasks: { id: string; label: string; completed: boolean }[];
  };
}

// --- 3. CALENDAR EVENT TYPES ---

export interface CalendarEvent {
  id: string;
  title: string;
  // Primary Assigned Leader
  assignee: string; 
  assigneeName: string;
  // Assigned Team Member (Optional)
  teamMemberId?: string;
  teamMemberName?: string;
  
  startDate: Date;
  endDate: Date;
  type: EventType;
  status: "To Do" | "In Progress" | "Done";
  priority: Priority;
  description?: string;
  isGhost?: boolean;
  stickers?: StickerType[];
  subtasks?: Subtask[]; 
  
  // UPDATED: Now supports multiple dependencies
  linkedEventIds?: string[]; 
}

export type DraftEvent = Omit<CalendarEvent, "id" | "status">;

export interface LayoutItem {
    event: CalendarEvent;
    col: number;
    span: number;
    slot: number;
    continuesBefore: boolean;
    continuesAfter: boolean;
}

// --- 4. DOMAIN CONSTANTS ---

export const EVENT_TYPES: EventType[] = ["Training", "Goal", "Deadline", "Operation", "OneOnOne"];
export const PRIORITIES: Priority[] = ["High", "Medium", "Low"];

export const STICKERS: { id: StickerType; icon: string; label: string; color: string }[] = [
  { id: "star", icon: "", label: "Focus", color: "bg-amber-100 border-amber-200" },
  { id: "alert", icon: "", label: "Urgent", color: "bg-red-100 border-red-200" },
  { id: "fire", icon: "", label: "Hot", color: "bg-orange-100 border-orange-200" },
  { id: "party", icon: "", label: "Event", color: "bg-purple-100 border-purple-200" },
  { id: "check", icon: "", label: "Verify", color: "bg-emerald-100 border-emerald-200" },
];

export const STAGES: { id: Status; title: string; icon: any }[] = [
    { id: "Onboarding", title: "Onboarding", icon: Layers },
    { id: "Training", title: "Training", icon: GraduationCap },
    { id: "Team Member", title: "Team Member", icon: Utensils },
    { id: "Team Leader", title: "Team Leader", icon: Star },
    { id: "Assistant Director", title: "Asst. Director", icon: Briefcase },
    { id: "Director", title: "Director", icon: Crown },
];

// --- 5. UI HELPERS ---

export const getEventLabel = (type: EventType) => {
  switch (type) {
    case "OneOnOne": return "1-on-1";
    default: return type;
  }
};

export const getTypeColor = (type: EventType, isGhost: boolean = false) => {
  if (isGhost) {
      return "bg-white/80 border-2 border-dashed border-[#004F71] text-[#004F71] shadow-xl z-50 backdrop-blur-sm mix-blend-multiply";
  }
  switch (type) {
    case "Training": return "bg-blue-50 text-[#004F71] border-[#004F71] shadow-sm hover:shadow-md";
    case "Goal": return "bg-emerald-50 text-emerald-800 border-emerald-600 shadow-sm hover:shadow-md";
    case "Deadline": return "bg-red-50 text-[#E51636] border-[#E51636] shadow-sm hover:shadow-md";
    case "Operation": return "bg-slate-100 text-slate-700 border-slate-500 shadow-sm hover:shadow-md";
    case "OneOnOne": return "bg-purple-50 text-purple-700 border-purple-500 shadow-sm hover:shadow-md";
    default: return "bg-white border-slate-200";
  }
};

// --- 6. GRID MATH & LAYOUT LOGIC ---

const normalizeDate = (d: Date) => startOfDay(isValid(d) ? d : new Date());

const calculateSpan = (event: CalendarEvent, weekStartDay: Date) => {
    const eStart = normalizeDate(event.startDate);
    const rawEnd = normalizeDate(event.endDate);
    const eEnd = addDays(rawEnd, 1); 

    const wStart = normalizeDate(weekStartDay);
    const wEnd = addDays(wStart, 7); 

    if (eEnd <= wStart || eStart >= wEnd) {
        return { col: 0, span: 0, continuesBefore: false, continuesAfter: false };
    }

    const visualStart = max([eStart, wStart]);
    const visualEnd = min([eEnd, wEnd]);

    const colOffset = differenceInCalendarDays(visualStart, wStart);
    const span = differenceInCalendarDays(visualEnd, visualStart);
    const col = colOffset + 1;

    const continuesBefore = eStart < wStart;
    const continuesAfter = eEnd > wEnd;

    return { col, span, continuesBefore, continuesAfter };
}

export const getLayoutForWeek = (weekStart: Date, events: CalendarEvent[]) => {
  const weekStartDay = normalizeDate(weekStart);
  
  const weekItems = events.map(e => {
      const spanData = calculateSpan(e, weekStartDay);
      return { event: e, ...spanData };
  }).filter(item => item.span > 0);

  weekItems.sort((a,b) => {
      if (a.col !== b.col) return a.col - b.col;
      if (a.span !== b.span) return b.span - a.span;
      return a.event.id.localeCompare(b.event.id);
  });

  const slots: CalendarEvent[][] = []; 
  const placedItems: LayoutItem[] = [];

  weekItems.forEach(item => {
      let slot = 0;
      while(true) {
          if (!slots[slot]) slots[slot] = [];
          
          const collision = slots[slot].some(s => {
              const sProps = calculateSpan(s, weekStartDay);
              const itemStart = item.col;
              const itemEnd = item.col + item.span;
              const slotStart = sProps.col;
              const slotEnd = sProps.col + sProps.span;
              return (itemStart < slotEnd) && (itemEnd > slotStart);
          });

          if (!collision) {
              slots[slot].push(item.event);
              placedItems.push({ 
                  event: item.event, 
                  col: item.col, 
                  span: item.span, 
                  slot, 
                  continuesBefore: item.continuesBefore, 
                  continuesAfter: item.continuesAfter 
              });
              break;
          }
          slot++;
      }
  });

  return { placedItems, totalSlots: slots.length, occupiedSlots: slots };
};
--- FILE: ./app/(main)/calendar/_components/OneOnOneSessionModal.tsx ---
"use client";

import { useState, useEffect } from "react";
import { format, differenceInMinutes, addWeeks } from "date-fns";
import { motion, AnimatePresence } from "framer-motion";
import { cn } from "@/lib/utils";
import { CalendarEvent, Subtask } from "./types";
import { useAppStore } from "@/lib/store/useStore";
import { 
  X, Save, Trash2, PenLine, CheckSquare, 
  MessageSquare, User, Target, 
  ListTodo, ArrowUp, Flag, RefreshCcw,
  Zap, Clock, Timer, Calendar
} from "lucide-react";
import ClientPortal from "@/components/core/ClientPortal";

interface Props {
  event: CalendarEvent;
  onClose: () => void;
  onUpdate: (updatedEvent: CalendarEvent) => void;
}

// Added 'as const' to fix TypeScript type inference for Framer Motion
const TRANSITION_SPRING = { type: "spring", damping: 30, stiffness: 300, mass: 0.8 } as const;

export default function OneOnOneSessionModal({ event, onClose, onUpdate }: Props) {
  const { team } = useAppStore();
  const sessionUser = team.find(u => u.id === event.assignee);
  const sessionDuration = differenceInMinutes(event.endDate, event.startDate);

  // Lock body scroll on mount
  useEffect(() => {
    document.body.style.overflow = "hidden";
    return () => {
      document.body.style.overflow = "unset";
    };
  }, []);

  const [sessionNotes, setSessionNotes] = useState(() => {
      return event.description?.split(/\[SESSION SUMMARY\]|\[KEY OUTCOMES\]|\[FOLLOW UP SCHEDULED:/)[0].trim() || "";
  });
  
  const [keyTakeaways, setKeyTakeaways] = useState(() => {
      let match = event.description?.match(/\[SESSION SUMMARY\]([\s\S]*?)(?=\[FOLLOW UP|$)/);
      if (!match) {
          match = event.description?.match(/\[KEY OUTCOMES\]([\s\S]*?)(?=\[FOLLOW UP|$)/);
      }
      return match ? match[1].trim() : "";
  });

  const [nextSteps, setNextSteps] = useState<Subtask[]>(event.subtasks || []);
  const [newStepText, setNewStepText] = useState("");
  
  const [followUpDate, setFollowUpDate] = useState<Date | null>(null);
  const [isUrgentFollowUp, setIsUrgentFollowUp] = useState(false);

  const handleAddStep = () => {
      if (!newStepText.trim()) return;
      const newStep: Subtask = { id: Math.random().toString(36).substr(2, 9), label: newStepText, isCompleted: false };
      setNextSteps([...nextSteps, newStep]);
      setNewStepText("");
  };

  const handleToggleStep = (id: string) => {
      setNextSteps(nextSteps.map(s => s.id === id ? { ...s, isCompleted: !s.isCompleted } : s));
  };

  const handleCompleteSession = () => {
      let finalDescription = sessionNotes;
      if (keyTakeaways) {
          finalDescription += `\n\n[SESSION SUMMARY]\n${keyTakeaways}`;
      }
      if (followUpDate) {
          finalDescription += `\n\n[FOLLOW UP SCHEDULED: ${format(followUpDate, 'MMM do')}]`;
      }

      const updatedEvent: CalendarEvent = {
          ...event,
          status: "Done",
          description: finalDescription,
          subtasks: nextSteps,
      };
      onUpdate(updatedEvent);
      onClose();
  };

  return (
    <ClientPortal>
        <div className="fixed inset-0 z-[200] flex items-end md:items-center justify-center md:p-6 p-0">
            {/* BACKDROP */}
            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-[#0F172A]/90 backdrop-blur-md" onClick={onClose} />
            
            {/* MAIN MODAL CARD */}
            <motion.div 
                initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} transition={TRANSITION_SPRING}
                className="bg-white w-full h-[92vh] md:h-[85vh] md:max-w-5xl rounded-t-[40px] md:rounded-[48px] shadow-2xl relative overflow-hidden flex flex-col border border-white/20"
            >
                {/* --- HEADER (Fixed Height) --- */}
                <div className="bg-[#E51636] relative shrink-0 overflow-hidden">
                    <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#fff_1px,transparent_1px)] [background-size:16px_16px]" />
                    <div className="absolute top-0 right-0 p-8 opacity-10"><MessageSquare className="w-64 h-64 rotate-12" /></div>
                    
                    <div className="relative z-10 px-6 pt-8 pb-8 md:px-10 md:pt-10 md:pb-10">
                        <div className="flex justify-between items-start">
                            <div className="flex-1 pr-4">
                                <div className="flex items-center gap-3 mb-3 md:mb-4">
                                    <div className="px-3 py-1 bg-white/10 rounded-full border border-white/20 backdrop-blur-xl flex items-center gap-2">
                                        <span className="text-[8px] font-black uppercase tracking-[0.4em] text-white">Session Intelligence</span>
                                    </div>
                                </div>
                                <h2 className="text-3xl md:text-5xl font-black text-white tracking-tight leading-none mb-2">{event.title}</h2>
                                <p className="text-white/60 text-xs md:text-sm font-medium">Recorded for {sessionUser?.role || "Team Member"}</p>
                            </div>
                            
                            <div className="flex flex-col items-center gap-2">
                                <div className="w-16 h-16 md:w-20 md:h-20 rounded-[20px] md:rounded-[28px] bg-white p-1 shadow-xl rotate-3 shrink-0">
                                    {sessionUser ? (
                                        <img src={sessionUser.image} className="w-full h-full rounded-[16px] md:rounded-[24px] object-cover" />
                                    ) : (
                                        <div className="w-full h-full bg-slate-100 rounded-[16px] md:rounded-[24px] flex items-center justify-center"><User className="w-8 h-8 text-slate-300" /></div>
                                    )}
                                </div>
                                <span className="px-2 py-0.5 md:px-3 md:py-1 bg-white text-[#E51636] rounded-full text-[8px] md:text-[9px] font-black uppercase tracking-widest shadow-lg -mt-3 md:-mt-4 relative z-10">
                                    {sessionUser?.name.split(" ")[0]}
                                </span>
                            </div>
                        </div>
                        
                        {/* Close Button */}
                        <button onClick={onClose} className="absolute top-6 right-6 p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all text-white active:scale-90 border border-white/10">
                            <X className="w-5 h-5" />
                        </button>
                    </div>
                </div>

                {/* --- SCROLLABLE CONTENT BODY --- */}
                {/* Added min-h-0 to allow flex container to shrink and show scrollbar */}
                <div className="flex-1 bg-[#F8FAFC] overflow-y-auto custom-scrollbar flex flex-col md:flex-row relative min-h-0">
                    
                    {/* LEFT COLUMN: Notes & Summary */}
                    <div className="flex-1 p-6 md:p-10 border-b md:border-b-0 md:border-r border-slate-200 flex flex-col gap-6 md:gap-8 bg-white md:bg-transparent">
                        
                        {/* 1. 1-on-1 Goal */}
                        <div className="flex flex-col min-h-[160px] md:min-h-[200px]">
                            <div className="flex items-center gap-2 text-slate-400 mb-3 md:mb-4">
                                <PenLine className="w-3.5 h-3.5 md:w-4 md:h-4" />
                                <span className="text-[9px] font-black uppercase tracking-[0.2em]">1-on-1 Goal</span>
                            </div>
                            <textarea 
                                value={sessionNotes} 
                                onChange={e => setSessionNotes(e.target.value)}
                                className="w-full flex-1 bg-transparent text-xl md:text-2xl font-medium text-slate-800 outline-none resize-none placeholder:text-slate-300 leading-relaxed p-0 tracking-tight" 
                                placeholder="What is the primary objective or observation for this session?" 
                            />
                        </div>

                        {/* 2. Key Outcomes */}
                        <div className="pt-6 md:pt-8 border-t border-slate-100">
                                <div className="flex items-center justify-between mb-3 md:mb-4">
                                <div className="flex items-center gap-2 text-slate-400">
                                    <Zap className="w-3.5 h-3.5 md:w-4 md:h-4" />
                                    <span className="text-[9px] font-black uppercase tracking-[0.2em]">Key Outcomes</span>
                                </div>
                                </div>

                                <div className="bg-slate-50/50 rounded-[24px] p-4 md:p-6 border border-slate-200/60 shadow-inner flex flex-col gap-3 group focus-within:bg-white focus-within:shadow-md transition-all">
                                    <div className="flex items-center gap-3 text-slate-700">
                                        <div className="p-2 bg-emerald-50 text-emerald-600 rounded-lg border border-emerald-100 shadow-sm">
                                            <Target className="w-4 h-4" />
                                        </div>
                                        <div>
                                            <p className="text-xs font-black uppercase tracking-wide text-slate-900">Session Summary</p>
                                            <p className="text-[10px] text-slate-400 font-medium mt-0.5">What went down?</p>
                                        </div>
                                    </div>
                                    
                                    <textarea 
                                    value={keyTakeaways}
                                    onChange={e => setKeyTakeaways(e.target.value)}
                                    className="w-full bg-transparent text-sm font-medium text-slate-600 outline-none resize-none placeholder:text-slate-400 mt-2 min-h-[80px] leading-relaxed"
                                    placeholder="Summarize the outcome, decisions made, or key feedback delivered..."
                                    />
                                </div>
                        </div>
                    </div>

                    {/* RIGHT COLUMN: Tasks & Follow Up */}
                    <div className="w-full md:w-[420px] bg-slate-50 p-6 md:p-10 flex flex-col border-l border-white shadow-[inset_4px_0_24px_rgba(0,0,0,0.02)]">
                        
                        {/* 1. Tactical Directives */}
                        <div className="flex items-center gap-2 text-slate-400 mb-4 md:mb-6">
                            <ListTodo className="w-3.5 h-3.5 md:w-4 md:h-4" />
                            <span className="text-[9px] font-black uppercase tracking-[0.2em]">Tactical Directives</span>
                        </div>

                        <div className="space-y-3 md:space-y-3 flex-1 overflow-y-auto max-h-[300px] no-scrollbar">
                            <AnimatePresence mode="popLayout">
                                {nextSteps.map((step) => (
                                    <motion.div 
                                        layout
                                        key={step.id} 
                                        onClick={() => handleToggleStep(step.id)}
                                        className={cn(
                                            "group flex items-center gap-4 p-4 rounded-2xl border transition-all cursor-pointer relative overflow-hidden shadow-sm active:scale-[0.98]",
                                            step.isCompleted 
                                                ? "bg-emerald-50/50 border-emerald-100 opacity-60" 
                                                : "bg-white border-slate-200 hover:border-[#004F71]/30"
                                        )}
                                    >
                                        <div className={cn(
                                            "w-5 h-5 rounded-md border-2 flex items-center justify-center shrink-0 transition-colors duration-300", 
                                            step.isCompleted 
                                                ? "bg-emerald-500 border-emerald-500 shadow-md shadow-emerald-500/20" 
                                                : "border-slate-300 bg-slate-50 group-hover:border-[#004F71] group-hover:bg-white"
                                        )}>
                                            <CheckSquare className={cn("w-3 h-3 text-white transition-transform", step.isCompleted ? "scale-100" : "scale-0")} />
                                        </div>
                                        <span className={cn("text-xs font-bold leading-snug select-none flex-1 break-words", step.isCompleted ? "text-emerald-700 line-through" : "text-slate-700")}>
                                            {step.label}
                                        </span>
                                        <button 
                                            onClick={(e) => { e.stopPropagation(); setNextSteps(nextSteps.filter(s => s.id !== step.id)); }}
                                            className="p-1.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-lg md:opacity-0 md:group-hover:opacity-100 transition-all active:scale-90"
                                        >
                                            <Trash2 className="w-3.5 h-3.5" />
                                        </button>
                                    </motion.div>
                                ))}
                            </AnimatePresence>
                            
                            {nextSteps.length === 0 && (
                                <div className="py-6 flex flex-col items-center justify-center text-slate-300 border-2 border-dashed border-slate-200 rounded-[20px]">
                                    <Target className="w-6 h-6 mb-2 opacity-50" />
                                    <p className="text-[9px] font-bold uppercase tracking-widest">No directives set</p>
                                </div>
                            )}

                            {/* Input Bubble */}
                            <div className="relative group mt-2">
                                <input 
                                    value={newStepText} onChange={e => setNewStepText(e.target.value)}
                                    onKeyDown={e => e.key === 'Enter' && handleAddStep()}
                                    className="w-full pl-5 pr-12 py-3 bg-white border border-slate-200 rounded-full text-xs font-bold outline-none focus:border-[#004F71] focus:ring-4 focus:ring-blue-500/10 transition-all shadow-sm focus:shadow-md placeholder:text-slate-300" 
                                    placeholder="Add directive..." 
                                />
                                <button 
                                    onClick={handleAddStep} 
                                    className="absolute right-1 top-1 bottom-1 aspect-square bg-[#004F71] text-white rounded-full shadow-md active:scale-95 transition-all flex items-center justify-center"
                                >
                                    <ArrowUp className="w-3.5 h-3.5" />
                                </button>
                            </div>
                        </div>

                        {/* 2. Follow-Up Protocol */}
                        <div className="mt-8 pt-8 border-t border-slate-200/60">
                            <div className="flex items-center justify-between mb-4">
                                <div className="flex items-center gap-2 text-slate-400">
                                    <RefreshCcw className="w-3.5 h-3.5 md:w-4 md:h-4" />
                                    <span className="text-[9px] font-black uppercase tracking-[0.2em]">Follow-Up Protocol</span>
                                </div>
                                {followUpDate && <span className="text-[9px] font-bold text-[#004F71] bg-blue-50 px-2 py-0.5 rounded-md border border-blue-100">Active</span>}
                            </div>

                            <div className={cn(
                                "bg-white p-4 rounded-[20px] border transition-all duration-300 shadow-sm group",
                                followUpDate ? "border-[#004F71] ring-4 ring-blue-50" : "border-slate-200 hover:border-slate-300"
                            )}>
                                <div className="flex items-center justify-between mb-4">
                                    <div>
                                        <p className="text-xs font-bold text-slate-900">Next Sync</p>
                                        <p className="text-[10px] font-medium text-slate-400 mt-0.5">
                                            {followUpDate ? format(followUpDate, "MMMM do, yyyy") : "Not scheduled"}
                                        </p>
                                    </div>
                                    <button 
                                        onClick={() => setIsUrgentFollowUp(!isUrgentFollowUp)}
                                        className={cn(
                                            "p-2 rounded-xl transition-all border",
                                            isUrgentFollowUp 
                                                ? "bg-red-50 text-[#E51636] border-red-100 shadow-sm" 
                                                : "bg-slate-50 text-slate-300 border-transparent hover:bg-slate-100"
                                        )}
                                    >
                                        <Flag className="w-4 h-4 fill-current" />
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-2 gap-2">
                                    {[1, 2, 4].map(weeks => (
                                        <button 
                                            key={weeks}
                                            onClick={() => setFollowUpDate(addWeeks(new Date(), weeks))}
                                            className={cn(
                                                "py-2 rounded-lg text-[9px] font-bold uppercase tracking-wide border transition-all",
                                                followUpDate && differenceInMinutes(followUpDate, addWeeks(new Date(), weeks)) < 60 // fuzzy match
                                                    ? "bg-[#004F71] text-white border-[#004F71]"
                                                    : "bg-slate-50 text-slate-500 border-slate-100 hover:bg-white hover:border-slate-300 hover:shadow-sm"
                                            )}
                                        >
                                            {weeks} {weeks === 1 ? 'Week' : 'Weeks'}
                                        </button>
                                    ))}
                                    <button 
                                        onClick={() => setFollowUpDate(null)}
                                        className="py-2.5 rounded-lg text-[9px] font-bold uppercase tracking-wide border border-transparent text-slate-400 hover:text-red-500 hover:bg-red-50 transition-all"
                                    >
                                        Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {/* FOOTER - Fixed Height */}
                <div className="shrink-0 p-6 md:p-8 bg-white border-t border-slate-100 flex justify-between items-center z-20">
                    <button onClick={onClose} className="px-6 py-4 text-xs font-black uppercase text-slate-400 hover:text-slate-600 transition-all">Discard</button>
                    <button 
                        onClick={handleCompleteSession}
                        className="px-8 md:px-12 py-4 bg-[#E51636] text-white rounded-2xl font-black uppercase text-[10px] tracking-[0.2em] shadow-xl shadow-red-900/20 flex items-center gap-3 hover:scale-[1.02] active:scale-95 transition-all"
                    >
                        <Save className="w-4 h-4" /> Save Record
                    </button>
                </div>
            </motion.div>
        </div>
    </ClientPortal>
  );
}
--- FILE: ./app/(main)/calendar/_components/TimelineBoard.tsx ---
"use client";

import { useMemo, useState, useEffect } from "react";
import { format, addDays, isToday, isWeekend, eachDayOfInterval, differenceInCalendarDays, startOfWeek } from "date-fns";
import { Link2, X, Activity, Layers, Settings2, Link as LinkIcon } from "lucide-react";
import { cn } from "@/lib/utils";
import { useAppStore } from "@/lib/store/useStore";
import { db } from "@/lib/firebase";
import { updateDoc, doc, arrayUnion, arrayRemove } from "firebase/firestore";
import toast from "react-hot-toast";
import { motion, AnimatePresence } from "framer-motion"; 

import { CalendarEvent, EVENT_TYPES, getEventLabel } from "./types";
import TimelineEventCard from "./TimelineEventCard";
import TimelineConnections from "./TimelineConnections";
import { TacticalSidebarRow } from "./TacticalSidebarRow";

interface Props {
  currentDate: Date;
  events: CalendarEvent[];
  isStamping: boolean;
  onDragEnd: (id: string, offsetDays: number) => void;
  onSelectEvent: (event: CalendarEvent) => void;
  onStamp?: (eventId: string) => void;
}

export default function TimelineBoard({ currentDate, events, isStamping, onDragEnd, onSelectEvent, onStamp }: Props) {
  const { team } = useAppStore();
  
  const [isLinkingMode, setIsLinkingMode] = useState(false);
  const [isUnlinkingMode, setIsUnlinkingMode] = useState(false);
  const [linkSourceId, setLinkSourceId] = useState<string | null>(null);
  const [draggingId, setDraggingId] = useState<string | null>(null);
  
  // --- RESPONSIVE DIMENSIONS ---
  const [isMobile, setIsMobile] = useState(false);

  useEffect(() => {
    const checkMobile = () => setIsMobile(window.innerWidth < 768);
    checkMobile();
    window.addEventListener('resize', checkMobile);
    return () => window.removeEventListener('resize', checkMobile);
  }, []);

  const DAY_WIDTH = isMobile ? 46 : 60;
  const ROW_HEIGHT = isMobile ? 56 : 60;
  const GROUP_HEADER_HEIGHT = isMobile ? 40 : 60;
  const GRID_HEADER_HEIGHT = isMobile ? 48 : 56;
  const SIDEBAR_WIDTH = isMobile ? 100 : 280; 
  const CARD_MARGIN = 8;

  // --- 1. CALCULATE DATE RANGE ---
  const timelineDays = useMemo(() => {
    const start = startOfWeek(currentDate); 
    return eachDayOfInterval({ start, end: addDays(start, 45) });
  }, [currentDate]);
  
  const timelineStart = timelineDays[0];
  const timelineEnd = timelineDays[timelineDays.length - 1];
  const totalDays = timelineDays.length;
  const totalBoardWidth = SIDEBAR_WIDTH + (totalDays * DAY_WIDTH);

  const { groupedEvents, eventCoordinates, totalHeight, sourceIds } = useMemo(() => {
    const groups: Record<string, CalendarEvent[]> = {};
    const coords = new Map<string, { xStart: number; xEnd: number; y: number }>();
    const sources = new Set<string>();
    
    let currentY = GRID_HEADER_HEIGHT; 

    events.forEach(e => { if(e.linkedEventIds) e.linkedEventIds.forEach(id => sources.add(id)); });

    EVENT_TYPES.forEach(type => {
        const typeEvents = events.filter(e => e.type === type);
        groups[type] = typeEvents;
        
        if (typeEvents.length > 0) {
            currentY += GROUP_HEADER_HEIGHT;
            typeEvents.forEach(event => {
                // Calculate VISIBLE start/end for connection line logic
                const effectiveStart = event.startDate < timelineStart ? timelineStart : event.startDate;
                const effectiveEnd = event.endDate > timelineEnd ? timelineEnd : event.endDate;
                
                if (effectiveStart <= effectiveEnd) {
                    const startDiff = differenceInCalendarDays(effectiveStart, timelineStart);
                    const duration = differenceInCalendarDays(effectiveEnd, effectiveStart) + 1;
                    
                    const xStart = (startDiff * DAY_WIDTH) + SIDEBAR_WIDTH; 
                    const xEnd = xStart + (duration * DAY_WIDTH) - CARD_MARGIN; 
                    const y = currentY + (ROW_HEIGHT / 2);
                    coords.set(event.id, { xStart, xEnd, y });
                }
                currentY += ROW_HEIGHT;
            });
        }
    });
    
    return { groupedEvents: groups, eventCoordinates: coords, totalHeight: currentY + 200, sourceIds: sources };
  }, [events, timelineStart, timelineEnd, DAY_WIDTH, ROW_HEIGHT, GRID_HEADER_HEIGHT, GROUP_HEADER_HEIGHT, SIDEBAR_WIDTH]);

  // ... (Keep handleEventClick, handleRemoveLink, toggles same as before) ...
  const handleEventClick = async (event: CalendarEvent) => {
    if (isStamping && onStamp) { onStamp(event.id); return; }
    if (isLinkingMode) { 
        if (!linkSourceId) { setLinkSourceId(event.id); toast(`Source: ${event.title}`, { icon: '' }); } 
        else { if (linkSourceId === event.id) { setLinkSourceId(null); return; } if (event.linkedEventIds?.includes(linkSourceId)) { toast.error("Already linked"); return; } const loadToast = toast.loading("Connecting..."); try { await updateDoc(doc(db, "events", event.id), { linkedEventIds: arrayUnion(linkSourceId) }); toast.success("Connected", { id: loadToast }); } catch (e) { toast.error("Fail", { id: loadToast }); } }
        return;
    }
    onSelectEvent(event);
  };

  const handleRemoveLink = async (targetId: string, sourceId: string) => { const loadToast = toast.loading("Severing link..."); try { await updateDoc(doc(db, "events", targetId), { linkedEventIds: arrayRemove(sourceId) }); toast.success("Link Cut", { id: loadToast }); } catch (error) { toast.error("Could not cut link", { id: loadToast }); } };
  const toggleLinking = () => { setIsLinkingMode(!isLinkingMode); setIsUnlinkingMode(false); setLinkSourceId(null); };
  const toggleUnlinking = () => { setIsUnlinkingMode(!isUnlinkingMode); setIsLinkingMode(false); };

  return (
    <div className="flex-1 overflow-hidden relative flex flex-col bg-slate-50/50 h-full">
         
         {/* FLOATING CONTROLS */}
         <div className="absolute top-4 right-4 md:top-24 md:right-8 z-[70] flex gap-2 md:gap-3">
            <button onClick={toggleLinking} className={cn("flex items-center justify-center gap-2 rounded-full font-black text-[10px] uppercase tracking-widest transition-all shadow-xl hover:scale-105 active:scale-95", isMobile ? "w-10 h-10 p-0" : "px-5 py-3", isLinkingMode ? "bg-[#0F172A] text-white" : "bg-white text-slate-500 hover:text-[#E51636]")}>
                {isLinkingMode ? <X className="w-4 h-4" /> : <LinkIcon className="w-4 h-4" />}
                {!isMobile && (isLinkingMode ? "Exit Linking" : "Chain Missions")}
            </button>
            <button onClick={toggleUnlinking} className={cn("flex items-center justify-center gap-2 rounded-full font-black text-[10px] uppercase tracking-widest transition-all shadow-xl hover:scale-105 active:scale-95", isMobile ? "w-10 h-10 p-0" : "px-5 py-3", isUnlinkingMode ? "bg-red-50 text-[#E51636] ring-2 ring-[#E51636]" : "bg-white text-slate-500 hover:text-[#E51636]")}>
                {isUnlinkingMode ? <X className="w-4 h-4" /> : <Settings2 className="w-4 h-4" />}
                {!isMobile && (isUnlinkingMode ? "Done" : "Manage Links")}
            </button>
         </div>

         {/* MAIN SCROLL AREA */}
         <div className="flex-1 overflow-auto relative custom-scrollbar m-2 md:m-4 rounded-[24px] md:rounded-[32px] shadow-xl border border-slate-200 bg-white">
            <div className="relative min-w-max" style={{ height: totalHeight, width: totalBoardWidth }}>
                
                {/* GRID BACKGROUND */}
                <div className="absolute inset-0 z-0 pointer-events-none opacity-[0.03]" style={{ backgroundImage: `linear-gradient(#004F71 1px, transparent 1px), linear-gradient(90deg, #004F71 1px, transparent 1px)`, backgroundSize: `${DAY_WIDTH}px ${ROW_HEIGHT}px`, backgroundPosition: `${SIDEBAR_WIDTH}px ${GRID_HEADER_HEIGHT}px` }} />

                {/* CONNECTIONS */}
                <div className="absolute inset-0 z-0">
                    <TimelineConnections events={events} eventCoordinates={eventCoordinates} mode="cables" draggingId={draggingId} isUnlinkingMode={isUnlinkingMode} />
                </div>

                {/* STICKY HEADER */}
                <div className="sticky top-0 z-[60] flex bg-white border-b border-slate-200 shadow-sm" style={{ height: GRID_HEADER_HEIGHT }}>
                    <div className="sticky left-0 z-[70] bg-white border-r border-slate-200 px-3 md:px-6 flex items-center justify-between font-black text-[9px] text-slate-400 uppercase tracking-[0.3em] shrink-0" style={{ width: SIDEBAR_WIDTH }}>
                         <div className="flex items-center gap-2 md:gap-3"><div className="p-1.5 bg-red-50 text-[#E51636] rounded-lg"><Activity className="w-3.5 h-3.5" /></div>{!isMobile && "Mission Logs"}</div>
                         <div className="h-4 w-px bg-slate-200" />
                    </div>
                    <div className="flex">
                        {timelineDays.map(day => (
                            <div key={day.toString()} className={cn("flex-shrink-0 flex flex-col items-center justify-center border-r border-slate-100", isWeekend(day) && "bg-slate-50/40")} style={{ width: DAY_WIDTH }}>
                                <span className="text-[7px] md:text-[8px] font-bold text-slate-300 uppercase">{format(day, "EEE")}</span>
                                <span className={cn("text-[9px] md:text-[10px] font-black w-5 h-5 md:w-6 md:h-6 flex items-center justify-center rounded-lg mt-0.5 transition-all", isToday(day) ? "bg-[#004F71] text-white shadow-lg shadow-blue-900/20 scale-110" : "text-slate-700")}>{format(day, "d")}</span>
                            </div>
                        ))}
                    </div>
                </div>

                {/* EVENTS LAYER */}
                <div className="relative z-10">
                    <AnimatePresence initial={false}>
                        {EVENT_TYPES.map((type) => {
                            const typeEvents = groupedEvents[type] || [];
                            if (typeEvents.length === 0) return null;
                            return (
                                <motion.div key={type} layout initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="relative group/category">
                                    <div className="relative z-10 flex items-center" style={{ height: GROUP_HEADER_HEIGHT }}>
                                         <div className="sticky left-0 z-[50] bg-white/95 backdrop-blur-sm border-r border-slate-200 px-3 md:px-6 flex items-center shrink-0" style={{ width: SIDEBAR_WIDTH }}>
                                             {isMobile ? (
                                                 <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 rounded-full bg-slate-300" /><span className="text-[9px] font-black uppercase text-slate-500 truncate">{getEventLabel(type)}</span></div>
                                             ) : (
                                                 <div className="flex items-center gap-3 bg-white border border-slate-200 text-slate-700 shadow-sm rounded-full px-4 py-1.5"><div className="p-1 bg-slate-100 rounded-full"><Layers className="w-3 h-3 text-slate-500" /></div><span className="text-[9px] font-black uppercase tracking-[0.2em]">{getEventLabel(type)}</span><div className="h-3 w-px bg-slate-200" /><span className="text-[8px] font-bold text-slate-400">{typeEvents.length} Active</span></div>
                                             )}
                                         </div>
                                         <div className="absolute top-1/2 left-[100px] md:left-[280px] right-0 h-px bg-slate-100 z-0" />
                                    </div>
                                    <AnimatePresence initial={false}>
                                        {typeEvents.map((event) => {
                                            const isSource = sourceIds.has(event.id);
                                            const isTarget = event.linkedEventIds && event.linkedEventIds.length > 0;
                                            if (event.endDate < timelineStart || event.startDate > timelineEnd) return null; // Hides off-screen events
                                            return (
                                                <motion.div key={event.id} layout initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: ROW_HEIGHT }} exit={{ opacity: 0, height: 0 }} transition={{ type: "spring", stiffness: 500, damping: 30 }} className={cn("flex relative transition-colors group/row hover:bg-blue-50/10")} style={{ height: ROW_HEIGHT }}>
                                                    <div className="sticky left-0 z-[40] shrink-0 border-r border-slate-200 bg-white" style={{ width: SIDEBAR_WIDTH }}>
                                                        <TacticalSidebarRow event={event} isMobile={isMobile} />
                                                    </div>
                                                    <div className="relative flex flex-1">
                                                        {timelineDays.map(day => <div key={day.toString()} className={cn("flex-shrink-0 border-r border-slate-100/60 h-full", isWeekend(day) && "bg-slate-50/30")} style={{ width: DAY_WIDTH }} />)}
                                                        <TimelineEventCard event={event} timelineStart={timelineStart} timelineEnd={timelineEnd} dayWidth={DAY_WIDTH} isStamping={isStamping} isLinking={isLinkingMode} isSource={isSource} isTarget={isTarget} onDragEnd={onDragEnd} onClick={() => handleEventClick(event)} onDragStart={() => setDraggingId(event.id)} onDragComplete={() => setDraggingId(null)} />
                                                    </div>
                                                </motion.div>
                                            );
                                        })}
                                    </AnimatePresence>
                                </motion.div>
                            );
                        })}
                    </AnimatePresence>
                </div>

                <div className="absolute inset-0 z-50 pointer-events-none">
                    <TimelineConnections events={events} eventCoordinates={eventCoordinates} mode="controls" draggingId={draggingId} onRemoveLink={handleRemoveLink} isUnlinkingMode={isUnlinkingMode} />
                </div>
            </div>
         </div>
    </div>
  );
}
--- FILE: ./app/(main)/calendar/_components/TacticalSidebarRow.tsx ---
"use client";

import { CalendarEvent, STICKERS } from "./types";
import { format } from "date-fns";
import { cn } from "@/lib/utils";
import { useAppStore } from "@/lib/store/useStore";
import { Clock, User } from "lucide-react";

// Updated Interface to accept optional isMobile
interface SidebarRowProps {
    event: CalendarEvent;
    isMobile?: boolean;
}

export const TacticalSidebarRow = ({ event, isMobile = false }: SidebarRowProps) => {
  const { team } = useAppStore();
  const leader = team.find(m => m.id === event.assignee);
  const participant = team.find(m => m.id === event.teamMemberId);

  return (
    <div className={cn(
        "w-full h-full flex flex-col justify-center border-r border-slate-100 bg-white/50 backdrop-blur-sm hover:bg-white transition-colors group relative overflow-hidden",
        isMobile ? "px-3" : "px-6"
    )}>
      
      {/* Active Marker Indicator (Left Border) */}
      <div className={cn(
          "absolute left-0 top-0 bottom-0 w-1 transition-all duration-300",
          event.status === "Done" ? "bg-emerald-500" : event.priority === "High" ? "bg-[#E51636]" : "bg-transparent group-hover:bg-[#004F71]"
      )} />

      {/* MOBILE COMPACT VIEW */}
      {isMobile ? (
          <div className="flex items-center gap-2">
              <div className={cn("w-7 h-7 rounded-lg flex items-center justify-center text-[8px] font-black text-white shadow-sm shrink-0", leader?.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>
                  {leader?.name.charAt(0) || "L"}
              </div>
              <div className="flex flex-col min-w-0">
                  <span className="text-[9px] font-bold text-slate-800 truncate leading-tight">{event.title}</span>
                  <span className="text-[7px] font-bold text-slate-400 uppercase tracking-tight truncate">{participant?.name || "Team"}</span>
              </div>
          </div>
      ) : (
          /* DESKTOP FULL VIEW */
          <>
            <div className="flex items-center gap-3 mb-1.5 min-w-0">
                <div className={cn("w-1.5 h-1.5 rounded-full shadow-[0_0_8px_current] shrink-0", 
                event.status === "Done" ? "bg-emerald-500 text-emerald-500" : 
                event.priority === "High" ? "bg-red-500 text-red-500" : "bg-blue-500 text-blue-500"
                )} />
                <span className="text-xs font-black text-slate-700 truncate tracking-tight">{event.title}</span>
            </div>

            <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                    <div className="flex items-center gap-1.5 text-[9px] font-bold text-slate-400 bg-slate-50 px-2 py-1 rounded-md border border-slate-100">
                        <Clock className="w-3 h-3" />
                        <span>{format(event.startDate, "MMM d")}</span>
                    </div>
                    {event.stickers && event.stickers.length > 0 && (
                        <div className="flex items-center gap-1">
                            {event.stickers.map(stickerId => {
                                const sticker = STICKERS.find(s => s.id === stickerId);
                                if (!sticker) return null;
                                return (
                                    <div key={sticker.id} className={cn("w-5 h-5 rounded-full flex items-center justify-center text-[10px] shadow-sm border", sticker.color)}>
                                        {sticker.icon}
                                    </div>
                                );
                            })}
                        </div>
                    )}
                </div>

                <div className="flex items-center -space-x-2">
                    <div className={cn("w-6 h-6 rounded-lg flex items-center justify-center text-[8px] font-black text-white shadow-sm ring-2 ring-white z-10", leader?.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>
                        {leader?.name.charAt(0) || "L"}
                    </div>
                    {participant ? (
                        <div className={cn("w-6 h-6 rounded-lg flex items-center justify-center text-[8px] font-black text-white shadow-sm ring-2 ring-white", participant.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>
                            {participant.name.charAt(0)}
                        </div>
                    ) : (
                        <div className="w-6 h-6 rounded-lg bg-slate-50 border border-dashed border-slate-300 flex items-center justify-center ring-2 ring-white">
                            <User className="w-3 h-3 text-slate-300" />
                        </div>
                    )}
                </div>
            </div>
          </>
      )}
    </div>
  );
};
--- FILE: ./app/(main)/calendar/_components/EventDetailSheet.tsx ---
"use client";

import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { 
  X, Calendar, Clock, User, Shield, Target, Zap, Activity, 
  MessageSquare, Trash2, CheckCircle2, AlertCircle, 
  Terminal, Sparkles, Fingerprint, Crown, ArrowRight, Save,
  Quote, ShieldAlert, AlertTriangle, Info, Sticker
} from "lucide-react";
import { format } from "date-fns";
import { cn } from "@/lib/utils";
import { CalendarEvent, getEventLabel, getTypeColor, STICKERS, StickerType } from "./types";
import { useAppStore } from "@/lib/store/useStore";
import { Badge } from "../../team/_components/Badge";

interface Props {
  event: CalendarEvent;
  onClose: () => void;
  onUpdate: (id: string, updates: any) => void;
  onDelete: (id: string) => void;
}

const TRANSITION_SPRING = { type: "spring" as const, damping: 30, stiffness: 300, mass: 0.8 };

// --- CLEAN TACTICAL CONFIRMATION MODAL ---
function ConfirmationModal({ isOpen, onClose, onConfirm, title, message }: any) {
    return (
        <AnimatePresence>
            {isOpen && (
                <div className="fixed inset-0 z-[200] flex items-center justify-center p-6">
                    <motion.div 
                        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                        className="absolute inset-0 bg-slate-950/60 backdrop-blur-md"
                        onClick={onClose}
                    />
                    <motion.div 
                        initial={{ scale: 0.95, opacity: 0, y: 20 }} animate={{ scale: 1, opacity: 1, y: 0 }} exit={{ scale: 0.95, opacity: 0, y: 20 }}
                        className="relative bg-white w-full max-w-sm rounded-[40px] shadow-2xl overflow-hidden border border-white/20 p-8 flex flex-col items-center text-center"
                    >
                        {/* --- TOP RIGHT CLOSE BUTTON --- */}
                        <button 
                            onClick={onClose} 
                            className="absolute top-5 right-5 p-2 text-slate-300 hover:text-slate-500 hover:bg-slate-50 rounded-full transition-all active:scale-90"
                        >
                            <X className="w-5 h-5" />
                        </button>

                        <div className="w-16 h-16 rounded-3xl bg-red-50 flex items-center justify-center mb-6 relative shadow-inner">
                            <ShieldAlert className="w-8 h-8 text-[#E51636]" />
                        </div>

                        <div className="space-y-3 mb-8">
                            <span className="text-[10px] font-black text-red-400 uppercase tracking-[0.3em]">Critical Action</span>
                            <h3 className="text-2xl font-black text-slate-900 tracking-tight leading-none">{title}</h3>
                            <p className="text-xs font-medium text-slate-500 leading-relaxed px-2">
                                {message}
                            </p>
                        </div>

                        <div className="w-full space-y-3">
                            <button 
                                onClick={onConfirm}
                                className="w-full py-4 bg-[#E51636] text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-red-500/20 hover:scale-[1.02] active:scale-95 transition-all"
                            >
                                Confirm Decommission
                            </button>
                            <button 
                                onClick={onClose}
                                className="w-full py-4 bg-slate-50 text-slate-500 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-slate-100 transition-all active:scale-95"
                            >
                                Abort Protocol
                            </button>
                        </div>
                    </motion.div>
                </div>
            )}
        </AnimatePresence>
    );
}

export default function EventDetailSheet({ event, onClose, onUpdate, onDelete }: Props) {
  const { team } = useAppStore();
  const [isConfirmOpen, setIsConfirmOpen] = useState(false);

  // Resolve Identities
  const leader = team.find(m => m.id === event.assignee);
  const participant = team.find(m => m.id === event.teamMemberId);

  const brandBg = event.type === 'Deadline' ? 'bg-[#E51636]' : 'bg-[#004F71]';

  // Toggle Sticker Handler
  const toggleSticker = (stickerId: StickerType) => {
      const currentStickers = event.stickers || [];
      const newStickers = currentStickers.includes(stickerId)
          ? currentStickers.filter(id => id !== stickerId)
          : [...currentStickers, stickerId];
      
      onUpdate(event.id, { stickers: newStickers });
  };

  return (
    <>
      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-sm" onClick={onClose} />
      
      <motion.div 
        initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} 
        transition={TRANSITION_SPRING} 
        className="fixed inset-x-0 bottom-0 top-12 md:top-0 md:left-auto md:right-0 md:w-full md:max-w-2xl z-[110] bg-white shadow-2xl flex flex-col overflow-hidden rounded-t-[40px] md:rounded-l-[56px] md:rounded-tr-none md:h-full md:border-l border-white/20"
      >
        {/* --- HEADER --- */}
        <div className={cn("p-8 md:p-12 text-white relative shrink-0 overflow-hidden", brandBg)}>
            {/* Background Texture */}
            <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#fff_1px,transparent_1px)] [background-size:20px_20px]" />
            <div className="absolute -top-10 -right-10 w-64 h-64 bg-white/10 rounded-full blur-3xl pointer-events-none" />
            <Terminal className="absolute top-6 right-6 w-32 h-32 opacity-5 rotate-12 pointer-events-none" />
            
            <div className="relative z-10 space-y-6">
                <div className="flex items-center justify-between">
                    <div className="px-3 py-1.5 bg-white/10 rounded-full border border-white/20 backdrop-blur-md flex items-center gap-2">
                        <div className="w-1.5 h-1.5 rounded-full bg-white animate-pulse" />
                        <span className="text-[9px] font-black uppercase tracking-[0.3em]">Mission Brief</span>
                    </div>
                    <button onClick={onClose} className="p-2 bg-white/10 hover:bg-white/20 rounded-full transition-all active:scale-90 border border-white/10">
                        <X className="w-5 h-5" />
                    </button>
                </div>
                
                <div className="space-y-3">
                    <h2 className="text-3xl md:text-5xl font-[1000] tracking-tighter leading-tight">{event.title}</h2>
                    <div className="flex flex-wrap items-center gap-3">
                        <div className="px-3 py-1 bg-white text-slate-900 rounded-lg text-[10px] font-black uppercase tracking-widest shadow-sm">
                            {getEventLabel(event.type)}
                        </div>
                        <div className="flex items-center gap-2 text-white/80 text-[10px] font-bold uppercase tracking-widest bg-black/20 px-3 py-1 rounded-lg border border-white/10">
                            <Clock className="w-3.5 h-3.5" /> 
                            {format(event.startDate, "MMM do")}
                            {event.endDate && !Object.is(event.startDate, event.endDate) && `  ${format(event.endDate, "d")}`}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {/* --- CONTENT --- */}
        <div className="flex-1 overflow-y-auto custom-scrollbar p-6 md:p-10 space-y-8 md:space-y-12 bg-white relative">
            
            {/* Personnel Grid */}
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                <div className="p-5 bg-slate-50 rounded-[28px] border border-slate-100 shadow-sm flex items-center gap-4 relative overflow-hidden group">
                    <div className={cn("w-12 h-12 rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-lg relative z-10", leader?.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>
                        {leader?.name.charAt(0) || "L"}
                    </div>
                    <div className="relative z-10">
                        <p className="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-0.5">Mission Lead</p>
                        <p className="text-sm font-bold text-slate-900">{event.assigneeName}</p>
                    </div>
                    <div className="absolute right-0 top-0 bottom-0 w-16 bg-gradient-to-l from-white/50 to-transparent pointer-events-none" />
                </div>

                <div className="p-5 bg-slate-50 rounded-[28px] border border-slate-100 shadow-sm flex items-center gap-4 relative overflow-hidden group">
                    <div className={cn("w-12 h-12 rounded-2xl flex items-center justify-center text-white font-black text-lg shadow-lg relative z-10", participant ? (participant.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]') : 'bg-slate-300')}>
                        {event.teamMemberName?.charAt(0) || '?'}
                    </div>
                    <div className="relative z-10">
                        <p className="text-[9px] font-black text-slate-400 uppercase tracking-widest mb-0.5">Participant</p>
                        <p className="text-sm font-bold text-slate-900">{event.teamMemberName || "Unassigned"}</p>
                    </div>
                </div>
            </div>

            {/* Sticker Rack */}
            <div className="space-y-3">
                <span className="text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-2">
                    <Sticker className="w-3.5 h-3.5" /> Tactical Markers
                </span>
                <div className="flex gap-3 overflow-x-auto no-scrollbar pb-2">
                    {STICKERS.map(sticker => {
                        const isActive = event.stickers?.includes(sticker.id);
                        return (
                            <button
                                key={sticker.id}
                                onClick={() => toggleSticker(sticker.id)}
                                className={cn(
                                    "flex flex-col items-center justify-center gap-1 min-w-[64px] h-16 rounded-2xl transition-all border-2 active:scale-95",
                                    isActive ? "bg-white border-[#E51636] shadow-md scale-105" : "bg-slate-50 border-transparent opacity-50 grayscale hover:grayscale-0 hover:opacity-100"
                                )}
                            >
                                <span className="text-xl drop-shadow-sm">{sticker.icon}</span>
                                <span className="text-[7px] font-black uppercase text-slate-500">{sticker.label}</span>
                            </button>
                        )
                    })}
                </div>
            </div>

            {/* Operational Intel */}
            <div className="space-y-3">
                <span className="text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-2">
                    <MessageSquare className="w-3.5 h-3.5" /> Operational Intel
                </span>
                <div className="p-6 md:p-8 bg-slate-50/50 border border-slate-200 rounded-[32px] relative overflow-hidden group">
                    <Quote className="absolute top-4 right-4 w-10 h-10 text-slate-200 rotate-12" />
                    <p className="text-sm md:text-base font-medium text-slate-600 leading-relaxed italic relative z-10 whitespace-pre-wrap">
                        {event.description || "No specific operational context provided."}
                    </p>
                </div>
            </div>

            {/* Impact Analysis Grid */}
            <div className="grid grid-cols-3 gap-3">
                <div className="p-4 bg-white border border-slate-100 rounded-2xl flex flex-col items-center gap-2 shadow-sm text-center">
                    <span className="text-[8px] font-black text-slate-300 uppercase">Priority</span>
                    <Badge color={event.priority === 'High' ? 'red' : 'blue'}>{event.priority}</Badge>
                </div>
                <div className="p-4 bg-white border border-slate-100 rounded-2xl flex flex-col items-center gap-2 shadow-sm text-center">
                    <span className="text-[8px] font-black text-slate-300 uppercase">Status</span>
                    <Badge color={event.status === 'Done' ? 'green' : 'slate'}>{event.status}</Badge>
                </div>
                <div className="p-4 bg-white border border-slate-100 rounded-2xl flex flex-col items-center gap-2 shadow-sm text-center">
                    <span className="text-[8px] font-black text-slate-300 uppercase">Sync</span>
                    <div className="flex items-center gap-1.5 px-2 py-1 bg-emerald-50 text-emerald-600 rounded-md">
                        <div className="h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse" />
                        <span className="text-[9px] font-black uppercase">Live</span>
                    </div>
                </div>
            </div>
        </div>

        {/* --- FOOTER ACTIONS --- */}
        <div className="p-6 md:p-10 border-t border-slate-100 bg-white flex items-center justify-between gap-4 shrink-0 pb-10 md:pb-10">
             <button 
                onClick={() => setIsConfirmOpen(true)}
                className="flex items-center gap-2 px-4 py-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all active:scale-95"
             >
                <Trash2 className="w-5 h-5" />
                <span className="text-[10px] font-black uppercase tracking-widest hidden md:inline">Decommission</span>
             </button>

             {event.status !== 'Done' && (
                <button 
                    onClick={() => onUpdate(event.id, { status: "Done" })}
                    className="flex-1 md:flex-none flex items-center justify-center gap-3 px-8 py-4 bg-[#004F71] text-white rounded-[20px] font-black uppercase text-[10px] tracking-widest shadow-xl shadow-blue-900/20 hover:scale-[1.02] active:scale-95 transition-all"
                >
                    <CheckCircle2 className="w-4 h-4" /> <span>Complete Mission</span>
                </button>
             )}
        </div>

        {/* --- RENDER CONFIRMATION --- */}
        <ConfirmationModal 
            isOpen={isConfirmOpen}
            onClose={() => setIsConfirmOpen(false)}
            onConfirm={() => { setIsConfirmOpen(false); onDelete(event.id); }}
            title="Terminate Mission"
            message="Confirm permanent decommissioning. This record will be erased from all logs."
        />
      </motion.div>
    </>
  );
}
--- FILE: ./app/(main)/calendar/_components/OneOnOneView.tsx ---
"use client";

import { useMemo, useState } from "react";
import { format, isFuture, isPast } from "date-fns";
import { motion, AnimatePresence } from "framer-motion";
import { CalendarEvent } from "./types";
import { useAppStore } from "@/lib/store/useStore";
import { 
  ChevronRight, Clock, CalendarDays, Archive, 
  MessageSquare, User, Sparkles
} from "lucide-react";
import OneOnOneSessionModal from "./OneOnOneSessionModal";

interface Props {
  events: CalendarEvent[];
  onSelectEvent: (event: CalendarEvent | null) => void;
  onUpdateEvent?: (updatedEvent: CalendarEvent) => void; 
  selectedUserId?: string | null; 
}

export default function OneOnOneView({ events: initialEvents, onSelectEvent, onUpdateEvent, selectedUserId }: Props) {
  const { team } = useAppStore();
  const [activeSession, setActiveSession] = useState<CalendarEvent | null>(null);

  const filteredEvents = useMemo(() => {
    let list = initialEvents.filter(e => e.type === "OneOnOne");
    if (selectedUserId) {
        list = list.filter(e => e.assignee === selectedUserId || e.teamMemberId === selectedUserId);
    }
    return list;
  }, [initialEvents, selectedUserId]);

  const { upcoming, historyGroups } = useMemo(() => {
    const upcoming = filteredEvents
        .filter(e => e.status !== "Done" && isFuture(e.startDate))
        .sort((a, b) => a.startDate.getTime() - b.startDate.getTime());

    const history = filteredEvents
        .filter(e => e.status === "Done" || isPast(e.startDate))
        .sort((a, b) => b.startDate.getTime() - a.startDate.getTime());

    const groupsMap = new Map<string, CalendarEvent[]>();
    history.forEach((event) => {
        const key = format(event.startDate, "MMMM yyyy");
        if (!groupsMap.has(key)) groupsMap.set(key, []);
        groupsMap.get(key)!.push(event);
    });

    const historyGroups = Array.from(groupsMap.entries()).map(([label, events]) => ({ label, events }));

    return { upcoming, historyGroups };
  }, [filteredEvents]);

  const handleUpdate = (updatedEvent: CalendarEvent) => {
      if (onUpdateEvent) onUpdateEvent(updatedEvent);
      setActiveSession(null);
  };

  return (
    <div className="h-full bg-[#F8FAFC] overflow-y-auto custom-scrollbar p-6 md:p-12 relative pb-32">
        <div className="max-w-5xl mx-auto space-y-10 md:space-y-16">
            
            {/* HERO HEADER */}
             <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}>
                <div className="flex items-center gap-3 mb-4">
                    <div className="p-2 bg-[#E51636]/10 text-[#E51636] rounded-xl border border-[#E51636]/20">
                        <Sparkles className="w-5 h-5" />
                    </div>
                    <span className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400">Development Pipeline</span>
                </div>
                <h1 className="text-4xl md:text-6xl font-black text-slate-900 tracking-tighter leading-none mb-3 md:mb-4">
                    {selectedUserId ? team.find(u => u.id === selectedUserId)?.name : "Talent Overview"}
                </h1>
                <p className="text-slate-500 font-medium max-w-2xl text-base md:text-lg leading-relaxed">
                    {selectedUserId 
                        ? `Viewing performance history and growth path for ${team.find(u => u.id === selectedUserId)?.role}.`
                        : "Monitor system-wide leadership sessions, coaching notes, and tactical growth progress."}
                </p>
            </motion.div>

            {/* --- UPCOMING SECTION --- */}
            <section className="space-y-6 md:space-y-8">
                <div className="flex items-center gap-4">
                    <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 shrink-0">
                        <CalendarDays className="w-4 h-4 text-[#E51636]" /> Scheduled Sessions
                    </h3>
                    <div className="h-px flex-1 bg-slate-100" />
                </div>

                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                    {upcoming.length > 0 ? upcoming.map(event => {
                        const eventUser = team.find(u => u.id === event.assignee);
                        return (
                            <motion.div 
                                key={event.id}
                                layoutId={event.id}
                                onClick={() => setActiveSession(event)}
                                className="group bg-white p-5 md:p-6 rounded-[28px] md:rounded-[32px] border border-slate-200 shadow-sm hover:shadow-xl hover:border-red-100 transition-all cursor-pointer relative overflow-hidden active:scale-[0.98]"
                            >
                                <div className="absolute top-0 right-0 p-6 opacity-[0.03] group-hover:rotate-12 transition-transform">
                                    <Clock className="w-20 h-20" />
                                </div>
                                <div className="flex justify-between items-start mb-6">
                                    <div className="flex items-center gap-3">
                                        {eventUser ? (
                                            <img src={eventUser.image} className="w-12 h-12 rounded-2xl object-cover shadow-sm ring-2 ring-slate-50" />
                                        ) : (
                                            <div className="w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center"><User className="w-6 h-6 text-slate-300" /></div>
                                        )}
                                        <div>
                                            <p className="text-base font-black text-slate-900 leading-tight mb-1">{event.title}</p>
                                            <p className="text-[10px] font-bold text-slate-400 uppercase tracking-wide">{eventUser?.name || "Unassigned"}</p>
                                        </div>
                                    </div>
                                </div>
                                <div className="pt-4 border-t border-slate-50 flex items-center justify-between">
                                    <span className="text-[10px] font-black text-slate-400 uppercase flex items-center gap-1.5"><Clock className="w-3.5 h-3.5" /> {format(event.startDate, "MMM do @ h:mm a")}</span>
                                    <span className="text-[10px] font-black text-[#E51636] uppercase tracking-widest md:opacity-0 md:group-hover:opacity-100 transition-opacity flex items-center gap-1">Begin <ChevronRight className="w-3 h-3" /></span>
                                </div>
                            </motion.div>
                        );
                    }) : (
                        <div className="col-span-full py-16 bg-white rounded-[32px] border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400">
                            <Clock className="w-10 h-10 mb-4 opacity-20" />
                            <p className="text-sm font-bold uppercase tracking-widest">No sessions scheduled</p>
                        </div>
                    )}
                </div>
            </section>

            {/* --- HISTORY ARCHIVE --- */}
            <section className="space-y-6 md:space-y-8">
                <div className="flex items-center gap-4">
                    <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 shrink-0">
                        <Archive className="w-4 h-4 text-[#004F71]" /> Past Performance Archive
                    </h3>
                    <div className="h-px flex-1 bg-slate-100" />
                </div>

                <div className="space-y-8 md:space-y-12">
                    {historyGroups.map(group => (
                        <div key={group.label} className="space-y-4">
                            <h4 className="text-[11px] font-black text-slate-900 uppercase tracking-[0.2em] px-2">{group.label}</h4>
                            <div className="bg-white rounded-[32px] border border-slate-200 overflow-hidden divide-y divide-slate-100 shadow-sm">
                                {group.events.map(event => (
                                    <div 
                                        key={event.id} 
                                        onClick={() => setActiveSession(event)}
                                        className="p-5 md:p-6 flex items-center justify-between hover:bg-slate-50 transition-colors cursor-pointer group active:bg-slate-100"
                                    >
                                        <div className="flex items-center gap-4 md:gap-6">
                                            <div className="w-10 h-10 md:w-12 md:h-12 rounded-2xl bg-slate-100 flex flex-col items-center justify-center text-slate-400 group-hover:bg-[#004F71] group-hover:text-white transition-all shrink-0">
                                                <span className="text-[8px] md:text-[9px] font-black uppercase leading-none mb-1">{format(event.startDate, "MMM")}</span>
                                                <span className="text-base md:text-lg font-black leading-none">{format(event.startDate, "d")}</span>
                                            </div>
                                            <div className="min-w-0">
                                                <h5 className="text-sm md:text-base font-bold text-slate-900 group-hover:text-[#004F71] transition-colors truncate pr-4">{event.title}</h5>
                                                <div className="flex items-center gap-3 mt-1">
                                                    <span className="text-[10px] font-bold text-slate-400 uppercase flex items-center gap-1 truncate"><User className="w-3 h-3" /> {event.assigneeName}</span>
                                                    {event.description && <span className="text-[10px] font-bold text-emerald-500 uppercase flex items-center gap-1 hidden md:flex"><MessageSquare className="w-3 h-3" /> Notes Saved</span>}
                                                </div>
                                            </div>
                                        </div>
                                        <div className="flex items-center gap-2 md:gap-4 shrink-0">
                                            {event.status === "Done" && <span className="px-2 py-1 md:px-3 md:py-1 rounded-full bg-emerald-50 text-emerald-600 text-[8px] md:text-[9px] font-black uppercase tracking-widest border border-emerald-100">Done</span>}
                                            <ChevronRight className="w-4 h-4 md:w-5 md:h-5 text-slate-200 group-hover:text-[#004F71] transition-all" />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    ))}
                </div>
            </section>
        </div>

        {/* --- REUSABLE SESSION COMPLETION MODAL --- */}
        <AnimatePresence>
            {activeSession && (
                <OneOnOneSessionModal 
                    event={activeSession} 
                    onClose={() => setActiveSession(null)} 
                    onUpdate={handleUpdate} 
                />
            )}
        </AnimatePresence>
    </div>
  );
}
--- FILE: ./app/(main)/calendar/_components/TimelineEventCard.tsx ---
"use client";

import { useRef, memo } from "react"; 
import { motion } from "framer-motion";
import { CalendarEvent, STICKERS } from "./types";
import { cn } from "@/lib/utils";
import { differenceInCalendarDays, isValid, format, isSameDay, isSameMonth, max, min } from "date-fns";
import { Link2, Clock, Calendar as CalendarIcon, ChevronLeft, ChevronRight } from "lucide-react";
import { useAppStore } from "@/lib/store/useStore";

interface Props {
  event: CalendarEvent;
  timelineStart: Date;
  timelineEnd: Date; // Added prop
  dayWidth: number;
  isStamping: boolean;
  isLinking: boolean;
  isSource?: boolean;
  isTarget?: boolean;
  onDragEnd: (id: string, daysMoved: number) => void;
  onClick: () => void;
  onDragStart?: () => void;
  onDragComplete?: () => void;
}

const TerminalNode = ({ type }: { type: 'input' | 'output' }) => (
  <div className={cn(
    "absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-[2px] border-white shadow-md z-30 flex items-center justify-center bg-[#004F71]",
    type === 'input' ? "-left-1.5" : "-right-1.5" 
  )} />
);

const TimelineEventCard = ({
  event, timelineStart, timelineEnd, dayWidth, isStamping, isLinking, isSource, isTarget, onDragEnd, onClick, onDragStart, onDragComplete
}: Props) => {
  const { team } = useAppStore();
  const isDraggingRef = useRef(false);

  if (!isValid(event.startDate) || !isValid(event.endDate) || !isValid(timelineStart)) return null;

  // --- VISUAL CLAMPING LOGIC ---
  // Ensure we only render what is inside the visible window
  const visualStart = max([event.startDate, timelineStart]);
  // We allow the end to extend beyond view so scrolling works naturally, 
  // but we track if it continues for styling.
  const isContinuesLeft = event.startDate < timelineStart;
  const isContinuesRight = event.endDate > timelineEnd;

  // Calculate position relative to the START of the board
  const startDiff = differenceInCalendarDays(visualStart, timelineStart);
  const duration = differenceInCalendarDays(event.endDate, visualStart) + 1;
  
  const leftPos = (startDiff * dayWidth);
  const width = Math.max(duration * dayWidth - 8, dayWidth - 8); 
  
  const isCompact = width < 60;
  
  const leader = team.find(u => u.id === event.assignee);
  const participant = team.find(u => u.id === event.teamMemberId);
  const isMultiDay = !isSameDay(event.startDate, event.endDate);

  let dateLabel = format(event.startDate, "h:mm a");
  if (isMultiDay) {
      dateLabel = isSameMonth(event.startDate, event.endDate) 
        ? `${format(event.startDate, "MMM d")} - ${format(event.endDate, "d")}`
        : `${format(event.startDate, "MMM d")} - ${format(event.endDate, "MMM d")}`;
  }

  const getStyles = (type: string) => {
    switch (type) {
      case "Training": return { bar: "bg-[#004F71]", bg: "bg-white", text: "text-[#004F71]" };
      case "Goal": return { bar: "bg-emerald-500", bg: "bg-white", text: "text-emerald-700" };
      case "Deadline": return { bar: "bg-[#E51636]", bg: "bg-white", text: "text-[#E51636]" };
      case "OneOnOne": return { bar: "bg-purple-600", bg: "bg-white", text: "text-purple-700" };
      default: return { bar: "bg-slate-500", bg: "bg-white", text: "text-slate-600" };
    }
  };
  const styles = getStyles(event.type);

  return (
    <motion.div
      className="absolute top-2 h-[40px] md:h-[44px] z-20 group/card" 
      style={{ left: leftPos, width: width }}
    >
      <motion.div
        drag={!isLinking && !isStamping ? "x" : false}
        dragMomentum={false}
        dragSnapToOrigin={true}
        onDragStart={() => { isDraggingRef.current = true; if (onDragStart) onDragStart(); }}
        onDragEnd={(_, info) => {
          if (onDragComplete) onDragComplete(); 
          const movedSlots = Math.round(info.offset.x / dayWidth);
          if (movedSlots !== 0) onDragEnd(event.id, movedSlots);
          setTimeout(() => { isDraggingRef.current = false; }, 150);
        }}
        onClick={(e) => { e.stopPropagation(); if (isDraggingRef.current) return; onClick(); }}
        whileHover={{ y: -1, scale: 1.01, zIndex: 100 }}
        whileDrag={{ scale: 1.05, opacity: 0.95, cursor: "grabbing", zIndex: 100 }}
        className={cn(
            "w-full h-full border overflow-hidden transition-all relative select-none shadow-[0_2px_4px_rgba(0,0,0,0.03)]",
            styles.bg,
            isLinking ? "cursor-alias border-dashed border-[#004F71]" : "cursor-grab border-slate-200/80",
            (isSource || isTarget) && "border-[#004F71]/30 shadow-md ring-2 ring-[#004F71]/5",
            isStamping && "cursor-crosshair opacity-80",
            isCompact ? "p-1" : "px-2 md:px-3 flex flex-col justify-center",
            isContinuesLeft ? "rounded-l-none border-l-0" : "rounded-l-[10px]",
            isContinuesRight ? "rounded-r-none border-r-0" : "rounded-r-[10px]"
        )}
      >
        {isTarget && <TerminalNode type="input" />}
        {isSource && <TerminalNode type="output" />}

        {!isContinuesLeft && <div className={cn("absolute left-0 top-0 bottom-0 w-1", styles.bar)} />}
        {!isContinuesRight && <div className={cn("absolute right-0 top-0 bottom-0 w-1", styles.bar)} />}
        
        {isContinuesLeft && <div className="absolute left-0 top-0 bottom-0 w-4 bg-gradient-to-r from-slate-100 to-transparent z-10 flex items-center justify-start pl-0.5"><ChevronLeft className="w-3 h-3 text-slate-400" /></div>}
        {isContinuesRight && <div className="absolute right-0 top-0 bottom-0 w-4 bg-gradient-to-l from-slate-100 to-transparent z-10 flex items-center justify-end pr-0.5"><ChevronRight className="w-3 h-3 text-slate-400" /></div>}

        {isCompact ? (
            <div className="flex flex-col justify-center h-full w-full pl-1.5 overflow-hidden">
                <span className={cn("text-[8px] font-black truncate leading-tight", styles.text)}>{event.title}</span>
            </div>
        ) : (
            <div className="flex items-center justify-between w-full relative z-20 gap-2 pl-1">
                <div className="flex-1 min-w-0 flex flex-col justify-center">
                    <div className="flex items-center gap-1.5">
                        {isSource && !isLinking && <Link2 className="w-2.5 h-2.5 text-slate-400" />}
                        <span className={cn("text-[9px] md:text-[10px] font-black truncate tracking-tight leading-tight", styles.text)}>{event.title}</span>
                        {event.stickers?.slice(0, 3).map(s => {
                            const st = STICKERS.find(x => x.id === s);
                            return st ? <div key={s} className="w-3.5 h-3.5 rounded-full flex items-center justify-center text-[7px] bg-white border border-slate-100 shadow-sm z-10 hidden md:flex">{st.icon}</div> : null;
                        })}
                    </div>
                    <div className="flex items-center gap-1.5 mt-0.5 opacity-60">
                        {isMultiDay ? <CalendarIcon className="w-2 h-2" /> : <Clock className="w-2 h-2" />}
                        <span className="text-[7px] md:text-[8px] font-bold text-slate-500">{dateLabel}</span>
                    </div>
                </div>
                <div className="flex items-center -space-x-1.5 shrink-0 pl-1">
                      <div className={cn("w-4 h-4 md:w-5 md:h-5 rounded-md flex items-center justify-center text-[6px] md:text-[7px] font-black text-white shadow-sm ring-1 ring-white z-10", leader?.dept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]")}>{leader?.name.charAt(0) || '?'}</div>
                      {participant && <div className={cn("w-4 h-4 md:w-5 md:h-5 rounded-md flex items-center justify-center text-[6px] md:text-[7px] font-black text-white shadow-sm ring-1 ring-white", participant.dept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]")}>{participant.name.charAt(0)}</div>}
                </div>
            </div>
        )}
      </motion.div>
    </motion.div>
  );
};

export default memo(TimelineEventCard);
--- FILE: ./app/(main)/calendar/_components/DraggableEventCard.tsx ---
"use client";

import { useRef, memo, useState } from "react";
import { motion, PanInfo, AnimatePresence } from "framer-motion";
import { CalendarEvent, TeamMember, STICKERS } from "./types";
import { cn } from "@/lib/utils";
import { GripVertical, Flag, Clock, Calendar as CalendarIcon, Users } from "lucide-react";
import { useAppStore } from "@/lib/store/useStore";
import { differenceInCalendarDays, parse, format, isSameDay, isSameMonth } from "date-fns";

interface Props {
  event: CalendarEvent;
  col: number;
  span: number;
  slot: number;
  segmentDate: Date; 
  continuesBefore: boolean;
  continuesAfter: boolean;
  isDragging: boolean;
  isStamping: boolean; 
  onDragEnd: (id: string, daysMoved: number) => void;
  onClick: (event: CalendarEvent) => void;
}

const DraggableEventCard = ({
  event, col, span, slot, segmentDate, continuesBefore, continuesAfter,
  isStamping, onDragEnd, onClick
}: Props) => {
  
  const cardRef = useRef<HTMLDivElement>(null);
  const wasDragged = useRef(false);
  const { team } = useAppStore();
  const [isLocalDragging, setIsLocalDragging] = useState(false);

  if (span <= 0) return null;

  // --- RESOLVE PERSONNEL ---
  const leader = team.find((u: TeamMember) => u.id === event.assignee);
  const participant = team.find((u: TeamMember) => u.id === event.teamMemberId);

  const handleDragStart = () => {
    setIsLocalDragging(true);
    wasDragged.current = false;
  };

  const handleDragUpdate = () => {
    wasDragged.current = true;
  };

  const handleDragEnd = (e: any, info: PanInfo) => {
    if (isStamping) {
        setIsLocalDragging(false);
        return;
    }

    const clientX = e.clientX || e.changedTouches?.[0]?.clientX;
    const clientY = e.clientY || e.changedTouches?.[0]?.clientY;

    if (clientX && clientY) {
      if (cardRef.current) cardRef.current.style.visibility = "hidden";
      const elementsBelow = document.elementsFromPoint(clientX, clientY);
      if (cardRef.current) cardRef.current.style.visibility = "visible";

      const dateCell = elementsBelow.find(el => el.hasAttribute("data-date"));
      
      if (dateCell) {
        const dateStr = dateCell.getAttribute("data-date");
        if (dateStr) {
          const targetDate = parse(dateStr, "yyyy-MM-dd", new Date());
          const daysDiff = differenceInCalendarDays(targetDate, segmentDate);
          if (daysDiff !== 0) onDragEnd(event.id, daysDiff);
        }
      }
    }

    setTimeout(() => {
        setIsLocalDragging(false);
    }, 10);
  };

  const getStyles = (type: string) => {
    switch (type) {
      case "Training": return { bar: "bg-[#004F71]", bg: "bg-white" };
      case "Goal": return { bar: "bg-emerald-500", bg: "bg-white" };
      case "Deadline": return { bar: "bg-[#E51636]", bg: "bg-white" };
      case "OneOnOne": return { bar: "bg-purple-600", bg: "bg-white" };
      default: return { bar: "bg-slate-500", bg: "bg-white" };
    }
  };
  
  const styles = getStyles(event.type);
  const isMultiDay = !isSameDay(event.startDate, event.endDate);

  // FORMAT DATE STRING LOGIC
  let dateLabel = format(event.startDate, "h:mm a");
  
  if (isMultiDay) {
      const sameMonth = isSameMonth(event.startDate, event.endDate);
      if (sameMonth) {
          dateLabel = `${format(event.startDate, "MMM d")} - ${format(event.endDate, "d")}`;
      } else {
          dateLabel = `${format(event.startDate, "MMM d")} - ${format(event.endDate, "MMM d")}`;
      }
  }

  return (
    <motion.div 
      layout
      data-event-id={event.id}
      style={{ 
        gridColumnStart: col, 
        gridColumnEnd: `span ${span}`, 
        top: slot * 40, 
        left: 0, 
        right: 0,
        zIndex: isLocalDragging ? 1000 : 20,
        willChange: "transform, opacity",
      }}
      className="absolute h-[36px] mb-1 px-1 pointer-events-auto touch-none"
    >
      <motion.div
        ref={cardRef}
        drag={!isStamping} 
        dragMomentum={false} 
        dragElastic={0.01} 
        dragSnapToOrigin={true}
        onDragStart={handleDragStart}
        onDrag={handleDragUpdate}
        onDragEnd={handleDragEnd}
        onTap={() => { if (!wasDragged.current) onClick(event); }}
        
        whileHover={{ y: -1, scale: 1.01 }}
        whileDrag={{ 
            scale: 1.05, 
            opacity: 0.9,
            rotate: 1,
            boxShadow: "0 25px 50px -12px rgba(0,0,0,0.25)",
            cursor: "grabbing"
        }}
        
        className={cn(
          "h-full w-full flex flex-col justify-center px-2 border select-none overflow-hidden relative rounded-lg transition-colors duration-300",
          styles.bg,
          isLocalDragging ? "border-[#E51636]" : "border-slate-200/60 shadow-sm",
          continuesBefore ? "rounded-l-none border-l-0 pl-3" : "rounded-l-lg",
          continuesAfter ? "rounded-r-none border-r-0 pr-3" : "rounded-r-lg",
          isStamping ? "cursor-crosshair" : "cursor-grab"
        )}
      >
        {!continuesBefore && <div className={cn("absolute left-0 top-0 bottom-0 w-1 rounded-l-lg", styles.bar)} />}
        {!continuesAfter && <div className={cn("absolute right-0 top-0 bottom-0 w-1 rounded-r-lg", styles.bar)} />}
        
        <div className="flex items-center w-full h-full relative z-20">
            <div className="flex-1 min-w-0 mr-1.5 flex flex-col justify-center">
                <div className="flex items-center justify-between w-full">
                    <p className="truncate text-[10px] font-bold text-slate-800 leading-none tracking-tight flex items-center gap-1.5 flex-1 min-w-0">
                        {event.title}
                        {event.stickers && event.stickers.length > 0 && (
                            <span className="flex items-center gap-0.5 shrink-0">
                                {event.stickers.map(s => {
                                    const st = STICKERS.find(x => x.id === s);
                                    return st ? <span key={s} className="text-[8px]">{st.icon}</span> : null
                                })}
                            </span>
                        )}
                    </p>
                </div>
                
                {/* DATE DISPLAY - UPDATED LOGIC */}
                <div className="flex items-center gap-1 opacity-60 mt-0.5">
                    {isMultiDay ? <CalendarIcon className="w-2.5 h-2.5 shrink-0" /> : <Clock className="w-2.5 h-2.5 shrink-0" />}
                    <span className="text-[7px] font-black uppercase tracking-wider tabular-nums truncate">
                        {dateLabel}
                    </span>
                </div>
            </div>

            <div className="flex items-center gap-1.5 shrink-0">
                {!continuesAfter && (
                    <div className="flex items-center gap-1 bg-slate-50/80 px-1 py-0.5 rounded-md border border-slate-100">
                         {event.priority === "High" && (
                             <Flag className="w-2 h-2 text-[#E51636] fill-current" />
                         )}
                         
                         <div className="flex -space-x-1 ml-0.5">
                            <div className={cn(
                                "w-3.5 h-3.5 rounded flex items-center justify-center text-[6px] font-black text-white shadow-sm ring-1 ring-white", 
                                leader?.dept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]"
                            )}>
                                {leader?.name.charAt(0) || 'L'}
                            </div>

                            {participant && (
                                <div className={cn(
                                    "w-3.5 h-3.5 rounded flex items-center justify-center text-[6px] font-black text-white shadow-sm ring-1 ring-white transition-transform group-hover:translate-x-0.5", 
                                    participant?.dept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]"
                                )}>
                                    {participant.name.charAt(0)}
                                </div>
                            )}
                         </div>
                    </div>
                )}
            </div>
        </div>

        <AnimatePresence>
            {isLocalDragging && (
                <motion.div 
                    initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
                    className="absolute inset-0 bg-red-500/5 pointer-events-none" 
                />
            )}
        </AnimatePresence>
      </motion.div>
    </motion.div>
  );
};

export default memo(DraggableEventCard);
--- FILE: ./app/(main)/calendar/_components/ConflictResolutionModal.tsx ---
"use client";

import { motion } from "framer-motion";
import { CalendarEvent } from "./types";
import { format, addDays, differenceInCalendarDays } from "date-fns";
import { ArrowRight, ArrowLeftRight, CalendarClock, Scissors, AlertTriangle, X } from "lucide-react";
import { cn } from "@/lib/utils";

interface Props {
  source: CalendarEvent;
  target: CalendarEvent;
  onResolve: (action: 'push' | 'swap' | 'sever') => void;
  onClose: () => void;
}

export default function ConflictResolutionModal({ source, target, onResolve, onClose }: Props) {
  // INTELLIGENCE: Calculate the perfect "Safe Date" (Source End + 1 Day)
  const safeDate = addDays(source.endDate, 1);
  const shiftAmount = differenceInCalendarDays(safeDate, target.startDate);

  return (
    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
      <motion.div 
        initial={{ opacity: 0 }} 
        animate={{ opacity: 1 }} 
        exit={{ opacity: 0 }} 
        className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" 
        onClick={onClose}
      />
      
      <motion.div 
        initial={{ scale: 0.9, y: 20, opacity: 0 }} 
        animate={{ scale: 1, y: 0, opacity: 1 }} 
        exit={{ scale: 0.9, y: 20, opacity: 0 }}
        className="bg-white w-full max-w-lg rounded-[40px] shadow-2xl overflow-hidden border border-white/20 relative z-10"
      >
        {/* HEADER: Critical State */}
        <div className="bg-[#7f1d1d] p-8 pb-12 relative overflow-hidden">
            <div className="absolute top-0 right-0 p-6 opacity-10"><AlertTriangle className="w-32 h-32 text-white" /></div>
            <div className="relative z-10">
                <div className="flex items-center gap-3 mb-4">
                    <div className="px-3 py-1 bg-black/30 rounded-full border border-white/10 flex items-center gap-2 backdrop-blur-md">
                        <div className="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse" />
                        <span className="text-[9px] font-black uppercase tracking-[0.3em] text-white">Temporal Paradox Detected</span>
                    </div>
                </div>
                <h2 className="text-3xl font-black text-white tracking-tight leading-none mb-2">Resolve Conflict</h2>
                <p className="text-red-200 text-xs font-medium">
                    Mission <span className="font-bold text-white">"{target.title}"</span> attempts to start before <span className="font-bold text-white">"{source.title}"</span> concludes.
                </p>
            </div>
        </div>

        {/* BODY: The Solutions */}
        <div className="p-8 -mt-6 bg-white rounded-t-[40px] relative space-y-4">
            
            {/* OPTION 1: TIME WARP (Smart Reschedule) */}
            <button 
                onClick={() => onResolve('push')}
                className="w-full group p-5 rounded-[28px] border-2 border-slate-100 hover:border-[#004F71] bg-slate-50 hover:bg-blue-50/50 transition-all flex items-center gap-5 text-left relative overflow-hidden"
            >
                <div className="w-12 h-12 rounded-2xl bg-white shadow-sm flex items-center justify-center border border-slate-100 group-hover:scale-110 transition-transform">
                    <CalendarClock className="w-6 h-6 text-[#004F71]" />
                </div>
                <div className="flex-1 relative z-10">
                    <h4 className="text-sm font-black text-slate-900 uppercase tracking-wide mb-1">Time Shift (Recommended)</h4>
                    <p className="text-xs text-slate-500 font-medium">
                        Push <strong>{target.title}</strong> forward {shiftAmount} days to start on <strong>{format(safeDate, "MMM do")}</strong>.
                    </p>
                </div>
                <ArrowRight className="w-5 h-5 text-slate-300 group-hover:text-[#004F71] group-hover:translate-x-1 transition-all" />
            </button>

            {/* OPTION 2: REVERSE POLARITY */}
            <button 
                onClick={() => onResolve('swap')}
                className="w-full group p-5 rounded-[28px] border-2 border-slate-100 hover:border-amber-400 bg-white hover:bg-amber-50/50 transition-all flex items-center gap-5 text-left"
            >
                <div className="w-12 h-12 rounded-2xl bg-amber-100/50 flex items-center justify-center text-amber-600 group-hover:scale-110 transition-transform">
                    <ArrowLeftRight className="w-6 h-6" />
                </div>
                <div className="flex-1">
                    <h4 className="text-sm font-black text-slate-900 uppercase tracking-wide mb-1">Reverse Direction</h4>
                    <p className="text-xs text-slate-500 font-medium">
                        Make <strong>{target.title}</strong> the source (Parent) instead.
                    </p>
                </div>
            </button>

            {/* OPTION 3: SEVER */}
            <button 
                onClick={() => onResolve('sever')}
                className="w-full group p-4 rounded-[24px] border border-transparent hover:bg-red-50 text-slate-400 hover:text-red-600 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest mt-2"
            >
                <Scissors className="w-4 h-4" /> Sever Connection
            </button>

        </div>
      </motion.div>
    </div>
  );
}
--- FILE: ./app/(main)/calendar/page.tsx ---
"use client";

import { useState, useCallback, useEffect, useMemo } from "react";
import { format, addDays, differenceInCalendarDays } from "date-fns";
import { AnimatePresence, motion } from "framer-motion";
import { 
  Plus, Search, Loader2, Calendar as CalendarIcon, 
  RotateCcw, ChevronDown, Layers, ShieldCheck, UserCheck, 
  Sticker, Check, Flag, Zap, X, Coffee, Flame, Server,
  Filter, SlidersHorizontal, LayoutGrid, ListEnd, MessageSquare,
  ChevronLeft, ChevronRight, PanelLeftClose, PanelLeftOpen,
  Target, Shield, Activity, Info
} from "lucide-react";
import { cn } from "@/lib/utils";

// Firebase & Store
import { db } from "@/lib/firebase";
import { collection, addDoc, updateDoc, doc, deleteDoc, serverTimestamp, arrayUnion } from "firebase/firestore";
import { useAppStore } from "@/lib/store/useStore";
import toast from "react-hot-toast";

// Types & Components
import { 
  CalendarEvent, EventType, EVENT_TYPES, PRIORITIES, Priority, 
  getEventLabel, DraftEvent, Department, Status, STAGES, STICKERS, StickerType
} from "./_components/types";
import CalendarGrid from "./_components/CalendarGrid";
import TimelineBoard from "./_components/TimelineBoard";
import OneOnOneView from "./_components/OneOnOneView";
import AdvancedCreateModal from "./_components/AdvancedCreateModal";
import EventDetailSheet from "./_components/EventDetailSheet";
import ClientPortal from "@/components/core/ClientPortal";

// --- SIDEBAR ACCORDION ---
function SidebarAccordion({ id, title, icon: Icon, isOpen, onToggle, children, activeCount, totalCount }: any) {
    const isFiltered = activeCount < totalCount;
    return (
        <div className={cn(
            "border-b border-slate-100/60 transition-all duration-500",
            isOpen ? "bg-slate-50/40" : "bg-transparent"
        )}>
            <button 
                onClick={() => onToggle(isOpen ? null : id)}
                className="w-full py-5 px-8 flex items-center justify-between group outline-none"
            >
                <div className="flex items-center gap-4">
                    <div className={cn(
                        "p-2 rounded-xl transition-all duration-500 shadow-sm",
                        isOpen ? "bg-white text-[#E51636]" : "bg-slate-100 text-slate-400 group-hover:text-slate-600"
                    )}>
                        <Icon className="w-4 h-4" />
                    </div>
                    <div className="flex flex-col items-start leading-none">
                        <span className={cn(
                            "text-[10px] font-black uppercase tracking-widest transition-colors",
                            isOpen ? "text-slate-900" : "text-slate-400 group-hover:text-slate-600"
                        )}>{title}</span>
                    </div>
                </div>
                <div className="flex items-center gap-3">
                    {isFiltered && !isOpen && (
                        <div className="px-2 py-0.5 rounded-full bg-red-50 text-[#E51636] flex items-center justify-center text-[8px] font-black border border-red-100 uppercase tracking-tighter">
                            Filtered
                        </div>
                    )}
                    <ChevronDown className={cn(
                        "w-4 h-4 text-slate-300 transition-transform duration-500",
                        isOpen && "rotate-180 text-[#E51636]"
                    )} />
                </div>
            </button>
            <AnimatePresence initial={false}>
                {isOpen && (
                    <motion.div 
                        initial={{ height: 0, opacity: 0 }}
                        animate={{ height: "auto", opacity: 1 }}
                        exit={{ height: 0, opacity: 0 }}
                        transition={{ duration: 0.4, ease: [0.23, 1, 0.32, 1] }}
                        className="overflow-hidden"
                    >
                        <div className="px-6 pb-6 pt-2 space-y-2">
                            {children}
                        </div>
                    </motion.div>
                )}
            </AnimatePresence>
        </div>
    );
}

function SystemClock() {
    const [time, setTime] = useState(new Date());
    useEffect(() => {
        const timer = setInterval(() => setTime(new Date()), 1000);
        return () => clearInterval(timer);
    }, []);
    return <span className="tabular-nums font-black text-[#004F71]">{format(time, "h:mm a")}</span>;
}

// --- UNIFIED DYNAMIC LEGEND ISLAND ---
function DynamicLegendIsland() {
    const [isMobileExpanded, setIsMobileExpanded] = useState(false);

    // Desktop View (Wide Pill)
    const DesktopLegend = () => (
        <motion.div 
            initial={{ y: 100, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            transition={{ type: "spring", stiffness: 300, damping: 30 }}
            className="hidden lg:flex fixed bottom-8 left-1/2 -translate-x-1/2 z-50 items-center gap-6 bg-white/95 backdrop-blur-2xl border border-slate-200/60 px-8 py-3 rounded-full shadow-[0_20px_50px_-12px_rgba(0,0,0,0.15)] ring-1 ring-black/5 hover:scale-[1.02] transition-transform duration-300"
        >
            <div className="flex items-center gap-6">
                {[
                    { label: "Training", color: "bg-[#004F71]" },
                    { label: "Goal", color: "bg-emerald-500" },
                    { label: "Deadline", color: "bg-[#E51636]" },
                    { label: "Operation", color: "bg-slate-500" },
                    { label: "1-on-1", color: "bg-purple-500" },
                ].map((item, i) => (
                    <div key={i} className="flex items-center gap-2 group cursor-default">
                        <div className={cn("w-2 h-2 rounded-full shadow-[0_0_8px_rgba(0,0,0,0.2)]", item.color)} />
                        <span className="text-[9px] font-black uppercase tracking-widest text-slate-500 group-hover:text-slate-900 transition-colors">{item.label}</span>
                    </div>
                ))}
            </div>

            <div className="w-px h-5 bg-slate-200" />

            <div className="flex items-center gap-4">
                {[
                    { label: "High", color: "text-[#E51636]" },
                    { label: "Med", color: "text-amber-500" },
                    { label: "Low", color: "text-blue-400" },
                ].map((p, i) => (
                    <div key={i} className="flex items-center gap-1.5 text-slate-400 group cursor-default">
                        <Flag className={cn("w-3 h-3 fill-current", p.color)} />
                        <span className="text-[8px] font-bold uppercase tracking-wider group-hover:text-slate-600 transition-colors">{p.label}</span>
                    </div>
                ))}
            </div>
        </motion.div>
    );

    // Mobile View (Collapsed Fab)
    const MobileLegend = () => (
        <>
            <motion.button 
                onClick={() => setIsMobileExpanded(!isMobileExpanded)}
                className="lg:hidden fixed bottom-28 left-6 z-50 w-12 h-12 bg-white text-slate-500 rounded-full shadow-[0_10px_30px_-10px_rgba(0,0,0,0.15)] flex items-center justify-center border border-slate-200 active:scale-95 transition-transform"
            >
                {isMobileExpanded ? <X className="w-5 h-5" /> : <Info className="w-5 h-5" />}
            </motion.button>

            <AnimatePresence>
                {isMobileExpanded && (
                    <motion.div 
                        initial={{ opacity: 0, scale: 0.9, y: 20 }}
                        animate={{ opacity: 1, scale: 1, y: 0 }}
                        exit={{ opacity: 0, scale: 0.9, y: 20 }}
                        className="lg:hidden fixed bottom-44 left-6 z-50 bg-white/95 backdrop-blur-xl border border-slate-200 p-5 rounded-[24px] shadow-2xl flex flex-col gap-4 min-w-[200px]"
                    >
                        <div className="space-y-3">
                            <span className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] block">Classifications</span>
                            {[
                                { label: "Training", color: "bg-[#004F71]" },
                                { label: "Goal", color: "bg-emerald-500" },
                                { label: "Deadline", color: "bg-[#E51636]" },
                                { label: "Operation", color: "bg-slate-500" },
                                { label: "1-on-1", color: "bg-purple-500" },
                            ].map((item, i) => (
                                <div key={i} className="flex items-center gap-3">
                                    <div className={cn("w-2 h-2 rounded-full", item.color)} />
                                    <span className="text-[10px] font-bold text-slate-700 uppercase tracking-wide">{item.label}</span>
                                </div>
                            ))}
                        </div>
                        <div className="h-px w-full bg-slate-100" />
                        <div className="space-y-3">
                            <span className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] block">Priorities</span>
                            {[
                                { label: "High Priority", color: "text-[#E51636]" },
                                { label: "Medium Priority", color: "text-amber-500" },
                                { label: "Low Priority", color: "text-blue-400" },
                            ].map((p, i) => (
                                <div key={i} className="flex items-center gap-3">
                                    <Flag className={cn("w-3 h-3 fill-current", p.color)} />
                                    <span className="text-[10px] font-bold text-slate-700 uppercase tracking-wide">{p.label}</span>
                                </div>
                            ))}
                        </div>
                    </motion.div>
                )}
            </AnimatePresence>
        </>
    );

    return (
        <>
            <DesktopLegend />
            <MobileLegend />
        </>
    );
}

// --- MAIN PAGE ---
export default function CalendarPage() {
  const { events, team, subscribeEvents, subscribeTeam, loading } = useAppStore();
  
  // -- View & Data States --
  const [currentDate, setCurrentDate] = useState(new Date());
  const [viewMode, setViewMode] = useState<"calendar" | "timeline" | "oneonone">("calendar");
  const [isCreatorOpen, setIsCreatorOpen] = useState(false);
  const [selectedEvent, setSelectedEvent] = useState<CalendarEvent | null>(null);
  
  // -- DESKTOP SIDEBAR STATE --
  const [isSidebarOpen, setIsSidebarOpen] = useState(true);

  // -- MOBILE SPECIFIC STATES --
  const [isFilterSheetOpen, setIsFilterSheetOpen] = useState(false);

  // -- STAMPING STATE --
  const [activeSticker, setActiveSticker] = useState<StickerType | null>(null);
  const [openSection, setOpenSection] = useState<string | null>('stickers'); 
  
  // -- FILTER STATES --
  const [activeTypes, setActiveTypes] = useState<EventType[]>(EVENT_TYPES);
  const [activePriorities, setActivePriorities] = useState<Priority[]>(PRIORITIES);
  const [activeDepts, setActiveDepts] = useState<Department[]>(["FOH", "BOH"]);
  const [activeRoles, setActiveRoles] = useState<Status[]>(STAGES.map(s => s.id));
  const [showSystemLogs, setShowSystemLogs] = useState(false); 

  useEffect(() => {
    const unsubEvents = subscribeEvents();
    const unsubTeam = subscribeTeam();
    return () => { unsubEvents(); unsubTeam(); };
  }, [subscribeEvents, subscribeTeam]);

  const displayEvents = useMemo(() => {
    return events.filter(e => {
        const isSystemLog = e.assignee === "System";
        if (isSystemLog && !showSystemLogs) return false;
        const typeMatch = activeTypes.includes(e.type);
        const priorityMatch = activePriorities.includes(e.priority);
        const user = team.find(m => m.id === e.teamMemberId || m.id === e.assignee);
        const deptMatch = user ? activeDepts.includes(user.dept) : true;
        const roleMatch = user ? activeRoles.includes(user.status) : true;
        return typeMatch && priorityMatch && deptMatch && roleMatch;
    });
  }, [events, team, activeTypes, activePriorities, activeDepts, activeRoles, showSystemLogs]);

  const handleDragEnd = useCallback(async (id: string, offsetDays: number) => {
    const event = events.find(ev => ev.id === id);
    if (!event) return;
    const newStart = addDays(event.startDate, offsetDays);
    const newEnd = addDays(newStart, differenceInCalendarDays(event.endDate, event.startDate));
    try { await updateDoc(doc(db, "events", id), { startDate: newStart, endDate: newEnd, updatedAt: serverTimestamp() }); } catch (e) { toast.error("Sync Error"); }
  }, [events]);

  const handleCreateEvent = async (draft: DraftEvent) => {
    try { await addDoc(collection(db, "events"), { ...draft, status: "To Do", createdAt: serverTimestamp() }); setIsCreatorOpen(false); toast.success("Deployed"); } catch (e) { toast.error("Fail"); }
  };

  const handleEventStamp = async (eventId: string) => {
      if (!activeSticker) return;
      const loadToast = toast.loading("Applying Marker...");
      try {
          await updateDoc(doc(db, "events", eventId), {
              stickers: arrayUnion(activeSticker)
          });
          toast.success("Marker Applied", { id: loadToast });
      } catch (err) {
          toast.error("Failed to Apply", { id: loadToast });
      }
  };

  const toggle = (list: any[], item: any, setter: any) => setter(list.includes(item) ? list.filter(i => i !== item) : [...list, item]);
  
  const resetFilters = () => {
    setActiveTypes(EVENT_TYPES);
    setActivePriorities(PRIORITIES);
    setActiveDepts(["FOH", "BOH"]);
    setActiveRoles(STAGES.map(s => s.id));
    setShowSystemLogs(false); 
  };

  // --- COMPONENT: Sidebar Content ---
  const SidebarContent = () => (
    <>
        <div className="p-8 pb-6 border-b border-slate-200/40 bg-white shadow-sm flex items-center justify-between shrink-0">
            <div>
                <h1 className="text-xl font-black text-slate-900 tracking-tighter uppercase leading-none mb-2">Ops Center</h1>
                <div className="flex items-center gap-2">
                    <div className="bg-slate-50 border border-slate-200 px-2 py-0.5 rounded-lg text-[9px] shadow-inner"><SystemClock /></div>
                    <button onClick={resetFilters} className="text-slate-400 hover:text-[#E51636] font-bold text-[8px] uppercase tracking-[0.2em] transition-colors group flex items-center gap-1">
                        <RotateCcw className="w-3 h-3 group-hover:rotate-[-90deg] transition-transform" /> Reset
                    </button>
                </div>
            </div>
            {/* Collapse Trigger (Desktop Only) */}
            <button 
                onClick={() => setIsSidebarOpen(false)}
                className="hidden lg:flex p-2 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-[#004F71] transition-all"
            >
                <PanelLeftClose className="w-4 h-4" />
            </button>
        </div>

        <div className="flex-1 overflow-y-auto no-scrollbar pb-20">
            {/* 0. TACTICAL MARKERS */}
            <SidebarAccordion id="stickers" title="Tactical Markers" icon={Sticker} isOpen={openSection === 'stickers'} onToggle={setOpenSection} activeCount={0} totalCount={0}>
                <div className={cn("p-4 rounded-3xl border transition-all duration-500", activeSticker ? "bg-blue-50/50 border-[#004F71]/20 shadow-inner" : "bg-white border-slate-100 shadow-sm")}>
                    <div className="flex justify-between items-center mb-4">
                        <p className="text-[9px] font-bold text-slate-400 uppercase tracking-widest">
                            {activeSticker ? "Select Event to Apply" : "Select Tool"}
                        </p>
                        {activeSticker && <button onClick={() => setActiveSticker(null)} className="text-[9px] font-black text-[#E51636] uppercase tracking-widest hover:underline">Clear</button>}
                    </div>
                    
                    <div className="grid grid-cols-4 gap-3">
                        {STICKERS.map(s => {
                            const isActive = activeSticker === s.id;
                            return (
                                <button key={s.id} onClick={() => setActiveSticker(isActive ? null : s.id)} className={cn("aspect-square rounded-2xl flex items-center justify-center text-lg shadow-sm border transition-all active:scale-95", s.color, isActive ? "ring-4 ring-offset-2 ring-[#004F71] scale-110 z-10" : "grayscale opacity-60 hover:grayscale-0 hover:opacity-100 bg-white hover:scale-105")}>
                                    {s.icon}
                                </button>
                            )
                        })}
                    </div>
                </div>
            </SidebarAccordion>

            {/* SYSTEM LOGS */}
            <div className="px-8 py-2">
                <button onClick={() => setShowSystemLogs(!showSystemLogs)} className={cn("w-full flex items-center justify-between py-3 px-5 rounded-[22px] text-[10px] font-black uppercase tracking-widest transition-all border", showSystemLogs ? "bg-red-50 border-red-100 text-[#E51636] shadow-sm shadow-red-500/10" : "bg-white/40 border-slate-100 text-slate-400 hover:bg-white")}>
                    <div className="flex items-center gap-3"><Server className={cn("w-3.5 h-3.5", showSystemLogs && "text-[#E51636]")} /><span>System Logs</span></div>
                    <div className={cn("w-1.5 h-1.5 rounded-full", showSystemLogs ? "bg-[#E51636] shadow-[0_0_8px_#E51636] animate-pulse" : "bg-slate-300")} />
                </button>
            </div>

            {/* 1. CLASSIFICATION */}
            <SidebarAccordion id="classification" title="Classification" icon={Layers} isOpen={openSection === 'classification'} onToggle={setOpenSection} activeCount={activeTypes.length} totalCount={EVENT_TYPES.length}>
                <div className="grid grid-cols-1 gap-2">
                    {EVENT_TYPES.map(type => {
                        const isSelected = activeTypes.includes(type);
                        return (
                            <button key={type} onClick={() => toggle(activeTypes, type, setActiveTypes)} className={cn("w-full flex items-center justify-between py-3 px-5 rounded-[22px] text-[10px] font-black uppercase tracking-widest transition-all border", isSelected ? `bg-white border-slate-900 shadow-lg scale-[1.02]` : "bg-white/40 border-slate-100 text-slate-400 opacity-60")}>
                                <div className="flex items-center gap-3"><div className={cn("w-2 h-2 rounded-full", isSelected ? "bg-[#E51636]" : "bg-slate-300")} /><span>{getEventLabel(type)}</span></div>
                                {isSelected && <Check className="w-4 h-4 text-[#E51636]" />}
                            </button>
                        )
                    })}
                </div>
            </SidebarAccordion>

            {/* 2. DEPLOYMENT ZONE */}
            <SidebarAccordion id="deployment" title="Deployment Zone" icon={ShieldCheck} isOpen={openSection === 'deployment'} onToggle={setOpenSection} activeCount={activeDepts.length} totalCount={2}>
                <div className="grid grid-cols-2 gap-3">
                    {[{ id: "FOH", label: "Front House", icon: Coffee, color: "text-blue-600", bg: "bg-blue-50" }, { id: "BOH", label: "Back House", icon: Flame, color: "text-red-600", bg: "bg-red-50" }].map(dept => {
                        const isSelected = activeDepts.includes(dept.id as Department);
                        return (
                            <button key={dept.id} onClick={() => toggle(activeDepts, dept.id as Department, setActiveDepts)} className={cn("flex flex-col items-center gap-3 p-5 rounded-[32px] border transition-all h-28 justify-center", isSelected ? "bg-white border-slate-900 shadow-xl scale-105" : "bg-white/40 border-slate-100 opacity-50")}>
                                <div className={cn("p-2.5 rounded-2xl shadow-sm", isSelected ? dept.bg : "bg-slate-100", isSelected ? dept.color : "text-slate-300")}><dept.icon className="w-4 h-4" /></div>
                                <span className={cn("text-[8px] font-black uppercase tracking-widest", isSelected ? "text-slate-900" : "text-slate-400")}>{dept.id}</span>
                            </button>
                        )
                    })}
                </div>
            </SidebarAccordion>

            {/* 3. IMPACT PRIORITY */}
            <SidebarAccordion id="priority" title="Impact Priority" icon={Zap} isOpen={openSection === 'priority'} onToggle={setOpenSection} activeCount={activePriorities.length} totalCount={PRIORITIES.length}>
                <div className="grid grid-cols-1 gap-2">
                    {PRIORITIES.map(p => {
                        const isSelected = activePriorities.includes(p);
                        return (
                            <button key={p} onClick={() => toggle(activePriorities, p, setActivePriorities)} className={cn("w-full flex items-center justify-between py-3 px-5 rounded-[22px] text-[10px] font-black uppercase tracking-widest transition-all border", isSelected ? `bg-white border-slate-900 shadow-md` : "bg-white/40 border-slate-100 text-slate-300 opacity-60")}>
                                <div className="flex items-center gap-3"><Flag className={cn("w-3 h-3", isSelected ? "text-[#E51636] fill-current" : "")} /><span>{p} Level</span></div>
                                {isSelected && <Check className="w-4 h-4 text-[#E51636]" />}
                            </button>
                        )
                    })}
                </div>
            </SidebarAccordion>
        </div>
    </>
  );

  return (
    <div className="flex flex-col lg:flex-row h-[calc(100vh-6rem)] md:h-[calc(100vh-5rem)] rounded-[32px] md:rounded-[48px] overflow-hidden bg-white shadow-[0_40px_100px_-20px_rgba(0,0,0,0.15)] border border-slate-200/60 ring-4 md:ring-8 ring-slate-100/50 relative mt-2 md:mt-0">
      
      {/* --- DESKTOP COLLAPSIBLE SIDEBAR --- */}
      <motion.div 
        animate={{ width: isSidebarOpen ? 300 : 0, opacity: isSidebarOpen ? 1 : 0 }}
        transition={{ type: "spring", stiffness: 300, damping: 30 }}
        className="hidden lg:flex bg-[#F8FAFC] border-r border-slate-200/60 flex-col shrink-0 relative z-20 overflow-hidden"
      >
         <div className="w-[300px] h-full flex flex-col">
            <SidebarContent />
         </div>
      </motion.div>

      {/* --- MAIN INTERFACE AREA --- */}
      <div className="flex-1 flex flex-col relative overflow-hidden bg-white">
        
        {/* --- DESKTOP HEADER (Modified) --- */}
        <div className="hidden lg:flex h-20 bg-white border-b border-slate-100 items-center justify-between px-8 shrink-0 z-30 relative shadow-sm">
            <div className="flex items-center gap-6 group cursor-default">
              
              {!isSidebarOpen && (
                  <motion.button 
                    initial={{ opacity: 0, scale: 0.5 }} 
                    animate={{ opacity: 1, scale: 1 }}
                    onClick={() => setIsSidebarOpen(true)}
                    className="p-3 bg-slate-50 rounded-xl border border-slate-200 text-slate-400 hover:text-[#004F71] hover:bg-white hover:shadow-md transition-all"
                  >
                      <PanelLeftOpen className="w-5 h-5" />
                  </motion.button>
              )}

              <div className="p-3 bg-white rounded-[24px] border-2 border-slate-50 shadow-lg group-hover:border-[#E51636] transition-all duration-500">
                  <CalendarIcon className="w-6 h-6 text-[#E51636]" />
              </div>
              <div className="flex flex-col leading-none">
                  <span className="text-[8px] font-black text-slate-300 uppercase tracking-[0.4em] mb-1 pl-0.5 text-left">Identity Command</span>
                  <div className="flex items-baseline gap-2">
                      <span className="text-4xl font-[1000] text-slate-900 tracking-tighter uppercase">{format(currentDate, "MMMM")}</span>
                      <span className="text-4xl font-light text-slate-200 tracking-tighter">{format(currentDate, "yyyy")}</span>
                  </div>
              </div>
           </div>

           {/* CENTERED VIEW SWITCHER */}
           <div className="absolute left-1/2 -translate-x-1/2 flex bg-slate-50 p-1.5 rounded-2xl border border-slate-200 shadow-inner">
                <button onClick={() => setViewMode("calendar")} className={cn("px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2", viewMode === "calendar" ? "bg-[#E51636] text-white shadow-lg shadow-red-500/20" : "text-slate-400 hover:text-slate-600 hover:bg-white")}>
                    <LayoutGrid className="w-3.5 h-3.5" /> Grid View
                </button>
                <div className="w-px bg-slate-200 my-2 mx-1" />
                <button onClick={() => setViewMode("timeline")} className={cn("px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2", viewMode === "timeline" ? "bg-[#E51636] text-white shadow-lg shadow-red-500/20" : "text-slate-400 hover:text-slate-600 hover:bg-white")}>
                    <ListEnd className="w-3.5 h-3.5" /> Timeline
                </button>
                <div className="w-px bg-slate-200 my-2 mx-1" />
                <button onClick={() => setViewMode("oneonone")} className={cn("px-6 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2", viewMode === "oneonone" ? "bg-[#E51636] text-white shadow-lg shadow-red-500/20" : "text-slate-400 hover:text-slate-600 hover:bg-white")}>
                    <MessageSquare className="w-3.5 h-3.5" /> 1-on-1s
                </button>
            </div>

           <div className="flex items-center gap-4">
                <button onClick={() => setIsCreatorOpen(true)} className="flex items-center gap-2 bg-[#E51636] text-white px-8 py-3.5 rounded-[20px] text-[10px] font-black uppercase shadow-[0_15px_30px_-10px_rgba(229,22,54,0.4)] hover:bg-[#c4122d] active:scale-95 group transition-all tracking-widest border-b-4 border-red-800">
                    <Plus className="w-4 h-4 transition-transform group-hover:rotate-90" /> <span>Deploy Mission</span>
                </button>
           </div>
        </div>

        {/* --- MOBILE HEADER CONTROLS --- */}
        <div className="lg:hidden flex items-center justify-between p-4 border-b border-slate-100 bg-white z-30 sticky top-0">
            <div className="flex items-center gap-3">
                <button onClick={() => setIsFilterSheetOpen(true)} className="p-2.5 bg-slate-50 border border-slate-200 rounded-xl text-slate-500 hover:text-[#004F71] active:scale-95 transition-all">
                    <SlidersHorizontal className="w-5 h-5" />
                </button>
                <div className="flex flex-col">
                    <span className="text-[9px] font-black uppercase tracking-widest text-slate-400">View</span>
                    <span className="text-sm font-bold text-slate-900">{format(currentDate, "MMMM yyyy")}</span>
                </div>
            </div>
            
            <div className="flex bg-slate-100 p-1 rounded-xl">
                <button onClick={() => setViewMode("calendar")} className={cn("p-2 rounded-lg transition-all", viewMode === "calendar" ? "bg-white shadow-sm text-[#E51636]" : "text-slate-400")}><LayoutGrid className="w-4 h-4" /></button>
                <button onClick={() => setViewMode("timeline")} className={cn("p-2 rounded-lg transition-all", viewMode === "timeline" ? "bg-white shadow-sm text-[#E51636]" : "text-slate-400")}><ListEnd className="w-4 h-4" /></button>
                <button onClick={() => setViewMode("oneonone")} className={cn("p-2 rounded-lg transition-all", viewMode === "oneonone" ? "bg-white shadow-sm text-[#E51636]" : "text-slate-400")}><MessageSquare className="w-4 h-4" /></button>
            </div>
        </div>

        <div className="flex-1 relative overflow-hidden bg-white">
            {loading && <div className="absolute inset-0 bg-white/50 backdrop-blur-[2px] z-50 flex items-center justify-center"><Loader2 className="animate-spin text-[#E51636] w-12 h-12" /></div>}
            
            <AnimatePresence mode="wait">
                <motion.div key={viewMode} initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0, y: -10 }} className="h-full">
                    {viewMode === "calendar" ? (
                        <div className="h-full overflow-y-auto no-scrollbar">
                            <CalendarGrid 
                                currentDate={currentDate} 
                                events={displayEvents} 
                                onDragEnd={handleDragEnd} 
                                onSelectEvent={setSelectedEvent} 
                                isStamping={!!activeSticker} 
                                onStamp={handleEventStamp}
                            />
                        </div>
                    ) : viewMode === "timeline" ? (
                        <div className="h-full">
                            <TimelineBoard 
                                currentDate={currentDate} 
                                events={displayEvents} 
                                onDragEnd={handleDragEnd} 
                                onSelectEvent={setSelectedEvent} 
                                isStamping={!!activeSticker} 
                                onStamp={handleEventStamp}
                            />
                        </div>
                    ) : (
                        <OneOnOneView events={events} onSelectEvent={setSelectedEvent} selectedUserId={null} />
                    )}
                </motion.div>
            </AnimatePresence>
        </div>
      </div>

      {/* --- MOBILE FAB --- */}
      <button 
        onClick={() => setIsCreatorOpen(true)}
        className="lg:hidden fixed bottom-28 right-6 w-14 h-14 bg-[#E51636] text-white rounded-full shadow-[0_10px_30px_-10px_rgba(229,22,54,0.5)] flex items-center justify-center z-50 active:scale-90 transition-transform border-4 border-white"
      >
        <Plus className="w-7 h-7" />
      </button>

      {/* --- FILTER SHEET (Mobile Only) --- */}
      <AnimatePresence>
        {isFilterSheetOpen && (
            <ClientPortal>
                <div className="fixed inset-0 z-[200] lg:hidden">
                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm" onClick={() => setIsFilterSheetOpen(false)} />
                    <motion.div 
                        initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} transition={{ type: "spring", damping: 25, stiffness: 300 }}
                        className="absolute bottom-0 left-0 right-0 h-[85vh] bg-[#F8FAFC] rounded-t-[32px] overflow-hidden flex flex-col"
                    >
                        <div className="flex justify-center pt-3 pb-1"><div className="w-12 h-1.5 bg-slate-300 rounded-full" /></div>
                        <div className="flex justify-between items-center px-6 py-4 border-b border-slate-200">
                            <h2 className="text-lg font-black text-slate-900">Tactical Filters</h2>
                            <button onClick={() => setIsFilterSheetOpen(false)} className="p-2 bg-slate-100 rounded-full"><X className="w-5 h-5 text-slate-500" /></button>
                        </div>
                        <div className="flex-1 overflow-y-auto no-scrollbar">
                            <SidebarContent />
                        </div>
                        <div className="p-6 bg-white border-t border-slate-200 safe-area-pb">
                            <button onClick={() => setIsFilterSheetOpen(false)} className="w-full py-4 bg-[#004F71] text-white rounded-2xl font-black uppercase tracking-widest shadow-lg active:scale-95 transition-transform">Apply Filters</button>
                        </div>
                    </motion.div>
                </div>
            </ClientPortal>
        )}
      </AnimatePresence>

      {/* --- UNIFIED DYNAMIC LEGEND ISLAND --- */}
      <DynamicLegendIsland />

      {/* --- FLOATING STICKER TOOL --- */}
      <AnimatePresence>
          {activeSticker && (
              <motion.div 
                  initial={{ y: 100, opacity: 0, x: "-50%" }} 
                  animate={{ y: 0, opacity: 1, x: "-50%" }} 
                  exit={{ y: 100, opacity: 0, x: "-50%" }}
                  className="fixed bottom-12 left-1/2 z-[100] flex items-center gap-6 bg-[#0F172A] text-white px-8 py-4 rounded-[32px] shadow-2xl border border-white/10 backdrop-blur-2xl w-[90%] md:w-auto justify-between md:justify-start"
              >
                  <div className="flex items-center gap-4">
                      <div className={cn("w-10 h-10 rounded-xl flex items-center justify-center text-xl shadow-lg border-2 border-white/20", STICKERS.find(s => s.id === activeSticker)?.color)}>
                          {STICKERS.find(s => s.id === activeSticker)?.icon}
                      </div>
                      <div className="flex flex-col">
                          <span className="text-[10px] font-black uppercase tracking-[0.2em] text-blue-400">Stamping Active</span>
                          <span className="text-sm font-bold text-white">Click any mission to apply</span>
                      </div>
                  </div>
                  <div className="h-8 w-px bg-white/10 hidden md:block" />
                  <button onClick={() => setActiveSticker(null)} className="p-3 bg-white/10 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-full transition-all active:scale-90"><X className="w-5 h-5" /></button>
              </motion.div>
          )}
      </AnimatePresence>

      <AnimatePresence>{isCreatorOpen && <AdvancedCreateModal isOpen={isCreatorOpen} teamMembers={team} onClose={() => setIsCreatorOpen(false)} onCreate={handleCreateEvent} />}</AnimatePresence>
      <AnimatePresence>{selectedEvent && (<EventDetailSheet event={selectedEvent} onClose={() => setSelectedEvent(null)} onDelete={async (id) => { const loadToast = toast.loading("Decommissioning..."); try { await deleteDoc(doc(db, "events", id)); toast.success("Terminated", { id: loadToast }); setSelectedEvent(null); } catch (e) { toast.error("Error", { id: loadToast }); } }} onUpdate={async (id, updates) => { const loadToast = toast.loading("Updating..."); try { await updateDoc(doc(db, "events", id), { ...updates, updatedAt: serverTimestamp() }); toast.success("Synced", { id: loadToast }); setSelectedEvent(null); } catch (e) { toast.error("Error", { id: loadToast }); } }} />)}</AnimatePresence>
    </div>
  );
}
--- FILE: ./app/(main)/goals/page.tsx ---
"use client";

import { useState, useEffect, useMemo } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { 
  Plus, Target, MoreHorizontal, ArrowRight, CheckCircle2, 
  Clock, Sparkles, X, Loader2, Search
} from "lucide-react";
import { cn } from "@/lib/utils";

// Firebase & Global Store
import { db } from "@/lib/firebase";
import { collection, addDoc, updateDoc, doc, serverTimestamp } from "firebase/firestore";
import { useAppStore } from "@/lib/store/useStore";
import { CalendarEvent, Priority, TeamMember } from "../calendar/_components/types";

const COLUMNS = [
  { id: "To Do", label: "Future Vision", color: "bg-slate-300" },
  { id: "In Progress", label: "In Progress", color: "bg-blue-500" },
  { id: "Done", label: "Accomplished", color: "bg-emerald-500" },
];

export default function GoalsBoardPage() {
  const { events, team, subscribeEvents, subscribeTeam, loading } = useAppStore();
  const [isCreateOpen, setIsCreateOpen] = useState(false);
  const [newGoalTitle, setNewGoalTitle] = useState("");

  useEffect(() => {
    const unsubEvents = subscribeEvents();
    const unsubTeam = subscribeTeam();
    return () => { unsubEvents(); unsubTeam(); };
  }, [subscribeEvents, subscribeTeam]);

  // Filter only "Goal" type events
  const goals = useMemo(() => events.filter(e => e.type === "Goal"), [events]);

  const handleCreate = async () => {
    if (!newGoalTitle.trim()) return;
    await addDoc(collection(db, "events"), {
      title: newGoalTitle,
      type: "Goal",
      status: "To Do",
      priority: "Medium",
      startDate: new Date(),
      endDate: addDoc, // Default logic
      assignee: team[0]?.id || "System",
      assigneeName: team[0]?.name || "Director",
      createdAt: serverTimestamp()
    });
    setNewGoalTitle("");
    setIsCreateOpen(false);
  };

  const moveGoal = async (id: string, newStatus: string) => {
    await updateDoc(doc(db, "events", id), { status: newStatus });
  };

  return (
    <div className="min-h-screen bg-[#F8FAFC] p-8 font-sans">
      <div className="max-w-[1800px] mx-auto space-y-8 mt-20">
        <div className="flex justify-between items-end pb-6 border-b border-slate-200">
           <div>
              <h1 className="text-5xl font-black text-[#004F71]">Strategic Board</h1>
              <p className="mt-2 text-slate-500 font-medium">Manage high-level objectives. Synced with Operations Schedule.</p>
           </div>
           <button onClick={() => setIsCreateOpen(true)} className="h-12 px-6 bg-[#E51636] text-white rounded-xl font-black uppercase text-xs shadow-lg flex items-center gap-2">
              <Plus className="w-4 h-4" /> New Goal
           </button>
        </div>

        {loading ? (
            <div className="flex justify-center py-20"><Loader2 className="animate-spin text-slate-300" /></div>
        ) : (
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                {COLUMNS.map((col) => (
                    <div key={col.id} className="flex flex-col gap-4">
                        <div className="flex items-center gap-2 px-2">
                            <div className={cn("w-3 h-3 rounded-full", col.color)} />
                            <h3 className="text-sm font-black text-slate-700 uppercase">{col.label}</h3>
                        </div>
                        <div className="flex-1 rounded-[24px] p-2 bg-slate-50/50 border border-dashed border-slate-200 min-h-[500px]">
                            <div className="space-y-3">
                                {goals.filter(g => g.status === col.id).map((goal) => (
                                    <motion.div layoutId={goal.id} key={goal.id} className="bg-white p-5 rounded-[20px] shadow-sm border border-slate-100 group">
                                        <div className="flex justify-between items-start mb-3">
                                            <span className="px-2 py-1 rounded-md bg-blue-50 text-blue-600 text-[9px] font-black uppercase tracking-wider">Goal</span>
                                            {col.id !== "Done" && (
                                                <button onClick={() => moveGoal(goal.id, "Done")} className="opacity-0 group-hover:opacity-100 p-1.5 hover:bg-emerald-50 text-emerald-500 rounded-md transition-all">
                                                    <CheckCircle2 className="w-4 h-4" />
                                                </button>
                                            )}
                                        </div>
                                        <h4 className="text-sm font-bold text-slate-800 leading-snug mb-4">{goal.title}</h4>
                                        <div className="flex items-center justify-between border-t pt-3">
                                            <div className="flex items-center gap-1.5 text-[10px] font-bold text-slate-400">
                                                <Clock className="w-3 h-3" /> Targeted
                                            </div>
                                            <div className="w-7 h-7 rounded-full bg-[#004F71] flex items-center justify-center text-[8px] font-black text-white">
                                                {goal.assignee.substring(0, 2).toUpperCase()}
                                            </div>
                                        </div>
                                    </motion.div>
                                ))}
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        )}

        <AnimatePresence>
            {isCreateOpen && (
               <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                  <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="absolute inset-0 bg-[#004F71]/40 backdrop-blur-sm" onClick={() => setIsCreateOpen(false)} />
                  <motion.div initial={{ scale: 0.95, y: 20 }} animate={{ scale: 1, y: 0 }} className="relative w-full max-w-lg bg-white rounded-[32px] p-8 shadow-2xl">
                        <h2 className="text-2xl font-black mb-6">Create New Goal</h2>
                        <input autoFocus value={newGoalTitle} onChange={e => setNewGoalTitle(e.target.value)} className="w-full text-lg font-bold border-b-2 outline-none mb-8 focus:border-[#E51636]" placeholder="Improve speed of service..." />
                        <button onClick={handleCreate} className="w-full py-4 bg-[#004F71] text-white rounded-xl font-black uppercase shadow-lg">Launch Objective</button>
                  </motion.div>
               </div>
            )}
        </AnimatePresence>
      </div>
    </div>
  );
}
--- FILE: ./app/(main)/training/page.tsx ---
"use client";

import { useState, useRef, useEffect, useMemo } from "react";
import { motion, AnimatePresence, PanInfo, useDragControls } from "framer-motion";
import { 
  Plus, Trash2, GripVertical, Eye, Settings, X, Utensils, Coffee, 
  Cloud, Maximize2, Image as ImageIcon, CalendarClock, 
  BookOpen, Activity, Loader2, Sparkles, Layers,
  ChevronUp, ChevronDown, Hash, Terminal, ChevronRight, Book, Minimize2
} from "lucide-react";
import { cn } from "@/lib/utils";

// Firebase Integration
import { db, storage } from "@/lib/firebase";
import { 
  collection, query, where, onSnapshot, doc, 
  updateDoc, addDoc, deleteDoc, serverTimestamp 
} from "firebase/firestore";
import { ref, uploadBytes, getDownloadURL } from "firebase/storage";

// Shared Types
import { Department } from "../calendar/_components/types";
import ClientPortal from "@/components/core/ClientPortal";

interface Task {
  id: string;
  title: string;
  image?: string;
  duration?: string;
}

interface Section {
  id: string;
  title: string;
  duration: string;
  pageStart: number;
  pageEnd: number;
  tasks: Task[];
  dept: Department;
  order: number;
}

const CANVA_LINKS = {
  FOH: "https://www.canva.com/design/DAG7sot3RWY/Sv-7Y3IEyBqUUFB999JiPA/view",
  BOH: "https://www.canva.com/design/DAG7ssYg444/FFZwbb8mLfLGiGrP2VeHiA/view"
};

// --- CUSTOM PAGE RANGE COMPONENT ---
function PageRangeSelector({ start, end, onUpdate }: any) {
    const adjust = (field: 'pageStart' | 'pageEnd', amount: number) => {
        const currentVal = field === 'pageStart' ? start : end;
        const newVal = Math.max(1, (currentVal || 0) + amount);
        onUpdate({ [field]: newVal });
    };

    return (
        <div className="flex items-center bg-white/90 backdrop-blur-md border border-slate-200 rounded-full p-1.5 shadow-lg ring-1 ring-black/5">
            <div className="px-3 flex items-center gap-2 border-r border-slate-200/60">
                <Hash className="w-3.5 h-3.5 text-[#004F71]" />
                <span className="text-[10px] font-black uppercase text-slate-500 tracking-widest">Pages</span>
            </div>
            <div className="flex items-center px-2 group/page relative min-w-[36px] justify-center">
                <span className="text-sm font-black text-slate-900 tabular-nums">{start || 1}</span>
                <div className="flex flex-col ml-1 opacity-0 group-hover/page:opacity-100 transition-opacity absolute -top-8 bg-white shadow-md rounded-lg p-1 pointer-events-none group-hover/page:pointer-events-auto">
                    <button onClick={() => adjust('pageStart', 1)} className="text-slate-400 hover:text-[#004F71]"><ChevronUp className="w-3 h-3" /></button>
                    <button onClick={() => adjust('pageStart', -1)} className="text-slate-400 hover:text-[#004F71]"><ChevronDown className="w-3 h-3" /></button>
                </div>
            </div>
            <div className="text-slate-300 font-bold px-0.5 opacity-40"></div>
            <div className="flex items-center px-2 group/page relative min-w-[36px] justify-center">
                <span className="text-sm font-black text-slate-900 tabular-nums">{end || 2}</span>
                <div className="flex flex-col ml-1 opacity-0 group-hover/page:opacity-100 transition-opacity absolute -top-8 bg-white shadow-md rounded-lg p-1 pointer-events-none group-hover/page:pointer-events-auto">
                    <button onClick={() => adjust('pageEnd', 1)} className="text-slate-400 hover:text-[#004F71]"><ChevronUp className="w-3 h-3" /></button>
                    <button onClick={() => adjust('pageEnd', -1)} className="text-slate-400 hover:text-[#004F71]"><ChevronDown className="w-3 h-3" /></button>
                </div>
            </div>
        </div>
    );
}

export default function TrainingBuilderPage() {
  const [sections, setSections] = useState<Section[]>([]);
  const [activeDept, setActiveDept] = useState<Department>("FOH");
  const [previewMode, setPreviewMode] = useState(false);
  const [activeSectionId, setActiveSectionId] = useState<string | null>(null);
  const [iframeLoading, setIframeLoading] = useState(false);
  const [isIslandExpanded, setIsIslandExpanded] = useState(false);
  const [isProcessing, setIsProcessing] = useState(false);
  const [viewingImage, setViewingImage] = useState<string | null>(null);
  
  // Mobile specific state for opening the viewer
  const [mobileViewerOpen, setMobileViewerOpen] = useState(false);
  const dragControls = useDragControls();

  const sectionRefs = useRef<{ [key: string]: HTMLDivElement | null }>({});

  useEffect(() => {
    const q = query(collection(db, "curriculum"), where("dept", "==", activeDept));
    const unsubscribe = onSnapshot(q, (snapshot) => {
      const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Section[];
      const sortedData = data.sort((a, b) => (a.order || 0) - (b.order || 0));
      setSections(sortedData);
      if (data.length > 0 && !activeSectionId) setActiveSectionId(data[0].id);
    });
    return () => unsubscribe();
  }, [activeDept]);

  const activeIndex = sections.findIndex(s => s.id === activeSectionId);
  const activeSection = useMemo(() => sections[activeIndex] || sections[0], [sections, activeIndex]);

  const getEmbedUrl = () => {
    if (!activeSection || !activeSection.pageStart) return null;
    const base = CANVA_LINKS[activeDept].split('?')[0];
    return `${base}?embed#${activeSection.pageStart}`;
  };

  // --- INTELLIGENT SCROLL SPY ---
  useEffect(() => {
    const handleScroll = () => {
        // Run on both mobile and desktop
        const viewportCenter = window.innerHeight / 2;
        let closestId = activeSectionId;
        let minDistance = Infinity;

        sections.forEach((s) => {
            const el = sectionRefs.current[s.id];
            if (el) {
                const rect = el.getBoundingClientRect();
                const elementCenter = rect.top + (rect.height / 2);
                const distance = Math.abs(viewportCenter - elementCenter);
                if (distance < minDistance) {
                    minDistance = distance;
                    closestId = s.id;
                }
            }
        });

        if (closestId && closestId !== activeSectionId) {
            setActiveSectionId(closestId);
            // Only trigger loading if we are actually viewing the manual (desktop or mobile modal open)
            if (window.innerWidth >= 1024 || mobileViewerOpen) {
                setIframeLoading(true);
            }
        }
    };
    
    // Add listener
    window.addEventListener("scroll", handleScroll, { passive: true });
    // Run once on mount/update to set initial active state
    handleScroll();
    
    return () => window.removeEventListener("scroll", handleScroll);
  }, [sections, activeSectionId, mobileViewerOpen]);

  // When loading state changes, clear it after a delay (simulating iframe load if needed, mostly for UX feedback)
  useEffect(() => {
    if(iframeLoading) {
        const timer = setTimeout(() => setIframeLoading(false), 800);
        return () => clearTimeout(timer);
    }
  }, [iframeLoading]);

  const addSection = async () => {
    const nextOrder = sections.length > 0 ? (sections[sections.length - 1].order || 0) + 1 : 0;
    const lastPage = sections.length > 0 ? (Number(sections[sections.length - 1].pageEnd) || 0) : 0;
    const docRef = await addDoc(collection(db, "curriculum"), {
        title: "New Training Phase", duration: "Day 1", pageStart: lastPage + 1, pageEnd: lastPage + 2,
        tasks: [], dept: activeDept, order: nextOrder, createdAt: serverTimestamp()
    });
    setActiveSectionId(docRef.id);
  };

  const updateSection = async (id: string, updates: Partial<Section>) => {
    await updateDoc(doc(db, "curriculum", id), updates);
  };

  const handleFileUpload = async (section: Section, taskId: string, e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;
    setIsProcessing(true);
    try {
      const storageRef = ref(storage, `curriculum/${activeDept}/${section.id}/${taskId}`);
      const snapshot = await uploadBytes(storageRef, file);
      const url = await getDownloadURL(snapshot.ref);
      const newTasks = section.tasks.map(t => t.id === taskId ? { ...t, image: url } : t);
      await updateDoc(doc(db, "curriculum", section.id), { tasks: newTasks });
    } catch (error) { console.error(error); } finally { setIsProcessing(false); }
  };

  // Handler for mobile card click
  const handleMobileCardClick = (sectionId: string) => {
      setActiveSectionId(sectionId);
      setMobileViewerOpen(true);
      setIframeLoading(true);
  };

  return (
    <div className="min-h-screen bg-[#F8FAFC] pb-40 font-sans relative overflow-x-hidden">
      
      {/* 
        ===========================================
        MOBILE EXECUTIVE HEADER (Dedicated)
        ===========================================
      */}
      <div className="md:hidden fixed top-20 left-1/2 -translate-x-1/2 z-[110] w-[90%] max-w-sm">
        <motion.div 
            initial={{ y: -20, opacity: 0 }}
            animate={{ y: 0, opacity: 1 }}
            className="bg-white/80 backdrop-blur-xl border border-white/60 shadow-[0_10px_30px_-10px_rgba(0,0,0,0.1)] rounded-full p-1.5 flex items-center justify-between ring-1 ring-black/5"
        >
            {/* Segmented Control */}
            <div className="flex bg-slate-100/50 p-1 rounded-full border border-slate-200/50">
                <button 
                    onClick={() => setActiveDept("FOH")} 
                    className={cn(
                        "px-4 py-2 text-[10px] font-black rounded-full transition-all flex items-center gap-1.5", 
                        activeDept === "FOH" ? "bg-white text-[#004F71] shadow-sm ring-1 ring-black/5" : "text-slate-400"
                    )}
                >
                    <Coffee className="w-3.5 h-3.5" /> FOH
                </button>
                <button 
                    onClick={() => setActiveDept("BOH")} 
                    className={cn(
                        "px-4 py-2 text-[10px] font-black rounded-full transition-all flex items-center gap-1.5", 
                        activeDept === "BOH" ? "bg-white text-[#E51636] shadow-sm ring-1 ring-black/5" : "text-slate-400"
                    )}
                >
                    <Utensils className="w-3.5 h-3.5" /> BOH
                </button>
            </div>

            {/* Phase Info (Intelligent Updating) */}
            <div className="flex items-center gap-3 pr-4">
                <div className="h-6 w-px bg-slate-200" />
                <div className="flex flex-col items-end leading-none">
                    <span className="text-[7px] font-bold text-slate-400 uppercase tracking-wider mb-0.5">Phase</span>
                    <AnimatePresence mode="popLayout">
                        <motion.span 
                            key={activeIndex}
                            initial={{ y: 10, opacity: 0 }}
                            animate={{ y: 0, opacity: 1 }}
                            exit={{ y: -10, opacity: 0 }}
                            className={cn("text-xs font-black tabular-nums", activeDept === "FOH" ? "text-[#004F71]" : "text-[#E51636]")}
                        >
                            {String(activeIndex + 1).padStart(2, '0')}
                        </motion.span>
                    </AnimatePresence>
                </div>
            </div>
        </motion.div>
      </div>

      {/* 
        ===========================================
        DESKTOP EXECUTIVE DYNAMIC ISLAND (Hover Expandable)
        ===========================================
      */}
      <div className="hidden md:flex fixed top-24 left-0 right-0 z-[120] justify-center pointer-events-none px-4" onMouseEnter={() => setIsIslandExpanded(true)} onMouseLeave={() => setIsIslandExpanded(false)}>
        <motion.div 
            layout animate={{ width: isIslandExpanded ? 780 : 380, height: 60 }} 
            transition={{ type: "spring", stiffness: 350, damping: 35 }}
            className="pointer-events-auto bg-white/90 backdrop-blur-2xl border border-slate-200/60 shadow-xl rounded-full p-2 flex items-center overflow-hidden ring-1 ring-black/5"
        >
            <AnimatePresence mode="wait">
                {!isIslandExpanded ? (
                   <motion.div key="c" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="flex items-center gap-4 px-5 w-full">
                      <div className={cn("w-2 h-2 rounded-full animate-pulse", activeDept === "FOH" ? "bg-[#004F71] shadow-[0_0_12px_#004f71]" : "bg-[#E51636] shadow-[0_0_12px_#e51636]")} />
                      <div className="flex flex-col flex-1 overflow-hidden">
                          <span className="text-[8px] font-black text-slate-300 uppercase tracking-[0.3em] leading-none mb-1">Active Tracking</span>
                          <span className="text-xs font-black truncate text-slate-800 tracking-tight">{activeSection?.title || "Ops Syncing..."}</span>
                      </div>
                      <div className="h-8 w-px bg-slate-100 mx-1" />
                      <div className="flex flex-col items-end shrink-0">
                          <AnimatePresence mode="popLayout">
                            <motion.span 
                                key={activeIndex}
                                initial={{ y: 5, opacity: 0 }}
                                animate={{ y: 0, opacity: 1 }}
                                className={cn("text-[10px] font-black tabular-nums", activeDept === "FOH" ? "text-[#004F71]" : "text-[#E51636]")}
                            >
                                PH {String(activeIndex + 1).padStart(2, '0')}
                            </motion.span>
                          </AnimatePresence>
                          <span className="text-[8px] font-bold text-slate-300 uppercase">Stage</span>
                      </div>
                   </motion.div>
                ) : (
                    <motion.div key="e" initial={{ opacity: 0, filter: "blur(4px)" }} animate={{ opacity: 1, filter: "blur(0px)" }} className="flex items-center justify-between w-full px-2">
                        <div className="flex bg-slate-100/80 p-1 rounded-full border border-slate-200/50">
                            <button onClick={() => setActiveDept("FOH")} className={cn("px-5 py-2 text-[10px] font-black rounded-full transition-all flex items-center gap-2", activeDept === "FOH" ? "bg-white text-[#004F71] shadow-sm" : "text-slate-400 hover:text-slate-600")}><Coffee className="w-3.5 h-3.5" /> FOH</button>
                            <button onClick={() => setActiveDept("BOH")} className={cn("px-5 py-2 text-[10px] font-black rounded-full transition-all flex items-center gap-2", activeDept === "BOH" ? "bg-white text-[#E51636] shadow-sm" : "text-slate-400 hover:text-slate-600")}><Utensils className="w-3.5 h-3.5" /> BOH</button>
                        </div>
                        <div className="flex-1 px-6 flex justify-center"><div className={cn("flex items-center gap-3 px-4 py-2 rounded-2xl border transition-all duration-700", activeDept === "FOH" ? "bg-blue-50/50 border-[#004F71]/20 text-[#004F71]" : "bg-red-50/50 border-[#E51636]/20 text-[#E51636]")}><div className={cn("w-7 h-7 rounded-lg flex items-center justify-center font-black text-[10px] text-white shadow-lg", activeDept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]")}>{activeIndex + 1}</div><span className="text-[11px] font-black uppercase tracking-widest truncate max-w-[180px]">{activeSection?.title || "Drafting..."}</span></div></div>
                        <button onClick={() => setPreviewMode(!previewMode)} className={cn("px-5 py-2 rounded-full text-[10px] font-black uppercase flex items-center gap-2 border shadow-sm transition-all", previewMode ? "bg-slate-900 text-white shadow-lg" : "bg-white text-slate-500 hover:bg-slate-50")}>{previewMode ? <Settings className="w-4 h-4" /> : <Eye className="w-4 h-4" />}<span>{previewMode ? "Editor" : "Preview"}</span></button>
                    </motion.div>
                )}
            </AnimatePresence>
        </motion.div>
      </div>

      <div className="max-w-[1800px] mx-auto px-4 md:px-6 pt-32 md:pt-48 grid grid-cols-12 gap-8 md:gap-12 items-stretch relative z-10">
         
         {/* LEFT COLUMN: LIST (Full width on Mobile) */}
         <div className="col-span-12 lg:col-span-7 space-y-6 md:space-y-12 pl-6 md:pl-12 border-l-0 md:border-l-2 border-slate-100 md:ml-8 relative">
            {sections.map((section, idx) => {
               const isActive = activeSectionId === section.id;
               const auraColor = activeDept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]";

               return (
               <div 
                  key={section.id} 
                  ref={el => { sectionRefs.current[section.id] = el; }} 
                  className={cn(
                      "relative scroll-mt-32 md:scroll-mt-64 transition-all duration-500", 
                      isActive ? "z-30" : "z-0"
                  )}
               >
                  <AnimatePresence>
                    {isActive && (
                        <motion.div 
                            initial={{ opacity: 0, scale: 0.9 }} 
                            animate={{ opacity: 0.2, scale: 1.15 }} 
                            exit={{ opacity: 0, scale: 0.9 }} 
                            transition={{ duration: 0.6, ease: "easeOut" }}
                            className={cn(
                                "absolute -inset-10 md:-inset-16 bg-gradient-to-r from-transparent via-current to-transparent blur-[80px] md:blur-[120px] rounded-[50%] -z-10 pointer-events-none", 
                                activeDept === "FOH" ? "text-blue-500" : "text-red-500"
                            )} 
                        />
                    )}
                  </AnimatePresence>
                  
                  {/* Phase Number Badge */}
                  <div className={cn("hidden md:flex absolute -left-[69px] top-0 w-12 h-12 rounded-2xl flex-col items-center justify-center font-black text-white shadow-lg transition-all duration-700 border-4 border-[#F8FAFC] z-20", isActive ? (activeDept === "FOH" ? "bg-[#004F71] scale-110" : "bg-[#E51636] scale-110") : "bg-slate-200 grayscale opacity-40")}><span className="text-[8px] opacity-60 uppercase font-black">Ph</span><span className="text-base">{idx + 1}</span></div>
                  
                  <div 
                    onClick={() => handleMobileCardClick(section.id)}
                    className={cn(
                        "bg-white rounded-[24px] md:rounded-[32px] p-5 md:p-8 border transition-all duration-700 relative group/card cursor-pointer lg:cursor-default z-10 flex flex-col", 
                        isActive ? "shadow-[0_25px_60px_-15px_rgba(0,0,0,0.15)] border-slate-200 scale-100 md:scale-[1.02] ring-1 ring-black/5" : "opacity-90 md:opacity-60 border-transparent md:hover:opacity-100 scale-95 md:scale-100 hover:scale-[0.98] md:hover:scale-[1.01]"
                    )}
                  >
                     <div className="flex justify-between items-start mb-6 md:mb-8 gap-4 md:gap-6">
                        <div className="flex-1 space-y-2 md:space-y-3">
                           <div className="flex items-center gap-3">
                              <div className={cn("flex items-center gap-1.5 px-3 py-1 rounded-full bg-slate-50 border border-slate-100 text-[10px] font-black uppercase text-slate-400 shadow-inner")}><CalendarClock className="w-3.5 h-3.5" /><input value={section.duration} onChange={e => updateSection(section.id, { duration: e.target.value })} onClick={(e) => e.stopPropagation()} className="bg-transparent border-none focus:outline-none w-20 p-0 font-black" /></div>
                              <span className="text-[10px] font-bold text-slate-300 uppercase tracking-widest">{section.tasks.length} Modules</span>
                           </div>
                           <input value={section.title} onChange={e => updateSection(section.id, { title: e.target.value })} onClick={(e) => e.stopPropagation()} className="text-xl md:text-4xl font-black text-slate-900 bg-transparent w-full outline-none border-none focus:ring-0 p-0 tracking-tighter" />
                        </div>
                        <div className="flex items-start gap-3 shrink-0" onClick={(e) => e.stopPropagation()}>
                            <div className="hidden md:block">
                                <PageRangeSelector start={section.pageStart} end={section.pageEnd} onUpdate={(u: any) => updateSection(section.id, u)} />
                            </div>
                            <button onClick={() => deleteDoc(doc(db, "curriculum", section.id))} className="p-2 md:p-3 text-slate-300 hover:text-red-500 transition-all bg-slate-50 rounded-xl md:rounded-2xl border border-slate-200 hover:shadow-md active:scale-90"><Trash2 className="w-4 h-4" /></button>
                        </div>
                     </div>
                     
                     <div className="space-y-3 md:space-y-2.5">
                        {section.tasks.map(task => (
                           <div key={task.id} className="group bg-slate-50/50 rounded-xl md:rounded-2xl p-4 md:p-4 border border-transparent hover:border-slate-200 hover:bg-white transition-all flex items-center gap-3 md:gap-4" onClick={(e) => e.stopPropagation()}>
                              <GripVertical className="w-4 h-4 text-slate-200" />
                              <div className="flex-1"><input value={task.title} onChange={e => {
                                    const newTasks = section.tasks.map(t => t.id === task.id ? { ...t, title: e.target.value } : t);
                                    updateSection(section.id, { tasks: newTasks });
                                 }} className="w-full bg-transparent text-sm font-bold text-slate-700 outline-none placeholder:text-slate-300" placeholder="Enter objective..." /></div>
                              <div className="flex items-center gap-2">
                                 {task.image && <div onClick={() => setViewingImage(task.image!)} className="w-8 h-8 rounded-lg overflow-hidden border-2 border-white shadow-sm cursor-zoom-in shrink-0"><img src={task.image} className="w-full h-full object-cover" /></div>}
                                 <label className="cursor-pointer p-2 hover:bg-blue-50 text-slate-300 hover:text-blue-500 rounded-lg transition-all opacity-0 group-hover:opacity-100 shrink-0"><Cloud className="w-4 h-4" /><input type="file" className="hidden" accept="image/*" onChange={e => handleFileUpload(section, task.id, e)} /></label>
                                 <button onClick={() => updateDoc(doc(db, "curriculum", section.id), { tasks: section.tasks.filter(t => t.id !== task.id) })} className="p-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 shrink-0"><X className="w-4 h-4" /></button>
                              </div>
                           </div>
                        ))}
                        <button onClick={(e) => {
                            e.stopPropagation();
                            const newTask = { id: Math.random().toString(36).substr(2, 9), title: "", duration: "15m" };
                            updateSection(section.id, { tasks: [...section.tasks, newTask] });
                        }} className="w-full py-4 md:py-3.5 border-2 border-dashed border-slate-200 rounded-xl md:rounded-2xl text-[10px] font-black uppercase text-slate-400 hover:border-[#004F71] hover:text-[#004F71] transition-all flex items-center justify-center gap-2 group"><Plus className="w-4 h-4 group-hover:rotate-90 transition-transform" /> Add Logic Block</button>
                     </div>
                     
                     {/* Mobile Only: Tap to View Manual Prompt */}
                     <div className="lg:hidden mt-6 flex justify-center text-slate-400 text-[9px] font-bold uppercase tracking-widest flex items-center gap-2 bg-slate-50 py-3 rounded-xl border border-slate-100">
                         <span>Tap card to open manual</span>
                         <ChevronRight className="w-3 h-3" />
                     </div>
                  </div>
               </div>
            )})}
            <button onClick={addSection} className="w-full py-12 md:py-16 border-4 border-dashed rounded-[32px] md:rounded-[44px] font-black uppercase transition-all flex flex-col items-center justify-center gap-4 group border-slate-200 text-slate-300 hover:border-[#004F71] hover:text-[#004F71] hover:bg-white mb-20 md:mb-0">
                <div className={cn("p-4 rounded-full transition-all group-hover:scale-110 shadow-sm bg-slate-50 group-hover:bg-[#004F71] group-hover:text-white")}><Plus className="w-8 h-8" /></div>
                <span className="text-lg md:text-xl tracking-tighter">Create New Phase</span>
            </button>
         </div>

         {/* === RIGHT: DESKTOP PREVIEW HUB (Hidden on Mobile) === */}
         <div className="hidden lg:block col-span-5 relative h-full">
            <div className="sticky top-[160px] z-40 transition-all duration-500">
               <div className={cn("absolute inset-0 bg-gradient-to-br opacity-30 blur-[100px] transition-colors duration-1000 -z-10", activeDept === "FOH" ? "from-blue-200" : "from-red-200")} />
               <div className="h-[calc(100vh-220px)] bg-white rounded-[44px] border border-slate-200/60 shadow-2xl overflow-hidden flex flex-col relative ring-1 ring-black/5">
                  <div className="px-7 py-5 border-b flex justify-between items-center bg-white/50 backdrop-blur-md shrink-0">
                     <div className="flex items-center gap-3"><div className={cn("p-2 rounded-xl text-white shadow-md", activeDept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]")}><BookOpen className="w-4 h-4" /></div><span className="text-[10px] font-black uppercase tracking-[0.2em] text-slate-900">Preview Hub</span></div>
                     <div className="flex items-center gap-3">
                        <span className="text-[9px] font-black text-slate-400 uppercase tracking-widest">Pages {activeSection?.pageStart || "?"}{activeSection?.pageEnd || "?"}</span>
                        <div className="w-2 h-2 rounded-full bg-emerald-500 shadow-[0_0_8px_#10b981]" />
                     </div>
                  </div>

                  <div className="flex-1 bg-slate-50 relative group isolate overflow-hidden">
                     <AnimatePresence mode="wait">
                        {iframeLoading && (
                            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 z-50 bg-white flex flex-col items-center justify-center p-12 text-center">
                                <Loader2 className={cn("w-10 h-10 animate-spin mb-6", activeDept === "FOH" ? "text-[#004F71]" : "text-[#E51636]")} />
                                <h3 className="text-sm font-black text-slate-900 uppercase tracking-tighter mb-1 leading-none">Syncing Intelligence</h3>
                                <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-relaxed mt-2">Loading Page {activeSection?.pageStart}...</p>
                            </motion.div>
                        )}
                     </AnimatePresence>
                     {getEmbedUrl() ? (
                        <iframe src={getEmbedUrl()!} className="w-full h-full border-none mix-blend-multiply transition-opacity duration-1000" loading="lazy" onLoad={() => setIframeLoading(false)} />
                     ) : (
                        <div className="w-full h-full flex flex-col items-center justify-center text-slate-300 gap-2"><BookOpen className="w-8 h-8 opacity-20" /><p className="text-[10px] font-bold uppercase tracking-widest">Phase data required</p></div>
                     )}
                  </div>
                  
                  <div className="px-7 py-4 bg-white/50 border-t border-slate-100 flex justify-between items-center shrink-0">
                      <span className="text-[9px] font-bold uppercase text-slate-300 tracking-widest leading-none">Trainingbook Command v4.0</span>
                      <a href={CANVA_LINKS[activeDept]} target="_blank" className="flex items-center gap-2 text-[10px] font-black text-blue-600 hover:underline uppercase tracking-widest transition-all"><Maximize2 className="w-3 h-3" /> Fullscreen</a>
                  </div>
               </div>
            </div>
         </div>
      </div>

      {/* --- MOBILE VIEWER MODAL (Full Screen) --- */}
      <AnimatePresence>
          {mobileViewerOpen && (
              <ClientPortal>
                  <div className="fixed inset-0 z-[200] lg:hidden flex items-end justify-center pointer-events-none">
                      {/* Backdrop */}
                      <motion.div 
                        initial={{ opacity: 0 }} 
                        animate={{ opacity: 1 }} 
                        exit={{ opacity: 0 }} 
                        onClick={() => setMobileViewerOpen(false)}
                        className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto"
                      />
                      
                      {/* Bottom Sheet Card */}
                      <motion.div 
                        initial={{ y: "100%" }} 
                        animate={{ y: 0 }} 
                        exit={{ y: "100%" }} 
                        transition={{ type: "spring", damping: 25, stiffness: 300 }} 
                        drag="y"
                        dragControls={dragControls}
                        dragListener={false} // DISALLOW dragging from body
                        dragConstraints={{ top: 0, bottom: 0 }}
                        dragElastic={0.05}
                        onDragEnd={(_, info) => {
                            if (info.offset.y > 100) setMobileViewerOpen(false);
                        }}
                        className="pointer-events-auto bg-white w-full h-[92vh] rounded-t-[40px] shadow-2xl relative flex flex-col overflow-hidden"
                      >
                          {/* Drag Handle Area - ONLY THIS AREA TRIGGERS DRAG */}
                          <div 
                              className="absolute top-0 left-0 right-0 h-10 flex justify-center items-center z-50 bg-white/80 backdrop-blur-sm cursor-grab active:cursor-grabbing touch-none"
                              onPointerDown={(e) => dragControls.start(e)}
                          >
                              <div className="w-12 h-1.5 bg-slate-300 rounded-full" />
                          </div>

                          {/* Sheet Header */}
                          <div className="px-6 py-4 pt-10 border-b border-slate-100 flex justify-between items-center shrink-0 bg-white z-40">
                                <div className="flex flex-col">
                                    <span className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] mb-1">{activeSection?.title || "Manual"}</span>
                                    <div className="flex items-center gap-2">
                                        <div className={cn("w-2 h-2 rounded-full", activeDept === "FOH" ? "bg-[#004F71]" : "bg-[#E51636]")} />
                                        <span className="text-lg font-bold text-slate-900 leading-none">Pages {activeSection?.pageStart || "?"} - {activeSection?.pageEnd || "?"}</span>
                                    </div>
                                </div>
                                <button onClick={() => setMobileViewerOpen(false)} className="p-2.5 bg-slate-100 rounded-full active:scale-95 transition-all"><Minimize2 className="w-5 h-5 text-slate-500" /></button>
                          </div>
                          
                          {/* Viewer Body - PURE SCROLL, NO DRAG */}
                          <div className="flex-1 relative bg-slate-50 overflow-y-auto no-scrollbar touch-pan-y">
                             {iframeLoading && (
                                <div className="absolute inset-0 z-50 flex flex-col items-center justify-center bg-slate-50">
                                    <Loader2 className={cn("w-10 h-10 animate-spin mb-4", activeDept === "FOH" ? "text-[#004F71]" : "text-[#E51636]")} />
                                    <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Loading Manual...</span>
                                </div>
                             )}
                             {getEmbedUrl() ? (
                                <iframe src={getEmbedUrl()!} className="w-full h-full border-none" loading="lazy" onLoad={() => setIframeLoading(false)} />
                             ) : (
                                <div className="w-full h-full flex flex-col items-center justify-center text-slate-300"><BookOpen className="w-12 h-12 opacity-20 mb-2" /><p>No content available</p></div>
                             )}
                          </div>
                          
                          {/* Floating Bottom Controls */}
                          <div className="absolute bottom-8 left-1/2 -translate-x-1/2 z-50 flex items-center gap-4 w-full justify-center px-4">
                              <div className="flex-1 max-w-[280px]">
                                <PageRangeSelector start={activeSection?.pageStart} end={activeSection?.pageEnd} onUpdate={(u: any) => activeSectionId && updateSection(activeSectionId, u)} />
                              </div>
                              <a href={CANVA_LINKS[activeDept]} target="_blank" className="p-3.5 bg-white/90 backdrop-blur-md border border-white/40 rounded-full text-slate-600 shadow-lg hover:text-slate-900 active:scale-95 transition-all"><Maximize2 className="w-5 h-5" /></a>
                          </div>
                      </motion.div>
                  </div>
              </ClientPortal>
          )}
      </AnimatePresence>

      <AnimatePresence>{viewingImage && (
            <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="fixed inset-0 z-[200] bg-slate-950/90 backdrop-blur-2xl flex items-center justify-center p-10 cursor-zoom-out" onClick={() => setViewingImage(null)}><motion.div initial={{ scale: 0.9, y: 20 }} animate={{ scale: 1, y: 0 }} className="relative max-w-5xl w-full"><img src={viewingImage} className="w-full h-auto rounded-3xl shadow-2xl border border-white/10" /><button onClick={() => setViewingImage(null)} className="absolute -top-12 right-0 p-3 bg-white/10 text-white rounded-full hover:bg-white/20 transition-all"><X className="w-6 h-6" /></button></motion.div></motion.div>
      )}</AnimatePresence>
    </div>
  );
}
--- FILE: ./app/(main)/dashboard/page.tsx ---
"use client";

import { useState, useEffect, useMemo, useRef } from "react";
import { motion, AnimatePresence } from "framer-motion";
import { 
  Users, Clock, AlertCircle, 
  Target, CheckSquare, X,
  Trophy, CalendarRange, ChevronRight,
  Activity, CalendarDays,
  ArrowRight, GraduationCap,
  BookOpen, Sparkles, User, Plus, Edit3, Trash2, FileText, CheckCircle2, Loader2,
  Zap, Shield, MessageSquare, Flag, Mountain, Rocket, Crosshair, LayoutList, Search
} from "lucide-react";
import { cn } from "@/lib/utils";
import { format, isSameMonth, formatDistanceToNow, isFuture } from "date-fns";

// Firebase & Store Integration
import { useAppStore } from "@/lib/store/useStore";
import { db } from "@/lib/firebase";
import { collection, query, orderBy, limit, onSnapshot, deleteDoc, doc, updateDoc, serverTimestamp } from "firebase/firestore";
import toast from "react-hot-toast";

// Shared Types
import { CalendarEvent, TeamMember, EventType, getEventLabel } from "../calendar/_components/types";
import EventDetailSheet from "../calendar/_components/EventDetailSheet";
import OneOnOneSessionModal from "../calendar/_components/OneOnOneSessionModal";
import ClientPortal from "@/components/core/ClientPortal";

// --- REUSABLE UI COMPONENTS ---

const GlassCard = ({ children, className, onClick }: { children: React.ReactNode, className?: string, onClick?: () => void }) => (
  <motion.div 
    whileHover={onClick ? { scale: 1.02, y: -2 } : {}}
    whileTap={onClick ? { scale: 0.98 } : {}}
    onClick={onClick}
    className={cn(
      "bg-white border border-slate-100 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] rounded-[24px] md:rounded-[32px] overflow-hidden relative transition-all duration-300", 
      onClick && "cursor-pointer hover:shadow-xl hover:border-slate-200",
      className
    )}
  >
    {children}
  </motion.div>
);

const ActivityIcon = ({ type }: { type: EventType | 'System' }) => {
    switch (type) {
        case "Training": return <div className="w-8 h-8 rounded-xl bg-[#004F71]/10 flex items-center justify-center text-[#004F71] shadow-sm relative z-10 ring-4 ring-white"><Shield className="w-4 h-4" /></div>;
        case "Goal": return <div className="w-8 h-8 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600 shadow-sm relative z-10 ring-4 ring-white"><Target className="w-4 h-4" /></div>;
        case "Deadline": return <div className="w-8 h-8 rounded-xl bg-[#E51636]/10 flex items-center justify-center text-[#E51636] shadow-sm relative z-10 ring-4 ring-white"><Zap className="w-4 h-4" /></div>;
        case "OneOnOne": return <div className="w-8 h-8 rounded-xl bg-purple-50 flex items-center justify-center text-purple-600 shadow-sm relative z-10 ring-4 ring-white"><MessageSquare className="w-4 h-4" /></div>;
        default: return <div className="w-8 h-8 rounded-xl bg-slate-50 flex items-center justify-center text-slate-500 shadow-sm relative z-10 ring-4 ring-white"><Activity className="w-4 h-4" /></div>;
    }
};

// --- REDESIGNED KPI MODAL (Chick-fil-A / Web App Style) ---
interface KPIModalProps {
    title: string;
    items: { id: string; title: string; subtitle: string; icon?: any; status?: string, rawEvent?: CalendarEvent }[];
    onClose: () => void;
    color: string;
    icon: any;
    onItemClick?: (item: any) => void;
}

const KPIModal = ({ title, items, onClose, color, icon: Icon, onItemClick }: KPIModalProps) => {
    return (
        <ClientPortal>
            <div className="fixed inset-0 z-[200] flex items-end md:items-center justify-center p-4">
                <motion.div 
                    initial={{ opacity: 0 }} 
                    animate={{ opacity: 1 }} 
                    exit={{ opacity: 0 }} 
                    className="absolute inset-0 bg-[#0F172A]/60 backdrop-blur-md" 
                    onClick={onClose} 
                />
                <motion.div 
                    initial={{ scale: 0.9, opacity: 0, y: 50 }} 
                    animate={{ scale: 1, opacity: 1, y: 0 }} 
                    exit={{ scale: 0.9, opacity: 0, y: 50 }}
                    transition={{ type: "spring", damping: 25, stiffness: 300 }}
                    className="bg-[#F8FAFC] w-full max-w-2xl rounded-[40px] shadow-2xl relative overflow-hidden flex flex-col max-h-[85vh] border border-white/40 ring-1 ring-black/5"
                >
                    {/* --- HEADER --- */}
                    <div className={cn("p-8 pt-10 text-white relative overflow-hidden shrink-0", color)}>
                        {/* Atmospheric Glows */}
                        <div className="absolute -top-20 -right-20 w-64 h-64 bg-white/20 rounded-full blur-[80px] pointer-events-none" />
                        <div className="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10 mix-blend-overlay" />
                        
                        <div className="relative z-10 flex items-start justify-between">
                            <div className="flex items-center gap-5">
                                <div className="w-16 h-16 rounded-3xl bg-white/10 border border-white/20 backdrop-blur-md shadow-2xl flex items-center justify-center">
                                    <Icon className="w-8 h-8 text-white drop-shadow-md" />
                                </div>
                                <div>
                                    <div className="flex items-center gap-2 mb-1">
                                        <div className="w-1.5 h-1.5 rounded-full bg-white animate-pulse" />
                                        <span className="text-[10px] font-black uppercase tracking-[0.3em] text-white/80">System Record</span>
                                    </div>
                                    <h2 className="text-3xl font-[1000] tracking-tighter leading-none">{title}</h2>
                                    <p className="text-white/60 font-medium text-sm mt-1">{items.length} Active Entries</p>
                                </div>
                            </div>
                            <button 
                                onClick={onClose} 
                                className="p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all text-white border border-white/10 active:scale-90"
                            >
                                <X className="w-5 h-5" />
                            </button>
                        </div>
                    </div>
                    
                    {/* --- SEARCH BAR (Visual Only for polish) --- */}
                    <div className="px-6 py-4 bg-white border-b border-slate-100 flex items-center gap-3 sticky top-0 z-20">
                        <Search className="w-4 h-4 text-slate-400" />
                        <input type="text" placeholder={`Search ${title}...`} className="w-full bg-transparent text-sm font-bold text-slate-700 outline-none placeholder:text-slate-300" />
                        <div className="text-[9px] font-black bg-slate-100 text-slate-400 px-2 py-1 rounded-md">CMD+F</div>
                    </div>

                    {/* --- LIST CONTENT --- */}
                    <div className="flex-1 overflow-y-auto p-6 space-y-3 bg-[#F8FAFC]">
                        {items.length > 0 ? (
                            items.map((item, i) => (
                                <motion.div 
                                    initial={{ opacity: 0, x: -20 }} 
                                    animate={{ opacity: 1, x: 0 }} 
                                    transition={{ delay: i * 0.04 }}
                                    key={item.id} 
                                    onClick={() => onItemClick && onItemClick(item)}
                                    className={cn(
                                        "group bg-white p-4 rounded-[20px] border border-slate-100 shadow-sm flex items-center gap-5 hover:shadow-xl hover:border-slate-200 transition-all relative overflow-hidden",
                                        onItemClick && "cursor-pointer"
                                    )}
                                >
                                    {/* Color Indicator Strip */}
                                    <div className={cn("absolute left-0 top-0 bottom-0 w-1.5", color)} />

                                    <div className={cn("w-12 h-12 rounded-2xl flex items-center justify-center font-black text-lg shadow-inner shrink-0 transition-transform group-hover:scale-110", color.replace('bg-', 'bg-').replace('600', '50').replace('#', ''))}>
                                        <div className={cn("opacity-10 absolute inset-0", color)} />
                                        {/* Dynamic Icon Color */}
                                        <span className={cn("relative z-10", color.replace('bg-', 'text-'))}>
                                            {item.icon ? <item.icon className="w-6 h-6" /> : item.title.charAt(0)}
                                        </span>
                                    </div>

                                    <div className="flex-1 min-w-0">
                                        <div className="flex items-center gap-2 mb-0.5">
                                            <p className="text-sm font-[800] text-slate-900 truncate group-hover:text-[#E51636] transition-colors">{item.title}</p>
                                            {item.status && (
                                                <span className={cn(
                                                    "px-2 py-0.5 rounded-md text-[8px] font-black uppercase tracking-wider border",
                                                    item.status === 'High' || item.status === 'FOH' 
                                                        ? "bg-blue-50 text-[#004F71] border-blue-100" 
                                                        : "bg-slate-50 text-slate-500 border-slate-100"
                                                )}>
                                                    {item.status}
                                                </span>
                                            )}
                                        </div>
                                        <p className="text-[11px] font-bold text-slate-400 truncate uppercase tracking-wide flex items-center gap-1.5">
                                            {item.subtitle}
                                        </p>
                                    </div>

                                    {onItemClick && (
                                        <div className="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center group-hover:bg-[#E51636] group-hover:text-white transition-colors shadow-sm">
                                            <ChevronRight className="w-4 h-4" />
                                        </div>
                                    )}
                                </motion.div>
                            ))
                        ) : (
                            <div className="flex flex-col items-center justify-center h-64 text-slate-400 border-2 border-dashed border-slate-200 rounded-[32px] mx-4">
                                <div className="p-4 bg-slate-100 rounded-full mb-3"><Activity className="w-6 h-6 opacity-50" /></div>
                                <p className="text-[10px] font-bold uppercase tracking-widest">System Empty</p>
                            </div>
                        )}
                    </div>
                    
                    {/* --- FOOTER --- */}
                    <div className="p-4 bg-white border-t border-slate-100 flex justify-between items-center text-[10px] font-bold text-slate-400 uppercase tracking-widest px-8">
                        <span>Synced: {new Date().toLocaleTimeString()}</span>
                        <span>v4.2.0</span>
                    </div>
                </motion.div>
            </div>
        </ClientPortal>
    );
};

// ... (StrategicVisionBoard remains unchanged) ...
const StrategicVisionBoard = () => {
    return (
        <motion.div 
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.6, ease: "easeOut" }}
            className="bg-[#004F71] rounded-[32px] md:rounded-[40px] p-5 md:p-8 text-white shadow-2xl relative overflow-hidden group isolate"
        >
            <div className="absolute -top-[150px] -right-[150px] w-[400px] md:w-[600px] h-[400px] md:h-[600px] bg-gradient-to-b from-[#E51636] via-[#E51636]/40 to-transparent opacity-30 blur-[100px] md:blur-[120px] rounded-full pointer-events-none mix-blend-screen animate-pulse duration-[5000ms]" />
            <div className="absolute -bottom-[200px] -left-[100px] w-[300px] md:w-[500px] h-[300px] md:h-[500px] bg-[#06b6d4] opacity-10 blur-[80px] md:blur-[100px] rounded-full pointer-events-none mix-blend-screen" />
            <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-[0.07] mix-blend-overlay pointer-events-none" />
            
            <div className="relative z-10 flex flex-col h-full justify-between">
                <div className="flex flex-col md:flex-row md:items-center justify-between mb-6 md:mb-10 gap-4">
                    <div className="flex items-center gap-4">
                        <div className="p-2.5 md:p-3 bg-white/10 rounded-2xl border border-white/20 backdrop-blur-md shadow-[0_0_20px_rgba(255,255,255,0.1)] flex items-center justify-center shrink-0">
                            <Rocket className="w-5 h-5 md:w-6 md:h-6 text-white drop-shadow-md" />
                        </div>
                        <div className="space-y-0.5 md:space-y-1">
                            <h2 className="text-xl md:text-3xl font-[1000] tracking-tighter leading-none text-white drop-shadow-sm">Strategic Vision</h2>
                            <div className="flex items-center gap-2">
                                <div className="w-6 md:w-8 h-0.5 bg-gradient-to-r from-[#E51636] to-transparent rounded-full" />
                                <p className="text-[8px] md:text-[10px] font-bold text-blue-100 uppercase tracking-[0.3em]">Command Directives</p>
                            </div>
                        </div>
                    </div>
                    <button className="hidden md:flex group/btn relative px-6 py-2.5 bg-white/10 hover:bg-white/20 rounded-full text-[9px] font-black uppercase tracking-widest border border-white/10 transition-all overflow-hidden items-center gap-2 hover:border-white/30 hover:scale-105 active:scale-95">
                        <span className="relative z-10">Update Vision</span>
                        <ChevronRight className="w-3 h-3 relative z-10 group-hover/btn:translate-x-1 transition-transform" />
                    </button>
                </div>

                <div className="grid grid-cols-3 gap-2 md:gap-6">
                    <div className="relative bg-gradient-to-b from-white/10 to-white/5 border border-white/10 rounded-[24px] md:rounded-[32px] p-3 md:p-6 backdrop-blur-md hover:bg-white/15 transition-all duration-500 group/card flex flex-col justify-between h-auto md:h-40 shadow-lg hover:-translate-y-1">
                        <div className="flex flex-col md:flex-row md:justify-between items-center md:items-start gap-1 md:gap-0">
                            <div className="flex items-center gap-1.5 md:gap-2.5 text-cyan-300 bg-cyan-500/10 px-2 py-1 md:px-3 md:py-1.5 rounded-full border border-cyan-500/20">
                                <Zap className="w-3 h-3 md:w-3.5 md:h-3.5 fill-current" />
                                <span className="text-[7px] md:text-[9px] font-black uppercase tracking-widest">Weekly</span>
                            </div>
                            <span className="text-xl md:text-[10px] font-black text-white md:text-white/80 md:bg-black/20 md:px-2 md:py-1 rounded-lg">65%</span>
                        </div>
                        <div className="space-y-2 md:space-y-3 mt-1 md:mt-0 text-center md:text-left">
                            <h3 className="text-[9px] md:text-base font-bold leading-tight text-white/80 md:text-white/90 line-clamp-2 md:line-clamp-none">Speed of Service</h3>
                            <div className="h-1 md:h-1.5 w-full bg-black/30 rounded-full overflow-hidden p-[1px]">
                                <motion.div initial={{ width: 0 }} animate={{ width: "65%" }} transition={{ duration: 1.5, delay: 0.2, ease: "circOut" }} className="h-full bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full relative">
                                    <div className="absolute right-0 top-0 bottom-0 w-2 bg-white/50 blur-[2px]" />
                                </motion.div>
                            </div>
                        </div>
                    </div>

                    <div className="relative bg-gradient-to-b from-white/10 to-white/5 border border-white/10 rounded-[24px] md:rounded-[32px] p-3 md:p-6 backdrop-blur-md hover:bg-white/15 transition-all duration-500 group/card flex flex-col justify-between h-auto md:h-40 shadow-lg hover:-translate-y-1">
                        <div className="flex flex-col md:flex-row md:justify-between items-center md:items-start gap-1 md:gap-0">
                            <div className="flex items-center gap-1.5 md:gap-2.5 text-emerald-300 bg-emerald-500/10 px-2 py-1 md:px-3 md:py-1.5 rounded-full border border-emerald-500/20">
                                <Crosshair className="w-3 h-3 md:w-3.5 md:h-3.5 fill-current" />
                                <span className="text-[7px] md:text-[9px] font-black uppercase tracking-widest">Monthly</span>
                            </div>
                            <span className="text-xl md:text-[10px] font-black text-white md:text-white/80 md:bg-black/20 md:px-2 md:py-1 rounded-lg">3/5</span>
                        </div>
                        <div className="space-y-2 md:space-y-3 mt-1 md:mt-0 text-center md:text-left">
                            <h3 className="text-[9px] md:text-base font-bold leading-tight text-white/80 md:text-white/90 line-clamp-2 md:line-clamp-none">New Leaders</h3>
                            <div className="h-1 md:h-1.5 w-full bg-black/30 rounded-full overflow-hidden p-[1px]">
                                <motion.div initial={{ width: 0 }} animate={{ width: "60%" }} transition={{ duration: 1.5, delay: 0.4, ease: "circOut" }} className="h-full bg-gradient-to-r from-emerald-400 to-emerald-300 rounded-full relative">
                                    <div className="absolute right-0 top-0 bottom-0 w-2 bg-white/50 blur-[2px]" />
                                </motion.div>
                            </div>
                        </div>
                    </div>

                    <div className="relative bg-gradient-to-br from-[#E51636]/30 to-black/20 border border-[#E51636]/40 rounded-[24px] md:rounded-[32px] p-3 md:p-6 backdrop-blur-xl hover:bg-[#E51636]/40 transition-all duration-500 group/card flex flex-col justify-between h-auto md:h-40 shadow-xl shadow-red-900/20 hover:-translate-y-1 overflow-hidden ring-1 ring-white/5">
                        <div className="absolute top-0 right-0 p-12 bg-gradient-to-br from-[#E51636] to-transparent opacity-20 blur-xl rounded-full translate-x-1/2 -translate-y-1/2 group-hover/card:opacity-30 transition-opacity" />
                        <div className="flex flex-col md:flex-row md:justify-between items-center md:items-start gap-1 md:gap-0 relative z-10">
                            <div className="flex items-center gap-1.5 md:gap-2.5 text-red-100 bg-[#E51636]/20 px-2 py-1 md:px-3 md:py-1.5 rounded-full border border-[#E51636]/30 shadow-inner">
                                <Mountain className="w-3 h-3 md:w-3.5 md:h-3.5 fill-current" />
                                <span className="text-[7px] md:text-[9px] font-black uppercase tracking-widest">North Star</span>
                            </div>
                            <span className="text-xl md:text-[10px] font-black text-[#ffcccc] md:bg-[#E51636]/30 md:px-2 md:py-1 rounded-lg md:border md:border-[#E51636]/20">15%</span>
                        </div>
                        <div className="space-y-2 md:space-y-3 mt-1 md:mt-0 relative z-10 text-center md:text-left">
                            <h3 className="text-[9px] md:text-base font-bold leading-tight text-white/90 drop-shadow-sm line-clamp-2 md:line-clamp-none">Hospitality Score</h3>
                            <div className="h-1 md:h-1.5 w-full bg-black/40 rounded-full overflow-hidden p-[1px] shadow-inner">
                                <motion.div initial={{ width: 0 }} animate={{ width: "85%" }} transition={{ duration: 1.5, delay: 0.6, ease: "circOut" }} className="h-full bg-gradient-to-r from-E51636 via-red-500 to-orange-500 rounded-full relative">
                                    <div className="absolute right-0 top-0 bottom-0 w-3 bg-white/60 blur-[3px] animate-pulse" />
                                </motion.div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </motion.div>
    );
}

// --- MAIN PAGE ---

export default function DashboardPage() {
  const { events, team, loading, subscribeEvents, subscribeTeam } = useAppStore();
  const [currentTime, setCurrentTime] = useState(new Date());
  
  // Modals State
  const [selectedEvent, setSelectedEvent] = useState<CalendarEvent | null>(null);
  const [selected1on1, setSelected1on1] = useState<CalendarEvent | null>(null);
  const [activeKPI, setActiveKPI] = useState<{ title: string; items: any[]; color: string; icon: any } | null>(null);

  // Tab State for Mobile Scroll
  const [activeTab, setActiveTab] = useState<'live' | 'next'>('live');
  const scrollRef = useRef<HTMLDivElement>(null);
  const feedRef = useRef<HTMLDivElement>(null);
  const nextRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const unsubEvents = subscribeEvents();
    const unsubTeam = subscribeTeam();
    const timer = setInterval(() => setCurrentTime(new Date()), 1000);
    return () => { unsubEvents(); unsubTeam(); clearInterval(timer); };
  }, [subscribeEvents, subscribeTeam]);

  // Scroll Observer for Tabs
  useEffect(() => {
    const container = scrollRef.current;
    if (!container) return;

    const handleScroll = () => {
        const scrollLeft = container.scrollLeft;
        const width = container.clientWidth;
        if (scrollLeft > width * 0.3) {
            setActiveTab('next');
        } else {
            setActiveTab('live');
        }
    };

    container.addEventListener('scroll', handleScroll);
    return () => container.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (section: 'live' | 'next') => {
      if (!scrollRef.current) return;
      if (section === 'live') {
          feedRef.current?.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
      } else {
          nextRef.current?.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
      }
  };

  const kpis = useMemo(() => {
    const certifiedLeaders = team.filter(m => m.status === "Director" || m.status === "Assistant Director");
    const monthlyOneOnOnes = events.filter(e => e.type === "OneOnOne" && isSameMonth(e.startDate, new Date()));
    const activeGoals = events.filter(e => e.type === "Goal" && e.status !== "Done");

    return [
      { id: "leaders", label: "Certified Leaders", value: certifiedLeaders.length.toString(), icon: GraduationCap, color: "bg-[#004F71]", modalColor: "bg-[#004F71]", trend: "Live Count", data: certifiedLeaders.map(l => ({ id: l.id, title: l.name, subtitle: l.role, icon: User, status: l.dept })) },
      { id: "1on1s", label: "1-on-1s (MTD)", value: monthlyOneOnOnes.length.toString(), icon: Users, color: "text-purple-600", bg: "bg-purple-50", modalColor: "bg-purple-600", trend: "Monthly Cadence", data: monthlyOneOnOnes.map(e => ({ id: e.id, title: e.title, subtitle: `with ${e.teamMemberName}`, icon: MessageSquare, status: e.status, rawEvent: e })) },
      { id: "goals", label: "Active Goals", value: activeGoals.length.toString(), icon: Target, color: "text-[#E51636]", bg: "bg-[#E51636]/5", modalColor: "bg-[#E51636]", trend: "Strategic Focus", data: activeGoals.map(g => ({ id: g.id, title: g.title, subtitle: `Assigned to ${g.assigneeName}`, icon: Target, status: g.priority, rawEvent: g })) },
      { id: "roster", label: "Total Roster", value: team.length.toString(), icon: Activity, color: "text-emerald-600", bg: "bg-emerald-50", modalColor: "bg-emerald-600", trend: "Headcount", data: team.map(t => ({ id: t.id, title: t.name, subtitle: t.role, icon: User, status: t.dept })) },
    ];
  }, [team, events]);

  const activityFeed = useMemo(() => {
      return [...events].sort((a, b) => {
          const aCreated = (a as any).createdAt;
          const bCreated = (b as any).createdAt;
          const dateA = aCreated?.toDate ? aCreated.toDate() : new Date(a.startDate);
          const dateB = bCreated?.toDate ? bCreated.toDate() : new Date(b.startDate);
          return dateB.getTime() - dateA.getTime();
      }).slice(0, 8); 
  }, [events]);

  const nextSession = useMemo(() => {
    return events.filter(e => e.type === "OneOnOne" && isFuture(e.startDate)).sort((a, b) => a.startDate.getTime() - b.startDate.getTime())[0];
  }, [events]);

  const handleDeleteEvent = async (id: string) => { const loadToast = toast.loading("Decommissioning..."); try { await deleteDoc(doc(db, "events", id)); toast.success("Terminated", { id: loadToast }); setSelectedEvent(null); } catch (e) { toast.error("Error", { id: loadToast }); } };
  const handleUpdateEvent = async (id: string, updates: any) => { const loadToast = toast.loading("Updating..."); try { await updateDoc(doc(db, "events", id), { ...updates, updatedAt: serverTimestamp() }); toast.success("Synced", { id: loadToast }); setSelectedEvent(null); } catch (e) { toast.error("Error", { id: loadToast }); } };
  const handleUpdate1on1 = async (updatedEvent: CalendarEvent) => { const loadToast = toast.loading("Updating Session..."); try { await updateDoc(doc(db, "events", updatedEvent.id), { description: updatedEvent.description, subtasks: updatedEvent.subtasks, status: updatedEvent.status, updatedAt: serverTimestamp() }); toast.success("Session Updated", { id: loadToast }); setSelected1on1(null); } catch (e) { toast.error("Error", { id: loadToast }); } };
  const handleKPIItemClick = (item: any) => { if (item.rawEvent) { if (item.rawEvent.type === "OneOnOne") { setSelected1on1(item.rawEvent); } else { setSelectedEvent(item.rawEvent); } } };

  if (loading && team.length === 0) return <div className="h-screen flex flex-col items-center justify-center bg-[#F8FAFC] gap-4"><Loader2 className="w-10 h-10 animate-spin text-[#E51636]" /><p className="text-xs font-black text-slate-400 uppercase tracking-[0.2em]">Synchronizing Operations...</p></div>;

  return (
    <div className="min-h-screen bg-[#F8FAFC] p-4 md:p-6 pb-20 font-sans text-slate-900 relative overflow-hidden">
      
      {/* Background Blurs */}
      <div className="fixed inset-0 pointer-events-none">
        <div className="absolute top-[-20%] left-[-10%] w-[800px] md:w-[1400px] h-[800px] md:h-[1400px] bg-gradient-to-br from-blue-50/40 via-purple-50/20 to-transparent rounded-full blur-[100px] md:blur-[150px]" />
        <div className="absolute bottom-[-10%] right-[-10%] w-[600px] md:w-[1000px] h-[600px] md:h-[1000px] bg-gradient-to-tl from-red-50/30 to-transparent rounded-full blur-[100px] md:blur-[150px]" />
      </div>

      <div className="max-w-[1400px] mx-auto relative z-10 space-y-6 md:space-y-8 mt-4 md:mt-12">
        <div className="flex flex-col md:flex-row md:items-end justify-between gap-6 pb-1">
          <motion.div initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }}>
             <div className="flex flex-col md:flex-row md:items-center gap-3 mb-2">
                <div className="px-3 py-1 bg-white border border-slate-100 rounded-full text-[10px] font-black uppercase tracking-widest text-slate-500 shadow-sm flex items-center justify-center md:justify-start gap-2 w-fit">
                  <CalendarDays className="w-3 h-3 text-[#E51636]" />
                  {format(currentTime, "EEEE, MMMM do")}
                  <div className="w-px h-3 bg-slate-200 mx-1 hidden md:block" />
                  <span className="tabular-nums text-slate-900">{format(currentTime, "h:mm aa")}</span>
                </div>
                <span className="flex items-center gap-1.5 px-2.5 py-1 bg-[#004F71] border border-[#004F71] rounded-full text-[9px] font-black uppercase tracking-widest text-white shadow-lg shadow-blue-900/20 w-fit">
                  <Sparkles className="w-2.5 h-2.5 fill-current" />
                  Command Center
                </span>
             </div>
             <h1 className="text-4xl md:text-5xl font-black tracking-tighter text-slate-900 leading-tight">
               Ops<span className="text-[#E51636]">Overview</span>
             </h1>
          </motion.div>
        </div>

        <StrategicVisionBoard />

        <div className="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4">
           {kpis.map((kpi, idx) => (
             <GlassCard key={idx} onClick={() => setActiveKPI({ title: kpi.label, items: kpi.data, color: kpi.modalColor, icon: kpi.icon })} className="p-4 md:p-5 flex flex-col justify-between h-28 md:h-32 group hover:-translate-y-1 hover:shadow-lg transition-all duration-500">
                <div className="flex justify-between items-start">
                   <div className="flex items-center gap-2 md:gap-3">
                      <div className={cn("p-1.5 md:p-2 rounded-xl transition-transform group-hover:scale-110 duration-500 shadow-sm", kpi.bg || "bg-slate-100", kpi.color)}><kpi.icon className="w-3.5 h-3.5 md:w-4 md:h-4" /></div>
                      <span className="text-[8px] md:text-[9px] font-black uppercase tracking-[0.2em] text-slate-400 hidden md:block">{kpi.label}</span>
                      <span className="text-[8px] font-black uppercase tracking-[0.1em] text-slate-400 md:hidden">{kpi.label.split(' ')[0]}</span>
                   </div>
                   <div className="h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse shadow-[0_0_8px_#10b981]" />
                </div>
                <div><div className="text-3xl md:text-4xl font-[1000] text-slate-900 tracking-tighter">{kpi.value}</div><div className="mt-1 text-[8px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5"><div className="w-3 h-px bg-slate-200" /> <span className="truncate">{kpi.trend}</span></div></div>
             </GlassCard>
           ))}
        </div>

        {/* --- MOBILE TABS HEADER --- */}
        <div className="flex lg:hidden items-center gap-6 px-1 mb-2">
            <button onClick={() => scrollToSection('live')} className={cn("text-lg font-black transition-colors relative", activeTab === 'live' ? "text-slate-900" : "text-slate-300")}>
                Live Feed
                {activeTab === 'live' && <motion.div layoutId="mobileTab" className="absolute -bottom-1 left-0 right-0 h-1 bg-[#E51636] rounded-full" />}
            </button>
            <button onClick={() => scrollToSection('next')} className={cn("text-lg font-black transition-colors relative", activeTab === 'next' ? "text-slate-900" : "text-slate-300")}>
                Up Next
                {activeTab === 'next' && <motion.div layoutId="mobileTab" className="absolute -bottom-1 left-0 right-0 h-1 bg-[#E51636] rounded-full" />}
            </button>
        </div>

        {/* --- HORIZONTAL SCROLL CONTAINER FOR MOBILE --- */}
        <div 
            ref={scrollRef}
            className="flex lg:grid lg:grid-cols-12 gap-4 lg:gap-6 overflow-x-auto lg:overflow-visible snap-x snap-mandatory [&::-webkit-scrollbar]:hidden [-ms-overflow-style:'none'] [scrollbar-width:'none'] -mx-4 px-4 pb-8 lg:mx-0 lg:px-0 lg:pb-0"
        >
          
          {/* LIVE FEED PANEL (First on Mobile, Main Content on Desktop) */}
          <div ref={feedRef} className="min-w-[90vw] md:min-w-[50vw] lg:min-w-0 col-span-12 lg:col-span-8 lg:col-start-1 lg:row-start-1 flex flex-col gap-4 snap-center h-fit">
             <div className="hidden lg:flex items-center justify-between px-1">
                 <div className="flex items-center gap-2">
                     <LayoutList className="w-4 h-4 text-[#E51636]" />
                     <h3 className="text-lg font-black text-slate-900 tracking-tight">Live Operational Feed</h3>
                 </div>
                 <div className="px-2 py-0.5 bg-white border border-slate-100 rounded-full text-[8px] font-black uppercase tracking-widest text-slate-400">Real-time</div>
             </div>

             {/* WRAPPER FOR UNIFIED LOOK ON MOBILE */}
             <div className="bg-white border border-slate-100 lg:bg-transparent lg:border-0 rounded-[32px] p-4 lg:p-0 shadow-[0_4px_20px_-4px_rgba(0,0,0,0.05)] lg:shadow-none relative h-full">
                
                {/* Mobile-only decorative header for the "Card" look */}
                <div className="lg:hidden absolute top-3 left-1/2 -translate-x-1/2 w-12 h-1 bg-slate-200 rounded-full mb-4 opacity-50" />

                {/* TIMELINE LIST STYLE FOR MOBILE */}
                <div className="relative pl-6 lg:pl-0 mt-4 lg:mt-0">
                    <div className="absolute left-[15px] top-4 bottom-4 w-[2px] bg-slate-100 lg:hidden" />
                    
                    <div className="grid grid-cols-1 gap-3 md:gap-3">
                        <AnimatePresence>
                            {activityFeed.map((event, i) => {
                                const isDone = event.status === "Done";
                                return (
                                    <motion.div 
                                        key={event.id}
                                        layoutId={`event-card-${event.id}`}
                                        initial={{ opacity: 0, x: -10 }}
                                        animate={{ opacity: 1, x: 0 }}
                                        onClick={() => { if(event.type === 'OneOnOne') setSelected1on1(event); else setSelectedEvent(event); }}
                                        transition={{ delay: i * 0.05 }}
                                        className="group relative bg-white lg:bg-white p-3 md:p-4 rounded-[20px] md:rounded-[24px] border border-slate-100 shadow-sm hover:shadow-md hover:border-slate-200 transition-all duration-300 flex items-start gap-3 md:gap-4 overflow-hidden cursor-pointer"
                                    >
                                        <div className={cn("hidden lg:block absolute left-0 top-0 bottom-0 w-1 transition-colors", event.priority === 'High' ? "bg-[#E51636]" : "bg-[#004F71]/50")} />
                                        
                                        {/* Mobile: Connector Dot */}
                                        <div className="lg:hidden absolute -left-[25px] top-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2 border-white bg-slate-300 z-10" />

                                        <ActivityIcon type={event.type} />
                                        <div className="flex-1 min-w-0">
                                            <div className="flex items-center justify-between mb-0.5">
                                                <div className="flex items-center gap-2"><span className="text-[8px] md:text-[9px] font-black uppercase tracking-widest text-slate-400">{getEventLabel(event.type)}</span>{isDone && <span className="px-1.5 py-0.5 bg-emerald-50 text-emerald-600 rounded text-[7px] font-black uppercase tracking-wider">Completed</span>}</div>
                                                <span className="text-[8px] md:text-[9px] font-bold text-slate-300">{formatDistanceToNow(event.startDate)} ago</span>
                                            </div>
                                            <h4 className="text-sm md:text-base font-bold text-slate-900 leading-snug truncate group-hover:text-[#004F71] transition-colors">{event.title}</h4>
                                            <div className="flex items-center gap-1.5 mt-1.5">
                                                <div className="w-4 h-4 rounded-md bg-slate-100 flex items-center justify-center text-[8px] font-black text-slate-500">{event.assigneeName.charAt(0)}</div>
                                                <span className="text-[10px] font-medium text-slate-500 truncate max-w-[100px]">{event.assigneeName}</span>
                                                <ArrowRight className="w-3 h-3 text-slate-300" />
                                                <span className="text-[10px] font-medium text-slate-500 truncate max-w-[100px]">{event.teamMemberName || "Team"}</span>
                                            </div>
                                        </div>
                                    </motion.div>
                                );
                            })}
                        </AnimatePresence>
                    </div>
                </div>
             </div>
          </div>

          {/* UP NEXT PANEL (Second on Mobile, Right Sidebar on Desktop) */}
          <div ref={nextRef} className="min-w-[90vw] md:min-w-[50vw] lg:min-w-0 col-span-12 lg:col-span-4 lg:col-start-9 flex flex-col gap-4 lg:sticky lg:top-24 snap-center h-fit">
             <div className="hidden lg:flex items-center gap-2 px-1 mb-1">
                 <Clock className="w-4 h-4 text-[#004F71]" />
                 <h3 className="text-lg font-black text-slate-900 tracking-tight">Up Next</h3>
             </div>
             
             <GlassCard className="w-full p-6 md:p-8 flex flex-col bg-[#004F71] text-white border-0 shadow-xl relative overflow-hidden group min-h-[300px] md:min-h-[360px] snap-center">
                <div className="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-white/10 transition-colors duration-700" />
                <div className="flex items-center justify-between relative z-10 mb-6 md:mb-8">
                    <div className="p-2.5 bg-white/10 rounded-xl backdrop-blur-md border border-white/10 shadow-inner"><BookOpen className="w-5 h-5" /></div>
                    <div className="px-2.5 py-1 bg-white/10 rounded-full text-[8px] font-black uppercase tracking-widest border border-white/5">Priority</div>
                </div>

                {nextSession ? (
                    <div className="mt-auto space-y-4 md:space-y-6 relative z-10">
                        <div>
                            <p className="text-[9px] font-black uppercase text-blue-200 tracking-[0.2em] mb-1">Upcoming Session</p>
                            <p className="text-2xl md:text-3xl font-black leading-none mb-1">{nextSession.assigneeName}</p>
                            <p className="text-xs md:text-sm text-blue-100 opacity-60 font-medium">with {nextSession.teamMemberName || "Team Member"}</p>
                        </div>
                        <div className="flex items-center gap-4 py-3 border-t border-white/10">
                             <div className="text-center"><p className="text-lg md:text-xl font-black leading-none">{format(nextSession.startDate, "d")}</p><p className="text-[8px] font-bold uppercase text-blue-200 mt-1">{format(nextSession.startDate, "MMM")}</p></div>
                             <div className="w-px h-6 bg-white/10" />
                             <div><p className="text-sm md:text-base font-bold leading-none">{format(nextSession.startDate, "h:mm a")}</p><p className="text-[8px] font-bold uppercase text-blue-200 mt-1">Start Time</p></div>
                        </div>
                        <button onClick={() => setSelected1on1(nextSession)} className="w-full py-3 md:py-4 bg-white text-[#004F71] rounded-[20px] font-black uppercase text-[10px] tracking-[0.2em] shadow-lg hover:scale-[1.02] transition-all active:scale-95 flex items-center justify-center gap-3">Launch Prep <ArrowRight className="w-3.5 h-3.5" /></button>
                    </div>
                ) : (
                    <div className="mt-auto text-center pb-8 relative z-10 flex flex-col items-center"><CheckCircle2 className="w-16 h-16 mb-4 opacity-20" /><p className="text-xs font-bold uppercase tracking-widest opacity-40">All sessions logged</p></div>
                )}
             </GlassCard>
          </div>

        </div>
      </div>

      <AnimatePresence>{selectedEvent && <EventDetailSheet event={selectedEvent} onClose={() => setSelectedEvent(null)} onDelete={handleDeleteEvent} onUpdate={handleUpdateEvent} />}</AnimatePresence>
      <AnimatePresence>{selected1on1 && <OneOnOneSessionModal event={selected1on1} onClose={() => setSelected1on1(null)} onUpdate={handleUpdate1on1} />}</AnimatePresence>
      <AnimatePresence>{activeKPI && <KPIModal title={activeKPI.title} items={activeKPI.items} color={activeKPI.color} icon={activeKPI.icon} onClose={() => setActiveKPI(null)} onItemClick={handleKPIItemClick} />}</AnimatePresence>
    </div>
  );
}
--- FILE: ./app/(main)/team/_components/TeamCard.tsx ---
"use client";

import { useState, useRef, memo, useEffect } from "react";
import { motion, useMotionValue, useSpring, useTransform } from "framer-motion";
import { Award, Camera, Loader2, Link2, ShieldCheck, Zap, Plus, User } from "lucide-react";
import { cn } from "@/lib/utils";
import { TeamMember } from "../../calendar/_components/types";
import { storage, caresDb } from "@/lib/firebase"; 
import { ref, uploadBytes, getDownloadURL } from "firebase/storage";
import { doc, updateDoc, serverTimestamp } from "firebase/firestore";
import toast from "react-hot-toast";

interface Props {
  member: TeamMember;
  onClick: (m: TeamMember) => void;
  onAssignClick: (m: TeamMember) => void; // NEW PROP
  onDragStart: () => void;
  onDragEnd: () => void;
  isDragging: boolean;
  isDropTarget?: boolean;
}

// 3D Tilt Logic
const TiltWrapper = ({ children, disabled, className, ...props }: any) => {
  const x = useMotionValue(0);
  const y = useMotionValue(0);
  const mouseXSpring = useSpring(x, { stiffness: 120, damping: 25 });
  const mouseYSpring = useSpring(y, { stiffness: 120, damping: 25 });
  const rotateX = useTransform(mouseYSpring, [-0.5, 0.5], ["7deg", "-7deg"]);
  const rotateY = useTransform(mouseXSpring, [-0.5, 0.5], ["-7deg", "7deg"]);

  const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {
    if (disabled) return;
    const rect = e.currentTarget.getBoundingClientRect();
    x.set((e.clientX - rect.left) / rect.width - 0.5);
    y.set((e.clientY - rect.top) / rect.height - 0.5);
  };

  const handleMouseLeave = () => {
    x.set(0);
    y.set(0);
  };

  if (disabled) {
    return <div className={className} {...props}>{children}</div>;
  }

  return (
    <motion.div
      style={{ rotateX, rotateY, transformStyle: "preserve-3d" }}
      onMouseMove={handleMouseMove}
      onMouseLeave={handleMouseLeave}
      className={className}
      {...props}
    >
      {children}
    </motion.div>
  );
};

const TeamCardComponent = ({ member, onClick, onAssignClick, onDragStart, onDragEnd, isDragging, isDropTarget }: Props) => {
  const isFOH = member.dept === "FOH";
  const hasImage = member.image && !member.image.includes('ui-avatars.com');
  const fileInputRef = useRef<HTMLInputElement>(null);
  const [isUploading, setIsUploading] = useState(false);
  const [isMobile, setIsMobile] = useState(true);

  useEffect(() => {
    const checkMobile = () => setIsMobile(window.matchMedia("(max-width: 768px)").matches);
    checkMobile();
  }, []);

  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files && e.target.files[0]) {
      setIsUploading(true);
      const file = e.target.files[0];
      const storageRef = ref(storage, `team-avatars/${member.id}/${file.name}`);
      try {
        await uploadBytes(storageRef, file);
        const url = await getDownloadURL(storageRef);
        await updateDoc(doc(caresDb, "teamMembers", member.id), {
          image: url,
          updatedAt: serverTimestamp()
        });
        toast.success("Identity Updated");
      } catch (error) {
        toast.error("Upload Failed");
      } finally {
        setIsUploading(false);
      }
    }
  };

  // Styles
  const superGlassDark = "bg-gradient-to-br from-white/30 via-white/10 to-transparent border border-white/30 shadow-[0_8px_32px_0_rgba(0,0,0,0.3)] backdrop-blur-xl text-white";
  const superGlassLight = "bg-gradient-to-br from-white/80 via-white/40 to-white/20 border border-white/60 shadow-[0_8px_32px_0_rgba(31,38,135,0.15)] backdrop-blur-xl text-slate-600";
  const superGlassRuby = "bg-gradient-to-br from-[#E51636] to-[#b91c1c] border border-[#E51636]/50 shadow-[0_8px_32px_0_rgba(229,22,54,0.3)] text-white";
  
  const activeLabel = (member.progress || 0) < 100 ? "Active Phase" : "Deployment Ready";

  return (
    <TiltWrapper 
      disabled={isMobile || isDragging}
      className={cn(
        "relative group w-full aspect-[4/5] perspective-1000 cursor-pointer",
        isDropTarget && !isDragging && "z-50 scale-105"
      )}
      onClick={() => !isDragging && onClick(member)}
    >
       <motion.div
         drag={!isMobile}
         dragSnapToOrigin
         dragElastic={0.05}
         onDragStart={onDragStart}
         onDragEnd={onDragEnd}
         style={{ filter: isDragging ? 'brightness(1.1)' : 'none', zIndex: isDragging ? 100 : 1 }}
         className="h-full w-full"
       >
        {/* AMBIENT GLOW */}
        <div className={cn(
          "absolute -inset-4 rounded-[40px] blur-[60px] transition-opacity duration-500 pointer-events-none opacity-0 group-hover:opacity-30",
          isFOH ? "bg-[#004F71]" : "bg-[#E51636]",
          isDropTarget && "opacity-60 bg-emerald-400"
        )} />

        {/* CARD CHASSIS */}
        <div className={cn(
          "relative h-full w-full rounded-[40px] border overflow-hidden flex flex-col transition-all duration-300 transform-gpu",
          hasImage || isFOH 
            ? "bg-[#0F172A] border-white/10 shadow-xl" 
            : "bg-white border-slate-200 shadow-lg",
          isDragging && "ring-4 ring-[#E51636]/50 shadow-[0_20px_50px_-12px_rgba(229,22,54,0.5)]",
          isDropTarget && "ring-4 ring-emerald-400/50 scale-[1.02] border-emerald-400/50"
        )}>
          
          <input type="file" ref={fileInputRef} onChange={handleImageUpload} className="hidden" accept="image/*" />

          {/* BACKGROUND */}
          <div className="absolute inset-0 z-0">
            {hasImage ? (
              <>
                <img 
                    src={member.image} 
                    alt={member.name} 
                    loading="lazy" 
                    className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105" 
                />
                <div className="absolute inset-0 bg-gradient-to-t from-[#0F172A] via-[#0F172A]/40 to-transparent" />
              </>
            ) : isFOH ? (
              <div className="w-full h-full bg-[#004F71] relative overflow-hidden">
                  <div className="absolute inset-0 opacity-20 bg-[radial-gradient(circle_at_2px_2px,_rgba(255,255,255,0.2)_1px,_transparent_0)] [background-size:20px_20px]" />
                  <div className="absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2" />
              </div>
            ) : (
              <div className="w-full h-full bg-white relative">
                   <div className="absolute inset-0 bg-slate-50/50" />
                   <div className="absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-white to-transparent" />
              </div>
            )}
          </div>

          {/* CONTENT */}
          <div className="relative z-10 h-full p-5 md:p-6 flex flex-col justify-between">
            
            {/* TOP BAR */}
            <div className="flex justify-between items-start">
              <div className={cn(
                "px-3 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-[0.2em] relative overflow-hidden",
                isFOH ? superGlassDark + " text-blue-100" : superGlassRuby
              )}>
                 <span className="relative z-10">{member.dept} UNIT</span>
              </div>

              {!isDropTarget && (
                <button 
                    onClick={(e) => { e.stopPropagation(); fileInputRef.current?.click(); }}
                    className={cn(
                    "p-2.5 rounded-xl transition-all duration-300 opacity-0 group-hover:opacity-100 relative overflow-hidden",
                    hasImage || isFOH ? superGlassDark : superGlassLight
                    )}
                >
                    {isUploading ? <Loader2 className="w-4 h-4 animate-spin" /> : <Camera className="w-4 h-4" />}
                </button>
              )}
            </div>

            {/* BIG INITIALS */}
            {!hasImage && (
                <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none">
                    <div className={cn("text-6xl font-[1000] tracking-tighter drop-shadow-2xl select-none", isFOH ? "text-white/20" : "text-slate-900/10")}>
                        {member.name.split(' ').map(n => n[0]).join('')}
                    </div>
                </div>
            )}

            {/* BOTTOM INFO CLUSTER */}
            <div className="space-y-4 transform transition-transform duration-300 md:group-hover:-translate-y-2">
              <div>
                <h3 className={cn("text-2xl font-black tracking-tight leading-none mb-1.5", hasImage || isFOH ? "text-white" : "text-slate-900")}>
                  {member.name}
                </h3>
                <div className="flex items-center gap-2">
                  <span className={cn("text-[10px] font-bold uppercase tracking-widest", hasImage || isFOH ? "text-white/60" : "text-slate-400")}>
                    {member.role}
                  </span>
                  <span className={cn("text-[8px] font-black uppercase tracking-wider px-2 py-0.5 rounded-md backdrop-blur-sm", hasImage || isFOH ? "bg-white/10 text-white/80" : "bg-slate-100 text-slate-500")}>
                    {activeLabel}
                  </span>
                </div>
              </div>

              {/* --- MENTOR / CONNECTION SLOT --- */}
              <div className="grid grid-cols-[1fr_auto] gap-2">
                  
                  {/* SLOT 1: MENTOR ASSIGNMENT */}
                  <div 
                    onClick={(e) => { e.stopPropagation(); onAssignClick(member); }}
                    className={cn(
                      "rounded-2xl flex items-center gap-3 relative overflow-hidden transition-all duration-300 cursor-pointer h-14 active:scale-95 group/mentor",
                      isDropTarget 
                        ? "bg-emerald-500/20 border-2 border-dashed border-emerald-400 p-2 col-span-2" 
                        : (member.pairing 
                            ? (hasImage || isFOH ? "bg-white/10 border border-white/20 backdrop-blur-md" : "bg-white border border-slate-100 shadow-sm")
                            : (hasImage || isFOH ? "bg-white/5 border border-dashed border-white/20 hover:bg-white/10" : "bg-slate-50 border border-dashed border-slate-200 hover:bg-white hover:border-slate-300")
                          ),
                      !isDropTarget && "px-2 py-1.5"
                    )}
                  >
                     {/* State: Drop Target Active */}
                     {isDropTarget ? (
                         <div className="w-full flex items-center justify-center gap-2 text-emerald-100 animate-pulse">
                             <Zap className="w-4 h-4 fill-current" />
                             <span className="text-[10px] font-black uppercase tracking-widest text-white">Link</span>
                         </div>
                     ) : (
                        <>
                            {member.pairing ? (
                                <>
                                    <div className="relative shrink-0">
                                        <div className="w-8 h-8 rounded-xl p-[2px] bg-gradient-to-tr from-emerald-400 to-blue-500 shadow-lg">
                                            <img src={member.pairing.image} alt="" className="w-full h-full rounded-[10px] object-cover bg-slate-900" />
                                        </div>
                                        <div className="absolute -bottom-1 -right-1 bg-emerald-500 border border-white rounded-full p-0.5">
                                            <Link2 className="w-1.5 h-1.5 text-white" />
                                        </div>
                                    </div>
                                    <div className="flex flex-col min-w-0">
                                        <span className={cn("text-[7px] font-bold uppercase tracking-wider opacity-60", hasImage || isFOH ? "text-white" : "text-slate-500")}>
                                            Mentored By
                                        </span>
                                        <span className={cn("text-[10px] font-black truncate", hasImage || isFOH ? "text-white" : "text-slate-900")}>
                                            {member.pairing.name}
                                        </span>
                                    </div>
                                </>
                            ) : (
                                <>
                                    <div className={cn("w-8 h-8 rounded-xl flex items-center justify-center shrink-0 border border-dashed", hasImage || isFOH ? "border-white/30 text-white/50" : "border-slate-300 text-slate-300")}>
                                        <Plus className="w-3 h-3" />
                                    </div>
                                    <span className={cn("text-[9px] font-bold uppercase tracking-widest", hasImage || isFOH ? "text-white/40" : "text-slate-400")}>
                                        Assign Mentor
                                    </span>
                                </>
                            )}
                        </>
                     )}
                  </div>

                  {/* SLOT 2: PROGRESS RING (Only if not drop target) */}
                  {!isDropTarget && (
                      <div className={cn(
                          "w-14 h-14 rounded-2xl flex items-center justify-center relative overflow-hidden",
                          hasImage || isFOH ? superGlassDark : superGlassLight
                      )}>
                          <svg className="w-8 h-8 -rotate-90">
                                <circle cx="16" cy="16" r="13" fill="none" stroke="currentColor" strokeWidth="2.5" className="opacity-10" />
                                <circle cx="16" cy="16" r="13" fill="none" stroke={isFOH ? "#60a5fa" : "#f87171"} strokeWidth="2.5" strokeDasharray="81" strokeDashoffset={81 - (81 * (member.progress || 0) / 100)} strokeLinecap="round" />
                          </svg>
                          <div className="absolute inset-0 flex items-center justify-center">
                              <span className={cn("text-[9px] font-black", hasImage || isFOH ? "text-white" : "text-slate-900")}>
                                  {member.progress}
                              </span>
                          </div>
                      </div>
                  )}
              </div>

            </div>
          </div>
        </div>
      </motion.div>
    </TiltWrapper>
  );
};

export const TeamCard = memo(TeamCardComponent);
--- FILE: ./app/(main)/team/_components/MemberDetailSheet.tsx ---
"use client";

import { useState, useMemo, useEffect } from "react";
import { createPortal } from "react-dom";
import { motion, AnimatePresence, useDragControls, PanInfo } from "framer-motion";
import { 
  X, Check, Terminal, Trophy, Plus, 
  MessageSquare, Activity, Sparkles, 
  BookOpen, Loader2, ShieldCheck, Target, 
  Crown, Award, Medal, Shield, Clock, Zap, ChevronRight, 
  Maximize2, Layers, HardDrive, ClipboardCheck, 
  ArrowUpRight, Save, ChevronLeft, ChevronDown, 
  Command, TrendingUp, Lightbulb, Minimize2, ExternalLink, GripHorizontal
} from "lucide-react";
import { 
    formatDistanceToNow, parseISO, startOfWeek, startOfMonth, endOfWeek, endOfMonth, 
    eachDayOfInterval, isSameDay, isBefore, isWithinInterval, isSameMonth, subMonths, addMonths, format 
} from "date-fns";
import { cn } from "@/lib/utils";

// --- IMPORTS ---
import { db } from "@/lib/firebase"; 
import { collection, addDoc, serverTimestamp, doc, setDoc, updateDoc, arrayUnion, arrayRemove } from "firebase/firestore";
import { useAppStore } from "@/lib/store/useStore";
import { TeamMember, STAGES, EventType, getEventLabel, getTypeColor, CalendarEvent } from "../../calendar/_components/types";
import { TACTICAL_ICONS } from "@/lib/icon-library";
import toast from "react-hot-toast";
import { Badge } from "./Badge";
import OneOnOneSessionModal from "../../calendar/_components/OneOnOneSessionModal";

// --- HELPERS & SUB-COMPONENTS ---

function ClientPortal({ children }: { children: React.ReactNode }) {
  const [mounted, setMounted] = useState(false);
  useEffect(() => {
    setMounted(true);
    return () => setMounted(false);
  }, []);
  return mounted ? createPortal(children, document.body) : null;
}

// --- MANUAL VIEWER MODAL (Refactored to Bottom Sheet) ---
function ManualViewerModal({ url, title, pages, onClose, color }: { url: string, title: string, pages: string, onClose: () => void, color: string }) {
    const [loading, setLoading] = useState(true);
    const dragControls = useDragControls();

    return (
        <ClientPortal>
            {/* Dark Backdrop */}
            <motion.div 
                initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} 
                className="fixed inset-0 z-[200] bg-slate-900/60 backdrop-blur-sm"
                onClick={onClose}
            />

            {/* Bottom Sheet Card */}
            <motion.div 
                initial={{ y: "100%" }} 
                animate={{ y: 0 }} 
                exit={{ y: "100%" }}
                transition={{ type: "spring", damping: 25, stiffness: 300 }}
                drag="y"
                dragControls={dragControls}
                dragListener={false} 
                dragConstraints={{ top: 0, bottom: 0 }}
                dragElastic={0.05}
                onDragEnd={(_, info: PanInfo) => {
                    if (info.offset.y > 100) onClose();
                }}
                className="fixed bottom-0 left-0 right-0 z-[210] h-[92vh] bg-white rounded-t-[40px] shadow-2xl overflow-hidden flex flex-col pointer-events-auto"
            >
                {/* Drag Handle Area */}
                <div 
                    className="absolute top-0 left-0 right-0 h-14 z-50 flex items-start justify-center pt-3 cursor-grab active:cursor-grabbing touch-none bg-gradient-to-b from-white via-white to-transparent"
                    onPointerDown={(e) => dragControls.start(e)}
                >
                    <div className="w-12 h-1.5 bg-slate-200 rounded-full" />
                </div>

                {/* Header */}
                <div className="flex items-center justify-between px-8 pt-10 pb-4 border-b border-slate-100 bg-white shrink-0 relative z-40">
                    <div>
                        <div className="flex items-center gap-2 mb-1">
                            <span className={cn("w-2 h-2 rounded-full", color === 'bg-[#004F71]' ? 'bg-[#004F71]' : 'bg-[#E51636]')} />
                            <p className="text-[10px] font-black uppercase text-slate-400 tracking-[0.2em]">Manual Viewer</p>
                        </div>
                        <h3 className="text-xl font-black text-slate-900 leading-none tracking-tight">{title}</h3>
                    </div>
                    <button onClick={onClose} className="p-3 bg-slate-50 rounded-full hover:bg-slate-100 transition-all border border-slate-100">
                        <Minimize2 className="w-5 h-5 text-slate-500" />
                    </button>
                </div>
                
                {/* Iframe Content */}
                <div className="relative flex-1 bg-slate-50 overflow-hidden">
                    {loading && (
                        <div className="absolute inset-0 flex flex-col items-center justify-center gap-3 z-0">
                            <Loader2 className={cn("w-10 h-10 animate-spin", color === 'bg-[#004F71]' ? "text-[#004F71]" : "text-[#E51636]")} />
                            <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">Retrieving Data...</p>
                        </div>
                    )}
                    <iframe 
                        src={url} 
                        className="w-full h-full border-none relative z-10" 
                        onLoad={() => setLoading(false)}
                    />
                </div>

                {/* Footer Controls */}
                <div className="px-8 py-6 border-t border-slate-100 bg-white flex justify-between items-center safe-area-pb shrink-0 relative z-40">
                    <div className="flex flex-col">
                        <span className="text-[9px] font-black uppercase text-slate-400 tracking-widest">Scope</span>
                        <span className="text-sm font-bold text-slate-900">Pages {pages}</span>
                    </div>
                    <div className={cn("px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest text-white shadow-lg", color)}>
                        Read Only
                    </div>
                </div>
            </motion.div>
        </ClientPortal>
    );
}

// Dropdown for the Log Modal
function WebAppDropdown({ label, icon: Icon, options, selected, onSelect, placeholder }: any) {
    const [isOpen, setIsOpen] = useState(false);
    return (
        <div className="relative space-y-1.5">
            <label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] flex items-center gap-2 px-1">
                <Icon className="w-3 h-3" /> {label}
            </label>
            <button onClick={() => setIsOpen(!isOpen)} className={cn("w-full flex items-center justify-between px-4 py-3.5 bg-white border rounded-[20px] transition-all duration-300 shadow-sm", isOpen ? "border-[#E51636] ring-4 ring-red-500/5 shadow-md" : "border-slate-200 hover:border-slate-300")}>
                <div className="flex items-center gap-3 text-left overflow-hidden">
                    {selected ? (
                        <>
                            <div className={cn("w-6 h-6 rounded-lg flex items-center justify-center overflow-hidden shrink-0 font-black text-[10px] text-white shadow-sm", selected.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>{selected.name.charAt(0)}</div>
                            <span className="text-xs font-bold text-slate-800 truncate">{selected.name}</span>
                        </>
                    ) : <span className="text-xs font-bold text-slate-400">{placeholder}</span>}
                </div>
                <ChevronDown className={cn("w-4 h-4 text-slate-300 transition-transform duration-300", isOpen && "rotate-180")} />
            </button>
            <AnimatePresence>
                {isOpen && (
                    <motion.div initial={{ opacity: 0, y: 5, scale: 0.98 }} animate={{ opacity: 1, y: 0, scale: 1 }} exit={{ opacity: 0, y: 5, scale: 0.98 }} className="absolute top-full left-0 right-0 mt-2 bg-white border border-slate-100 rounded-2xl shadow-2xl z-50 overflow-hidden py-1 ring-1 ring-black/5">
                        <div className="max-h-56 overflow-y-auto custom-scrollbar">
                            {options.map((opt: TeamMember) => (
                                <button key={opt.id} onClick={() => { onSelect(opt); setIsOpen(false); }} className="w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 transition-colors text-left border-b border-slate-50 last:border-0 group">
                                    <div className={cn("w-8 h-8 rounded-xl flex items-center justify-center font-black text-xs text-white shadow-md", opt.dept === 'FOH' ? 'bg-[#004F71]' : 'bg-[#E51636]')}>{opt.name.charAt(0)}</div>
                                    <div className="flex flex-col"><span className="text-xs font-bold text-slate-700 group-hover:text-[#E51636] transition-colors">{opt.name}</span><div className="flex items-center gap-1.5"><span className={cn("text-[7px] font-black uppercase px-1.5 py-0.5 rounded-md", opt.dept === 'FOH' ? 'bg-blue-50 text-[#004F71]' : 'bg-red-50 text-[#E51636]')}>{opt.dept}</span><span className="text-[8px] font-bold text-slate-400 uppercase tracking-tighter">{opt.role}</span></div></div>
                                </button>
                            ))}
                        </div>
                    </motion.div>
                )}
            </AnimatePresence>
        </div>
    );
}

// Range Picker for Log Modal
function IntegratedRangePicker({ start, end, onChange }: { start: Date, end: Date, onChange: (s: Date, e: Date) => void }) {
    const [viewDate, setViewDate] = useState(start);
    const days = eachDayOfInterval({ start: startOfWeek(startOfMonth(viewDate)), end: endOfWeek(endOfMonth(viewDate)) });
    const handleDateClick = (clickedDate: Date) => { if (isSameDay(start, end)) isBefore(clickedDate, start) ? onChange(clickedDate, clickedDate) : onChange(start, clickedDate); else onChange(clickedDate, clickedDate); };
    return (
        <div className="w-full bg-white rounded-[32px] p-5 border border-slate-100 shadow-sm relative overflow-hidden">
            <div className="flex justify-between items-center mb-6 px-1">
                <div className="flex flex-col"><span className="text-[8px] font-black text-slate-300 uppercase tracking-[0.3em] mb-1">Calendar</span><span className="text-[11px] font-black text-[#E51636] uppercase tracking-widest">{format(viewDate, "MMMM yyyy")}</span></div>
                <div className="flex gap-1.5"><button onClick={() => setViewDate(subMonths(viewDate, 1))} className="p-2 hover:bg-slate-50 rounded-xl text-slate-400 transition-all"><ChevronLeft className="w-4 h-4" /></button><button onClick={() => setViewDate(addMonths(viewDate, 1))} className="p-2 hover:bg-slate-50 rounded-xl text-slate-400 transition-all"><ChevronRight className="w-4 h-4" /></button></div>
            </div>
            <div className="grid grid-cols-7 gap-1">
                {["S","M","T","W","T","F","S"].map((d, i) => <div key={i} className="h-6 flex items-center justify-center text-[9px] font-black text-slate-200 uppercase">{d}</div>)}
                {days.map(d => {
                    const isStart = isSameDay(d, start);
                    const isEnd = isSameDay(d, end);
                    const inRange = isWithinInterval(d, { start, end });
                    const isCurrentMonth = isSameMonth(d, viewDate);
                    return (
                        <button key={d.toString()} onClick={() => handleDateClick(d)} className={cn("h-9 w-full flex items-center justify-center text-xs font-bold transition-all relative rounded-xl", !isCurrentMonth && "opacity-5", inRange && !isStart && !isEnd && "bg-red-50 text-[#E51636] rounded-none", (isSameDay(d, start) || isSameDay(d, end)) && "bg-[#E51636] text-white shadow-lg z-10")}>{format(d, "d")}</button>
                    );
                })}
            </div>
        </div>
    );
}

const CANVA_LINKS = {
  FOH: "https://www.canva.com/design/DAG7sot3RWY/Sv-7Y3IEyBqUUFB999JiPA/view",
  BOH: "https://www.canva.com/design/DAG7ssYg444/FFZwbb8mLfLGiGrP2VeHiA/view"
};

const CATEGORIES: { id: EventType; icon: any }[] = [
    { id: "Training", icon: Shield }, 
    { id: "Goal", icon: Target },
    { id: "Deadline", icon: Zap }, 
    { id: "Operation", icon: Activity },
    { id: "OneOnOne", icon: MessageSquare },
];

interface Props {
  member: TeamMember; 
  onClose: () => void;
  activeTab: "overview" | "curriculum" | "performance";
  setActiveTab: (t: "overview" | "curriculum" | "performance") => void;
}

export const MemberDetailSheet = ({ member: initialMember, onClose, activeTab, setActiveTab }: Props) => {
  const { events, team, curriculum, subscribeCurriculum } = useAppStore();
  
  // LIVE MEMBER BINDING
  const liveMember = useMemo(() => 
    team.find(m => m.id === initialMember.id), 
  [team, initialMember.id]);

  const member = liveMember || initialMember;

  // -- STATE --
  const [localCompletedIds, setLocalCompletedIds] = useState<string[]>(member.completedTaskIds || []);
  const [selectedSectionId, setSelectedSectionId] = useState<string | null>(null);
  const [iframeLoading, setIframeLoading] = useState(true);
  const [isManualModalOpen, setIsManualModalOpen] = useState(false);
  
  // Log Modal State
  const [isLogModalOpen, setIsLogModalOpen] = useState(false);
  const [logDraft, setLogDraft] = useState({ title: "", type: "Training" as EventType, priority: "Medium" as any, startDate: new Date(), endDate: new Date(), description: "", assignee: "", assigneeName: "" });
  const [isTitleFocused, setIsTitleFocused] = useState(false);
  const [isBriefingFocused, setIsBriefingFocused] = useState(false);

  // 1-on-1 Modal State
  const [selectedSession, setSelectedSession] = useState<CalendarEvent | null>(null);

  // -- EFFECTS --
  useEffect(() => {
    document.body.style.overflow = "hidden";
    return () => {
      document.body.style.overflow = "unset";
    };
  }, []);

  useEffect(() => {
    if (member.completedTaskIds) {
        setLocalCompletedIds(member.completedTaskIds);
    }
  }, [member.completedTaskIds]);

  useEffect(() => {
    const unsub = subscribeCurriculum();
    return () => unsub();
  }, [subscribeCurriculum]);

  // -- COMPUTED DATA --
  const isFOH = member.dept === "FOH";
  const brandBg = isFOH ? 'bg-[#004F71]' : 'bg-[#E51636]';
  const brandText = isFOH ? 'text-[#004F71]' : 'text-[#E51636]';
  const initials = member.name.split(' ').map(n => n[0]).join('').toUpperCase();

  const filteredCurriculum = useMemo(() => curriculum.filter(s => s.dept === member.dept), [curriculum, member.dept]);
  const activeSection = useMemo(() => filteredCurriculum.find(s => s.id === selectedSectionId), [filteredCurriculum, selectedSectionId]);
  const assignedEvents = useMemo(() => events.filter(e => e.teamMemberId === member.id || e.assignee === member.id), [events, member.id]);

  // Timeline Merging Logic
  const timelineData = useMemo(() => {
    const history: any[] = [];
    assignedEvents.forEach(e => {
        let category = 'MISSION';
        if (e.type === 'Goal') category = 'GOAL';
        else if (e.type === 'OneOnOne') category = '1-ON-1';

        const rawDescription = e.description || "";
        const parts = rawDescription.split(/\[SESSION SUMMARY\]|\[KEY OUTCOMES\]|\[FOLLOW UP SCHEDULED:/);
        const goal = parts[0]?.trim() || "";
        let summary = "";
        const summaryMatch = rawDescription.match(/\[SESSION SUMMARY\]([\s\S]*?)(?=\[FOLLOW UP|$)/) || 
                             rawDescription.match(/\[KEY OUTCOMES\]([\s\S]*?)(?=\[FOLLOW UP|$)/);
        if (summaryMatch) {
            summary = summaryMatch[1].trim();
        }

        history.push({ 
            id: e.id, 
            date: e.startDate, 
            title: e.title, 
            type: e.type, 
            category,
            status: e.status, 
            goal,    
            summary, 
            rawEvent: e 
        });
    });

    if(member.badges) {
        member.badges.forEach((b: any) => history.push({ id: b.awardedId || b.id, date: b.timestamp ? parseISO(b.timestamp) : new Date(), title: b.label, category: 'AWARD', hex: b.hex, iconId: b.iconId, description: `Identity module successfully validated.` }));
    }
    return history.sort((a, b) => b.date.getTime() - a.date.getTime());
  }, [assignedEvents, member.badges]);

  // -- HANDLERS --

  const handleVerifyTask = async (taskId: string, sectionId: string) => {
      const wasCompleted = localCompletedIds.includes(taskId);
      const newLocalIds = wasCompleted 
        ? localCompletedIds.filter(id => id !== taskId) 
        : [...localCompletedIds, taskId];
      
      setLocalCompletedIds(newLocalIds); 

      // Calculate new progress percentage
      const section = filteredCurriculum.find(s => s.id === sectionId);
      const taskTitle = section?.tasks?.find((t: any) => t.id === taskId)?.title || "Training Module";
      
      let totalTasks = 0;
      filteredCurriculum.forEach(sec => totalTasks += (sec.tasks?.length || 0));
      const newProgress = totalTasks > 0 ? Math.round((newLocalIds.length / totalTasks) * 100) : 0;

      const toastId = toast.loading("Syncing...");

      try {
          const memberRef = doc(db, "profileOverrides", member.id);
          
          await setDoc(memberRef, {
              completedTaskIds: wasCompleted ? arrayRemove(taskId) : arrayUnion(taskId),
              progress: newProgress,
              updatedAt: serverTimestamp()
          }, { merge: true });

          const baseLog = {
              type: "Training", 
              status: "Done",
              startDate: new Date(), 
              endDate: new Date(),
              teamMemberId: member.id,
              teamMemberName: member.name,
              assignee: "System", 
              assigneeName: "TrainingBot",
              createdAt: serverTimestamp()
          };

          if (!wasCompleted) {
              await addDoc(collection(db, "events"), {
                  ...baseLog,
                  title: `Module Certified: ${taskTitle}`,
                  priority: "Low", 
                  description: `Proficiency demonstrated in ${section?.title || 'Training Phase'}. Module "${taskTitle}" verified.`,
              });
          } else {
              await addDoc(collection(db, "events"), {
                  ...baseLog,
                  title: `Module Reset: ${taskTitle}`,
                  priority: "Medium", 
                  description: `Verification for module "${taskTitle}" was manually revoked. Status returned to Pending.`,
              });
          }

          toast.success(wasCompleted ? "Module Reset" : "Module Logged", { id: toastId });
      } catch (error) {
          console.error("VERIFY ERROR:", error);
          toast.error("Sync Failed", { id: toastId });
          setLocalCompletedIds(localCompletedIds); 
      }
  };

  const handleTimelineItemClick = (item: any) => {
      if (item.type === 'OneOnOne' && item.rawEvent) {
          setSelectedSession(item.rawEvent);
      }
  };

  const handleUpdateEvent = async (updatedEvent: CalendarEvent) => {
      const loadToast = toast.loading("Updating Session...");
      try {
          await updateDoc(doc(db, "events", updatedEvent.id), {
              description: updatedEvent.description,
              subtasks: updatedEvent.subtasks,
              status: updatedEvent.status,
              updatedAt: serverTimestamp()
          });
          toast.success("Session Updated", { id: loadToast });
          setSelectedSession(null);
      } catch (e) {
          toast.error("Update Failed", { id: loadToast });
      }
  };

  const handleDeployLog = async () => {
    if (!logDraft.title) return toast.error("Identify mission objective");
    const loadToast = toast.loading("Deploying record...");
    try {
        await addDoc(collection(db, "events"), { 
            ...logDraft, 
            teamMemberId: member.id, 
            teamMemberName: member.name, 
            status: "Done", 
            createdAt: serverTimestamp() 
        });
        toast.success("Log Deployed Successfully", { id: loadToast });
        setIsLogModalOpen(false);
        setLogDraft({ title: "", type: "Training", priority: "Medium", startDate: new Date(), endDate: new Date(), description: "", assignee: "", assigneeName: "" });
    } catch (e) { 
        toast.error("Deployment failed"); 
    }
  };

  const getEmbedUrl = () => {
    const base = CANVA_LINKS[member.dept as keyof typeof CANVA_LINKS]?.split('?')[0] || CANVA_LINKS.FOH;
    const page = activeSection?.pageStart || 1;
    return `${base}?embed#${page}`;
  };

  return (
    <ClientPortal>
      {/* Backdrop */}
      <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="fixed inset-0 z-[100] bg-slate-900/60 backdrop-blur-md" onClick={onClose} />
      
      {/* Main Container - Responsive Layout */}
      <motion.div 
        initial={{ y: "100%", x: 0 }} 
        animate={{ y: 0, x: 0 }} 
        exit={{ y: "100%", x: 0 }} 
        transition={{ type: "spring", damping: 30, stiffness: 250 }}
        className="fixed inset-0 z-[110] bg-white shadow-2xl flex flex-col lg:flex-row overflow-hidden lg:inset-y-4 lg:right-4 lg:left-auto lg:w-full lg:max-w-[1500px] lg:rounded-[60px] lg:border-l lg:border-slate-200"
      >
        
        {/* --- 1. HEADER (Mobile Top / Desktop Sidebar) --- */}
        <div className="w-full lg:w-[340px] bg-slate-50 border-b lg:border-b-0 lg:border-r border-slate-200 flex flex-col p-6 lg:p-10 shrink-0 relative overflow-y-auto lg:overflow-visible no-scrollbar">
            
            {/* Close Button Mobile */}
            <button onClick={onClose} className="lg:hidden absolute top-4 right-4 p-2 bg-white rounded-full shadow-sm text-slate-400 z-50 active:scale-90 transition-transform">
                <X className="w-5 h-5" />
            </button>

            <div className="text-center space-y-4 lg:space-y-8 pt-2 lg:pt-4">
                {/* Avatar */}
                <div className="relative inline-block">
                    <div className="w-20 h-20 lg:w-32 lg:h-32 rounded-[28px] lg:rounded-[44px] p-1.5 bg-white shadow-2xl border border-slate-100 mx-auto overflow-hidden lg:rotate-[-2deg]">
                        <div className="w-full h-full rounded-[20px] lg:rounded-[34px] overflow-hidden flex items-center justify-center bg-slate-50">
                            {member.image && !member.image.includes('ui-avatars.com') ? <img src={member.image} className="w-full h-full object-cover" /> : <span className={cn("text-2xl lg:text-4xl font-bold", brandText)}>{initials}</span>}
                        </div>
                    </div>
                </div>
                
                {/* Info */}
                <div>
                    <h2 className="text-2xl lg:text-3xl font-bold text-slate-900 mb-1 tracking-tight leading-none">{member.name}</h2>
                    <div className="flex flex-row lg:flex-col items-center justify-center gap-2 lg:gap-3 mt-2 lg:mt-4">
                        <Badge color={isFOH ? 'blue' : 'red'} className="border-2 shadow-sm font-black">{member.dept} UNIT</Badge>
                        <span className="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em]">{member.role}</span>
                    </div>
                </div>

                {/* --- PROGRESS INDICATOR (Compact on Mobile) --- */}
                <div className="relative w-full p-4 lg:p-6 rounded-[24px] lg:rounded-[36px] bg-white border border-slate-100 shadow-[0_20px_40px_-10px_rgba(0,0,0,0.05)] overflow-hidden group hover:shadow-xl transition-all duration-500 hidden md:block">
                    <div className={cn("absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 bg-gradient-to-b", isFOH ? "from-blue-50/50 to-transparent" : "from-red-50/50 to-transparent")} />
                    <div className={cn("absolute -top-10 -right-10 w-40 h-40 bg-gradient-to-br opacity-20 blur-[50px] rounded-full transition-all duration-1000 group-hover:scale-125", isFOH ? "from-blue-400 to-cyan-300" : "from-[#E51636] to-orange-400")} />

                    <div className="relative z-10 flex flex-col items-center gap-4">
                        <div className="relative w-24 h-24 lg:w-32 lg:h-32 flex items-center justify-center">
                            <svg className="w-full h-full transform -rotate-90">
                                <circle cx="50%" cy="50%" r="45%" className="text-slate-100" strokeWidth="8" stroke="currentColor" fill="transparent" />
                                <motion.circle
                                    initial={{ strokeDashoffset: 364 }}
                                    animate={{ strokeDashoffset: 364 - (364 * member.progress) / 100 }}
                                    transition={{ duration: 1.5, ease: "easeOut" }}
                                    cx="50%" cy="50%" r="45%"
                                    className={cn(isFOH ? "text-[#004F71]" : "text-[#E51636]")}
                                    strokeWidth="8" strokeLinecap="round" stroke="currentColor" fill="transparent" strokeDasharray="364"
                                />
                            </svg>
                            <div className="absolute inset-0 flex flex-col items-center justify-center">
                                <span className={cn("text-2xl lg:text-3xl font-[1000] tracking-tighter leading-none", brandText)}>
                                    {member.progress}<span className="text-sm align-top ml-0.5 opacity-60">%</span>
                                </span>
                            </div>
                        </div>
                        <div className="flex items-center gap-2 px-4 py-1.5 rounded-full bg-slate-50 border border-slate-100 shadow-sm">
                            <TrendingUp className="w-3.5 h-3.5 text-slate-400" />
                            <span className="text-[10px] font-black uppercase tracking-[0.2em] text-slate-500">Progress</span>
                        </div>
                    </div>
                </div>
                
                {/* Mobile Linear Progress Fallback */}
                <div className="md:hidden w-full space-y-1">
                    <div className="flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-400">
                        <span>Curriculum</span>
                        <span>{member.progress}%</span>
                    </div>
                    <div className="h-2 w-full bg-slate-200 rounded-full overflow-hidden">
                        <div className={cn("h-full rounded-full", isFOH ? "bg-[#004F71]" : "bg-[#E51636]")} style={{ width: `${member.progress}%` }} />
                    </div>
                </div>
            </div>
        </div>

        {/* --- 2. MAIN CONTENT AREA --- */}
        <div className="flex-1 flex flex-col bg-white overflow-hidden relative">
          
          {/* TABS HEADER */}
          <div className="px-4 lg:px-12 h-16 lg:h-24 flex items-center justify-between border-b border-slate-100 shrink-0 bg-white z-20 overflow-x-auto no-scrollbar">
             <div className="flex gap-6 lg:gap-12 min-w-full lg:min-w-0">
                {['overview', 'curriculum', 'performance'].map(tab => (
                   <button key={tab} onClick={() => { setActiveTab(tab as any); setSelectedSectionId(null); }} className="relative py-5 lg:py-9 group outline-none shrink-0">
                      <span className={cn("text-[10px] lg:text-xs font-bold uppercase tracking-[0.15em] transition-all", activeTab === tab ? "text-slate-900" : "text-slate-400 hover:text-slate-600")}>{tab}</span>
                      {activeTab === tab && <motion.div layoutId="detailTab" className="absolute bottom-0 left-0 right-0 h-1 bg-[#E51636] rounded-t-full shadow-[0_-4px_10px_rgba(229,22,54,0.2)]" />}
                   </button>
                ))}
             </div>
             <button onClick={onClose} className="hidden lg:block p-3 bg-slate-50 text-slate-400 rounded-2xl hover:bg-red-50 hover:text-[#E51636] transition-all border border-slate-100 shadow-sm"><X className="w-6 h-6" /></button>
          </div>

          {/* SCROLLABLE BODY */}
          <div className="flex-1 overflow-hidden">
             <AnimatePresence mode="wait">
                
                {/* --- TAB: OVERVIEW --- */}
                {activeTab === 'overview' && (
                    <motion.div key="overview" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="p-4 lg:p-12 space-y-6 lg:space-y-10 overflow-y-auto h-full custom-scrollbar bg-slate-50/20 pb-24">
                        
                        {/* Status Steps */}
                        <div className="bg-white p-6 lg:p-10 rounded-[32px] lg:rounded-[56px] border border-slate-100 shadow-sm overflow-x-auto">
                            <h4 className="text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.25em] mb-8 lg:mb-12 text-center min-w-[500px]">Unit Deployment Status</h4>
                            <div className="flex justify-between px-2 lg:px-6 relative min-w-[500px]">
                                <div className="absolute top-5 left-0 right-0 h-0.5 bg-slate-100" />
                                {STAGES.map((s, i) => { 
                                    const currentIdx = STAGES.findIndex(x => x.id === member.status); 
                                    const isDone = i < currentIdx; 
                                    const isCurrent = i === currentIdx; 
                                    return (
                                        <div key={s.id} className="relative z-10 flex flex-col items-center gap-4">
                                            <div className={cn("w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all shadow-lg", isDone ? "bg-emerald-500 border-emerald-400 text-white" : isCurrent ? "bg-white border-[#E51636] text-[#E51636] ring-8 ring-red-50 scale-110 shadow-xl" : "bg-white border-slate-100 text-slate-200")}>
                                                {isDone ? <Check className="w-5 h-5" /> : i+1}
                                            </div>
                                            <span className={cn("text-[9px] lg:text-[10px] font-bold uppercase tracking-widest", isCurrent ? "text-slate-900" : "text-slate-300")}>{s.title}</span>
                                        </div>
                                    ) 
                                })}
                            </div>
                        </div>

                        {/* Badges */}
                        <div className="space-y-4 lg:space-y-6">
                            <div className="flex items-center gap-3 px-2 lg:px-4">
                                <Award className="w-5 lg:w-6 h-5 lg:h-6 text-amber-500" />
                                <span className="text-xs font-black uppercase tracking-widest text-slate-900">Validated Accolades</span>
                            </div>
                            <div className="flex gap-4 overflow-x-auto no-scrollbar pb-4 lg:pb-2 pl-2">
                                {member.badges?.map((badge: any, i: number) => { 
                                    const Icon = TACTICAL_ICONS.find(ic => ic.id === badge.iconId)?.icon || Medal; 
                                    return (
                                        <div key={i} className="min-w-[180px] lg:min-w-[220px] p-5 lg:p-6 rounded-[32px] lg:rounded-[44px] bg-white border border-slate-100 shadow-sm flex flex-col items-center text-center gap-4 hover:shadow-xl transition-all">
                                            <div className="p-3 lg:p-4 rounded-2xl shadow-inner" style={{ backgroundColor: `${badge.hex}10`, color: badge.hex }}><Icon className="w-6 h-6 lg:w-8 lg:h-8" /></div>
                                            <span className="text-[10px] lg:text-xs font-bold text-slate-800 uppercase tracking-tight line-clamp-2">{badge.label}</span>
                                        </div>
                                    ) 
                                })}
                                {(!member.badges || member.badges.length === 0) && (
                                    <div className="w-full text-center py-8 border-2 border-dashed border-slate-200 rounded-[32px] text-slate-300">
                                        <p className="text-[10px] font-bold uppercase tracking-widest">No badges awarded</p>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Activity Grid */}
                        <div className="bg-white p-6 lg:p-10 rounded-[32px] lg:rounded-[56px] border border-slate-100 shadow-sm space-y-6 lg:space-y-8">
                            <div className="flex items-center justify-between px-1">
                                <div className="flex items-center gap-3">
                                    <div className="p-2 lg:p-3 bg-slate-900 text-white rounded-xl lg:rounded-2xl shadow-lg"><Command className="w-4 h-4 lg:w-5 lg:h-5" /></div>
                                    <div className="flex flex-col">
                                        <span className="text-[9px] lg:text-xs font-black uppercase tracking-[0.2em] text-slate-300">Command Center</span>
                                        <span className="text-base lg:text-xl font-bold text-slate-900">Intelligence</span>
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
                                {/* Operational Pulse */}
                                <div className="lg:col-span-7 space-y-6 lg:space-y-8 relative pl-4 lg:pl-6 border-l-2 border-slate-50">
                                    <div className="flex items-center gap-2 mb-4">
                                        <Activity className="w-4 h-4 text-[#E51636]" />
                                        <span className="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">Activity Stream</span>
                                    </div>
                                    <div className="space-y-6 lg:space-y-8">
                                        {timelineData.slice(0, 5).map((item, idx) => (
                                            <div key={idx} className="relative group">
                                                <div className="absolute -left-[23px] lg:-left-[31px] top-1.5 w-3 h-3 lg:w-4 lg:h-4 rounded-full border-[3px] border-white bg-slate-200 group-hover:bg-[#E51636] transition-all shadow-md z-10" />
                                                <div className="space-y-1">
                                                    <div className="flex items-center gap-2 lg:gap-3">
                                                        <span className={cn("px-2 py-0.5 rounded-md text-[8px] lg:text-[9px] font-black uppercase", item.category === 'MISSION' ? 'bg-blue-50 text-[#004F71]' : item.category === '1-ON-1' ? 'bg-purple-50 text-purple-700' : 'bg-emerald-50 text-emerald-600')}>{item.category}</span>
                                                        <span className="text-[9px] lg:text-[10px] font-bold text-slate-300 uppercase">{formatDistanceToNow(item.date)} ago</span>
                                                    </div>
                                                    <p className="text-sm lg:text-base font-bold text-slate-800 tracking-tight line-clamp-1">{item.title}</p>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Strategic Board */}
                                <div className="lg:col-span-5 space-y-4">
                                    <div className="flex items-center gap-2 mb-2 px-1">
                                        <Target className="w-4 h-4 text-[#004F71]" />
                                        <span className="text-[10px] font-black uppercase tracking-[0.2em] text-slate-400">Key Objectives</span>
                                    </div>
                                    {timelineData.filter(i => i.category === 'GOAL' || i.category === '1-ON-1').slice(0, 3).map((item, idx) => (
                                        <div key={idx} onClick={() => handleTimelineItemClick(item)} className={cn("p-5 lg:p-6 bg-slate-50 border border-slate-100 rounded-[24px] lg:rounded-[32px] shadow-sm hover:shadow-lg transition-all cursor-pointer relative overflow-hidden", item.category === '1-ON-1' && "border-purple-100/50 bg-purple-50/20")}>
                                            <div className="flex justify-between items-start mb-3 relative z-10">
                                                <div className="flex items-center gap-2">
                                                    {item.category === '1-ON-1' && <div className="p-1 bg-purple-100 text-purple-600 rounded-lg"><Lightbulb className="w-3 h-3" /></div>}
                                                    <p className="text-sm font-bold leading-tight text-slate-800 line-clamp-1">{item.title}</p>
                                                </div>
                                            </div>
                                            
                                            {item.category === 'GOAL' ? (
                                                <div className="space-y-2 relative z-10"><div className="h-1.5 w-full bg-slate-200 rounded-full overflow-hidden"><motion.div initial={{ width: 0 }} animate={{ width: '70%' }} className="h-full bg-[#E51636]" /></div></div>
                                            ) : (
                                                <div className="space-y-3 relative z-10">
                                                    <div><div className="text-[8px] font-black uppercase text-slate-400 tracking-widest mb-0.5">Goal</div><p className="text-[11px] font-medium text-slate-700 leading-snug line-clamp-2">{item.goal || "No goal recorded."}</p></div>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </motion.div>
                )}
                
                {/* --- TAB: CURRICULUM (REFACTORED FOR BEAUTIFUL MOBILE DISPLAY) --- */}
                {activeTab === 'curriculum' && (
                   <motion.div key="curriculum" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="h-full flex flex-col bg-white">
                      {!selectedSectionId ? (
                         // PHASE SELECTION GRID
                         <div className="p-4 lg:p-10 grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 overflow-y-auto h-full bg-slate-50/30 pb-24">
                            {filteredCurriculum.map((section, i) => (
                                <motion.div whileHover={{ y: -5, scale: 1.01 }} key={section.id} onClick={() => { setSelectedSectionId(section.id); setIframeLoading(true); }} className="p-6 lg:p-8 rounded-[32px] lg:rounded-[48px] bg-white border border-slate-200 transition-all duration-500 cursor-pointer shadow-sm hover:shadow-xl relative overflow-hidden group flex flex-col justify-between h-[220px] lg:h-[320px]">
                                    <div className={cn("absolute -inset-16 opacity-0 group-hover:opacity-5 blur-[80px] rounded-[100px] transition-opacity duration-700", brandBg)} />
                                    <div className={cn("absolute top-6 right-6 px-3 py-1.5 rounded-2xl flex flex-col items-center font-black text-white shadow-xl", brandBg)}><span className="text-[7px] opacity-60 uppercase tracking-widest leading-none mb-0.5">PHASE</span><span className="text-sm leading-none">0{i + 1}</span></div>
                                    <div className="space-y-4 lg:space-y-6 relative z-10"><div className={cn("p-3 lg:p-4 rounded-3xl text-white shadow-lg w-fit", brandBg)}><HardDrive className="w-4 h-4 lg:w-5 lg:h-5" /></div><div><h4 className="text-lg lg:text-2xl font-bold text-slate-900 group-hover:text-[#E51636] transition-colors tracking-tight line-clamp-2">{section.title}</h4><p className="text-[10px] font-bold text-slate-300 uppercase tracking-widest">Manual pgs {section.pageStart}-{section.pageEnd}</p></div></div>
                                    <div className="space-y-4 relative z-10"><div className="flex items-center gap-2 text-slate-400"><Layers className="w-4 h-4" /><span className="text-[10px] font-bold uppercase tracking-widest">{section.tasks?.length || 0} Modules</span></div></div>
                                </motion.div>
                            ))}
                         </div>
                      ) : (
                         // DETAILED VIEW (Responsive Split)
                         <div className="h-full flex flex-col">
                            {/* Inner Header */}
                            <div className="px-4 lg:px-8 h-16 border-b border-slate-100 flex items-center justify-between bg-white shrink-0 shadow-[0_4px_20px_rgba(0,0,0,0.02)] z-30">
                                <button onClick={() => setSelectedSectionId(null)} className="flex items-center gap-2 text-slate-400 hover:text-slate-900 text-[10px] font-bold transition-all bg-white hover:bg-slate-50 px-3 py-1.5 rounded-lg border border-transparent hover:border-slate-200">
                                    <ChevronLeft className="w-4 h-4" /> Back
                                </button>
                                <div className="flex items-center gap-3">
                                    <span className="text-xs lg:text-sm font-bold text-slate-900 tracking-tight truncate max-w-[150px] lg:max-w-none">{activeSection?.title}</span>
                                    <div className="h-1.5 w-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_#10b981]" />
                                </div>
                            </div>

                            <div className="flex-1 flex flex-col lg:flex-row overflow-hidden relative">
                                
                                {/* DESKTOP: Left Side Manual / MOBILE: Hidden (Moved to Modal) */}
                                <div className="hidden lg:block flex-1 relative p-8 pb-12 overflow-hidden bg-slate-50/50">
                                    <div className="relative h-full w-full rounded-[40px] shadow-xl border border-white bg-white overflow-hidden ring-1 ring-black/5">
                                        <iframe src={getEmbedUrl()} className="w-full h-full border-none" onLoad={() => setIframeLoading(false)} />
                                        {iframeLoading && <div className="absolute inset-0 z-10 flex flex-col items-center justify-center bg-white gap-4"><Loader2 className="w-10 h-10 animate-spin text-[#E51636]" /><p className="text-[10px] font-bold text-slate-300 uppercase tracking-widest">Loading Manual...</p></div>}
                                    </div>
                                </div>

                                {/* MODULE LIST (Full Width Mobile / Right Side Desktop) */}
                                <div className="flex-1 overflow-y-auto custom-scrollbar bg-white border-l border-slate-100 relative pb-32 lg:pb-20">
                                    
                                    {/* Mobile Only: Manual Card Banner */}
                                    <div className="lg:hidden p-4 pb-0">
                                        <button 
                                            onClick={() => setIsManualModalOpen(true)}
                                            className={cn(
                                                "w-full p-6 rounded-[32px] text-white shadow-xl relative overflow-hidden group flex items-center justify-between",
                                                brandBg
                                            )}
                                        >
                                            <div className="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-2xl -mr-10 -mt-10" />
                                            <div className="relative z-10 flex items-center gap-4">
                                                <div className="p-3 bg-white/20 rounded-2xl backdrop-blur-md">
                                                    <BookOpen className="w-6 h-6 text-white" />
                                                </div>
                                                <div className="text-left">
                                                    <p className="text-[10px] font-black uppercase tracking-[0.2em] text-white/60 mb-1">Mission Brief</p>
                                                    <p className="text-xl font-bold leading-none">View Manual</p>
                                                </div>
                                            </div>
                                            <div className="relative z-10 p-2 bg-white/10 rounded-full">
                                                <ExternalLink className="w-5 h-5 text-white" />
                                            </div>
                                        </button>
                                    </div>

                                    <div className="sticky top-0 z-20 bg-white/95 backdrop-blur-xl border-b border-slate-50 px-6 py-4 mt-2">
                                        <div className="flex items-center gap-3"><div className="p-2 bg-slate-50 text-slate-400 rounded-xl shadow-sm border border-slate-100"><ClipboardCheck className="w-4 h-4" /></div><div className="flex flex-col"><span className="text-[9px] font-black uppercase tracking-[0.2em] text-slate-300">Curriculum</span><span className="text-sm font-bold text-slate-900">Modules</span></div></div>
                                    </div>
                                    
                                    <div className="p-6 lg:p-10 pb-20 relative">
                                        {/* Timeline Line */}
                                        <div className="absolute left-[39px] lg:left-[55px] top-10 bottom-0 w-0.5 bg-slate-100" />
                                        
                                        <div className="space-y-8 relative z-10">
                                            {activeSection?.tasks?.map((task: any, idx: number) => {
                                                const isCompleted = localCompletedIds.includes(task.id);
                                                return (
                                                    <div key={task.id} className="group relative pl-4">
                                                        {/* Connector Dot */}
                                                        <div className={cn("absolute left-[-23px] top-8 w-4 h-4 rounded-full border-[3px] border-white shadow-md z-20 transition-colors", isCompleted ? "bg-emerald-500" : "bg-slate-200")} />
                                                        
                                                        {/* Task Card */}
                                                        <div className={cn("p-6 lg:p-8 bg-white rounded-[32px] border shadow-sm transition-all", isCompleted ? "border-emerald-100 bg-emerald-50/10" : "border-slate-100")}>
                                                            <div className="flex justify-between items-start mb-6">
                                                                <div className="flex items-center gap-3">
                                                                    <div className={cn("p-2.5 rounded-2xl transition-colors shadow-sm", isCompleted ? "bg-emerald-100 text-emerald-600" : "bg-slate-50 text-slate-400")}>
                                                                        {isCompleted ? <Check className="w-5 h-5" /> : <Terminal className="w-5 h-5" />}
                                                                    </div>
                                                                    <span className={cn("text-[10px] font-black uppercase tracking-widest", isCompleted ? "text-emerald-600" : "text-slate-300")}>Block 0{idx + 1}</span>
                                                                </div>
                                                            </div>
                                                            <div className="space-y-2 mb-8">
                                                                <h5 className={cn("text-xl lg:text-2xl font-bold leading-tight", isCompleted ? "text-emerald-900" : "text-slate-900")}>{task.title}</h5>
                                                            </div>
                                                            <button 
                                                                onClick={() => handleVerifyTask(task.id, activeSection.id)} 
                                                                className={cn(
                                                                    "w-full py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest transition-all shadow-lg active:scale-95", 
                                                                    isCompleted ? "bg-emerald-500 text-white shadow-emerald-200" : "bg-slate-900 text-white shadow-slate-200"
                                                                )}
                                                            >
                                                                {isCompleted ? "Verified" : "Verify Module"}
                                                            </button>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </div>
                            </div>
                         </div>
                      )}
                   </motion.div>
                )}

                {/* --- TAB: PERFORMANCE --- */}
                {activeTab === 'performance' && (
                    <motion.div key="performance" initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="p-4 lg:p-12 overflow-y-auto h-full custom-scrollbar pb-24">
                        <div className="relative pl-8 lg:pl-12 space-y-6 lg:space-y-8 border-l-2 border-slate-100 ml-4 lg:ml-6 pb-20">
                            {timelineData.map((item, idx) => { 
                                const isAward = item.category === 'AWARD'; 
                                const isStrategy = item.category === '1-ON-1';
                                let Icon = ShieldCheck;
                                if (isAward) Icon = TACTICAL_ICONS.find(ic => ic.id === item.iconId)?.icon || Medal;
                                if (isStrategy) Icon = MessageSquare;

                                return (
                                    <motion.div initial={{ x: -20, opacity: 0 }} animate={{ x: 0, opacity: 1 }} transition={{ delay: idx * 0.05 }} key={idx} className="relative group cursor-pointer" onClick={() => handleTimelineItemClick(item)}>
                                        <div className={cn("absolute -left-[48px] lg:-left-[63px] top-0 w-8 h-8 lg:w-10 lg:h-10 rounded-2xl flex items-center justify-center border-4 border-white shadow-xl z-10", isAward ? "bg-white" : isStrategy ? "bg-purple-600 text-white" : "bg-slate-900 text-white")} style={isAward ? { color: item.hex } : {}}><Icon className="w-4 h-4 lg:w-5 lg:h-5" /></div>
                                        <div className={cn("p-6 lg:p-8 rounded-[32px] lg:rounded-[48px] border shadow-sm transition-all relative overflow-hidden", isStrategy ? "bg-purple-50/30 border-purple-100" : "bg-white border-slate-100")}>
                                            <div className="flex justify-between mb-3 relative z-10"><div className="flex items-center gap-3"><span className={cn("px-3 py-1 rounded-full text-[8px] font-bold uppercase tracking-widest shadow-inner", isAward ? "bg-emerald-50 text-emerald-600" : isStrategy ? "bg-purple-100 text-purple-700" : "bg-red-50 text-[#E51636]")}>{item.category}</span><span className="text-[10px] font-medium text-slate-400">{formatDistanceToNow(item.date)} ago</span></div></div>
                                            <h4 className="text-xl lg:text-2xl font-bold text-slate-900 tracking-tight leading-none mb-3 relative z-10">{item.title}</h4>
                                            {isStrategy ? (
                                                <div className="space-y-4 relative z-10"><div><div className="text-[9px] font-bold uppercase text-slate-400 tracking-widest mb-1">1-on-1 Goal</div><p className="text-sm font-medium text-slate-700 leading-relaxed">{item.goal || "No goal recorded."}</p></div><div><div className="text-[9px] font-bold uppercase text-slate-400 tracking-widest mb-1">Session Summary</div><p className="text-sm font-medium text-slate-500 leading-relaxed italic">{item.summary || "No summary recorded."}</p></div></div>
                                            ) : (<p className="text-sm lg:text-base font-medium text-slate-500 leading-relaxed relative z-10 whitespace-pre-wrap">{item.description}</p>)}
                                        </div>
                                    </motion.div>
                                ) 
                            })}
                        </div>
                    </motion.div>
                )}

             </AnimatePresence>
          </div>

          {/* --- FOOTER --- */}
          <div className="px-4 lg:px-12 h-20 lg:h-24 bg-white border-t border-slate-100 flex items-center justify-end shrink-0 gap-6 safe-area-pb">
             <button onClick={() => setIsLogModalOpen(true)} className="flex items-center gap-3 px-6 lg:px-8 py-3 lg:py-3.5 bg-[#E51636] text-white rounded-3xl font-bold uppercase text-[10px] lg:text-[11px] tracking-wider shadow-lg active:scale-95 transition-all hover:scale-[1.03]"><Plus className="w-4 h-4" /> Add Record</button>
          </div>
        </div>
      </motion.div>

      {/* --- LOG MODAL --- */}
      <AnimatePresence>
        {isLogModalOpen && (
            <div className="fixed inset-0 z-[200] flex items-end lg:items-center justify-center lg:p-4">
                <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-[#0F172A]/90 backdrop-blur-md" onClick={() => setIsLogModalOpen(false)} />
                <motion.div initial={{ scale: 0.98, opacity: 0, y: 20 }} animate={{ scale: 1, y: 0, opacity: 1 }} exit={{ scale: 0.98, opacity: 0, y: 20 }} className="bg-white w-full max-w-6xl rounded-t-[40px] lg:rounded-[48px] shadow-2xl overflow-hidden flex flex-col h-[90vh] lg:max-h-[92vh] border border-white/20 relative z-10">
                    {/* HEADER */}
                    <div className="bg-[#E51636] px-6 lg:px-12 py-8 lg:py-10 text-white shrink-0 overflow-hidden relative">
                        <div className="absolute inset-0 opacity-10 bg-[radial-gradient(#fff_1px,transparent_1px)] [background-size:16px_16px]" />
                        <div className="absolute top-0 right-0 p-6 opacity-5 rotate-12"><Command className="w-48 h-48" /></div>
                        <div className="relative z-10 flex items-center justify-between gap-10">
                            <div className="flex-1">
                                <div className="flex items-center gap-3 mb-4"><div className="px-3 py-1 bg-white/10 rounded-full border border-white/20 backdrop-blur-xl flex items-center gap-2"><span className="text-[8px] font-black uppercase tracking-[0.4em] text-white">Log Deployment Console</span></div><Sparkles className="w-3 h-3 text-white/40 animate-pulse" /></div>
                                <div className="flex flex-col gap-6"><h2 className="text-2xl lg:text-4xl font-black tracking-tighter leading-none text-white uppercase italic">Deploy Operational Log</h2><div className={cn("relative max-w-3xl rounded-[22px] transition-all duration-500 overflow-hidden border-2", isTitleFocused ? "bg-white border-white shadow-[0_0_40px_rgba(255,255,255,0.2)]" : "bg-white/10 border-white/20")}><div className="flex items-center px-4 lg:px-6 py-4 gap-4 relative"><span className={cn("text-xl font-black font-mono transition-colors", isTitleFocused ? "text-[#E51636]" : "text-white/40")}>&gt;</span><input autoFocus onFocus={() => setIsTitleFocused(true)} onBlur={() => setIsTitleFocused(false)} value={logDraft.title} onChange={e => setLogDraft({...logDraft, title: e.target.value})} className={cn("w-full bg-transparent text-lg lg:text-xl font-bold outline-none transition-colors placeholder:transition-colors", isTitleFocused ? "text-slate-900" : "text-white")} placeholder="Identify log objective..." />{!logDraft.title && <motion.div animate={{ opacity: [1, 0, 1] }} transition={{ repeat: Infinity, duration: 0.8 }} className={cn("absolute w-3 h-6 rounded-sm left-12 top-1/2 -translate-y-1/2 pointer-events-none", isTitleFocused ? "bg-[#E51636]" : "bg-white/40")} />}</div></div></div>
                            </div>
                            <button onClick={() => setIsLogModalOpen(false)} className="shrink-0 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-all"><X className="w-6 h-6" /></button>
                        </div>
                    </div>
                    
                    {/* BODY */}
                    <div className="p-6 lg:p-8 space-y-8 overflow-y-auto custom-scrollbar flex-1 bg-slate-50 relative z-20">
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div className="space-y-3"><label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Layers className="w-3 h-3" /> Classification</label><div className="flex flex-col gap-1.5">{CATEGORIES.map((cat: any) => { const isSelected = logDraft.type === cat.id; const style = getTypeColor(cat.id).split(' '); return (<button key={cat.id} onClick={() => setLogDraft({...logDraft, type: cat.id})} className={cn("w-full px-5 py-4 rounded-2xl text-[10px] font-black uppercase tracking-widest border transition-all flex items-center justify-between shadow-sm", isSelected ? `${style[0]} ${style[1]} ${style[2]} shadow-xl ring-4 ring-white` : "bg-white border-slate-200 text-slate-400 hover:border-slate-300")}><div className="flex items-center gap-3"><cat.icon className="w-3.5 h-3.5" />{getEventLabel(cat.id)}</div>{isSelected && <Check className="w-3.5 h-3.5" />}</button>) })}</div></div>
                            <div className="space-y-3"><label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Clock className="w-3.5 h-3.5" /> Scheduling</label><IntegratedRangePicker start={logDraft.startDate} end={logDraft.endDate} onChange={(s, e) => setLogDraft({...logDraft, startDate: s, endDate: e})} /></div>
                            <div className="space-y-6"><label className="text-[9px] font-black uppercase text-slate-400 tracking-[0.2em] px-2 flex items-center gap-2"><Activity className="w-3 h-3" /> Logistics</label><div className="bg-white p-5 rounded-[40px] border border-slate-100 shadow-sm space-y-5"><WebAppDropdown label="Mission Lead" icon={Crown} placeholder="Select Leader..." options={team.filter(m => m.status.includes('Director') || m.status.includes('Leader'))} selected={team.find(m => m.id === logDraft.assignee)} onSelect={(u: any) => setLogDraft({...logDraft, assignee: u.id, assigneeName: u.name})} /><div className="p-4 bg-slate-50 rounded-2xl border border-slate-100"><span className="text-[9px] font-black text-slate-300 uppercase tracking-widest mb-1 block">Locked Participant</span><div className="flex items-center gap-3"><div className={cn("w-6 h-6 rounded-lg flex items-center justify-center font-black text-[10px] text-white shadow-sm", isFOH ? 'bg-[#004F71]' : 'bg-[#E51636]')}>{initials}</div><span className="text-xs font-bold text-slate-900">{member.name}</span></div></div></div></div>
                        </div>
                        <div className="relative group"><div className={cn("absolute -inset-1 bg-gradient-to-r from-[#E51636] to-red-400 rounded-[32px] blur opacity-0 transition duration-500", isBriefingFocused && "opacity-10")} /><div className="relative bg-white border border-slate-200 rounded-[28px] overflow-hidden shadow-sm transition-all duration-500"><div className="bg-slate-50/80 border-b border-slate-100 px-6 py-2.5 flex items-center justify-between"><div className="flex items-center gap-2.5"><Terminal className="w-3.5 h-3.5 text-[#E51636]" /><span className="text-[9px] font-black uppercase text-slate-600 tracking-[0.3em]">Operational Intelligence</span></div></div><div className="relative"><textarea onFocus={() => setIsBriefingFocused(true)} onBlur={() => setIsBriefingFocused(false)} value={logDraft.description} onChange={e => setLogDraft({...logDraft, description: e.target.value})} className="w-full h-32 p-6 bg-transparent text-sm font-medium outline-none resize-none text-slate-700 leading-relaxed" placeholder="Detail operational context, success criteria, or specific requirements..." /></div></div></div>
                    </div>

                    {/* FOOTER */}
                    <div className="px-6 lg:px-10 py-6 bg-white border-t border-slate-100 flex justify-between items-center shrink-0 relative z-20 safe-area-pb"><button onClick={() => setIsLogModalOpen(false)} className="px-6 lg:px-10 py-5 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:text-[#E51636] transition-all">Discard</button><button onClick={handleDeployLog} className="px-8 lg:px-12 py-4 bg-[#004F71] text-white rounded-2xl font-black uppercase text-[10px] tracking-[0.4em] shadow-2xl flex items-center gap-3 hover:scale-[1.03] transition-all active:scale-95"><Save className="w-4 h-4" /> Deploy Mission</button></div>
                </motion.div>
            </div>
        )}
      </AnimatePresence>

      {/* --- SESSION COMPLETION MODAL --- */}
      <AnimatePresence>
          {selectedSession && (
              <OneOnOneSessionModal 
                  event={selectedSession} 
                  onClose={() => setSelectedSession(null)} 
                  onUpdate={handleUpdateEvent} 
              />
          )}
      </AnimatePresence>

      {/* --- MANUAL VIEWER MODAL (Mobile & Desktop) --- */}
      <AnimatePresence>
          {isManualModalOpen && activeSection && (
              <ManualViewerModal 
                  url={getEmbedUrl()}
                  title={activeSection.title}
                  pages={`${activeSection.pageStart}-${activeSection.pageEnd}`}
                  color={brandBg}
                  onClose={() => setIsManualModalOpen(false)}
              />
          )}
      </AnimatePresence>
    </ClientPortal>
  );
};
--- FILE: ./app/(main)/team/_components/TrainerRecruitmentModal.tsx ---
"use client";

import { useMemo, useState, useEffect } from "react";
import { AnimatePresence, motion, useDragControls, Variants } from "framer-motion";
import { 
  X, Crown, Zap, GripVertical, ShieldCheck, 
  User, ChevronDown, ChevronUp, Users 
} from "lucide-react";
import { useAppStore } from "@/lib/store/useStore";
import { cn } from "@/lib/utils";
import { TeamMember } from "../../calendar/_components/types";

// --- DRAGGABLE TRAINER PILL ---
function DraggableTrainerPill({ trainer, onDragStart, onDragEnd }: { trainer: TeamMember; onDragStart: (id: string) => void; onDragEnd: (event: any, info: any, trainer: TeamMember) => void }) {
    const controls = useDragControls();

    return (
        <motion.div
            drag
            dragControls={controls}
            dragListener={false}
            dragSnapToOrigin
            dragElastic={0.1}
            whileDrag={{ scale: 1.1, zIndex: 100, cursor: "grabbing" }}
            onDragStart={() => onDragStart(trainer.id)}
            onDragEnd={(event, info) => onDragEnd(event, info, trainer)}
            className="group flex-shrink-0 relative"
        >
            <div 
                onPointerDown={(e) => controls.start(e)}
                className="flex items-center gap-3 p-3 bg-white/90 backdrop-blur-md border border-white/50 rounded-2xl shadow-[0_4px_20px_-4px_rgba(0,0,0,0.1)] hover:shadow-xl hover:border-blue-200 hover:scale-[1.02] transition-all cursor-grab active:cursor-grabbing w-[260px] md:w-full ring-1 ring-slate-900/5 select-none"
            >
                {/* Avatar with Status Ring */}
                <div className="relative w-10 h-10 rounded-xl overflow-hidden shrink-0 bg-slate-100 shadow-inner">
                    {trainer.image && !trainer.image.includes("ui-avatars.com") ? (
                        <img src={trainer.image} className="w-full h-full object-cover" alt={trainer.name} />
                    ) : (
                        <div className="w-full h-full flex items-center justify-center bg-[#004F71] text-white font-black text-xs">
                            {trainer.name.charAt(0)}
                        </div>
                    )}
                    <div className="absolute inset-0 ring-1 ring-inset ring-black/10 rounded-xl" />
                </div>
                
                {/* Info */}
                <div className="flex flex-col flex-1 min-w-0">
                    <span className="text-xs font-[900] text-slate-800 truncate">{trainer.name}</span>
                    <div className="flex items-center gap-1 text-[9px] font-bold uppercase tracking-wider text-slate-400">
                        <ShieldCheck className="w-3 h-3 text-emerald-500" />
                        <span className="truncate">{trainer.role.replace('Assistant', 'Asst.')}</span>
                    </div>
                </div>

                {/* Grip Handle */}
                <div className="w-6 h-8 flex items-center justify-center rounded-lg bg-slate-50 text-slate-300 group-hover:bg-[#004F71] group-hover:text-white transition-colors">
                    <GripVertical className="w-4 h-4" />
                </div>
            </div>
        </motion.div>
    );
}

interface Props {
    isOpen: boolean;
    onClose: () => void;
    onDragStart: (id: string) => void;
    onDragEnd: (event: any, info: any, trainer: TeamMember) => void;
}

export default function TrainerRecruitmentModal({ isOpen, onClose, onDragStart, onDragEnd }: Props) {
    const { team } = useAppStore();
    const [isMobile, setIsMobile] = useState(false);

    useEffect(() => {
        const check = () => setIsMobile(window.innerWidth < 1024);
        check();
        window.addEventListener('resize', check);
        return () => window.removeEventListener('resize', check);
    }, []);

    // Filter for Leadership Roles
    const availableMentors = useMemo(() => {
        return team.filter(member => 
            ["Team Leader", "Assistant Director", "Director"].includes(member.status)
        );
    }, [team]);

    // --- ANIMATION VARIANTS (Fixed Typing) ---
    const desktopVariants: Variants = {
        hidden: { x: "100%", opacity: 0 },
        visible: { x: 0, opacity: 1, transition: { type: "spring", damping: 30, stiffness: 300 } },
        exit: { x: "100%", opacity: 0 }
    };

    const mobileVariants: Variants = {
        hidden: { y: "100%", opacity: 0 },
        visible: { y: 0, opacity: 1, transition: { type: "spring", damping: 25, stiffness: 300 } },
        exit: { y: "100%", opacity: 0 }
    };

    return (
        <AnimatePresence>
            {isOpen && (
                <>
                    {/* BACKDROP (Only needed on desktop to close by clicking away, on mobile we want to see the grid) */}
                    <motion.div 
                        initial={{ opacity: 0 }} 
                        animate={{ opacity: 1 }} 
                        exit={{ opacity: 0 }} 
                        onClick={onClose}
                        className="fixed inset-0 bg-slate-900/20 backdrop-blur-[2px] z-[60] lg:block hidden"
                    />

                    <motion.div
                        key="trainer-panel"
                        variants={isMobile ? mobileVariants : desktopVariants}
                        initial="hidden"
                        animate="visible"
                        exit="exit"
                        className={cn(
                            "fixed z-[70] flex flex-col shadow-2xl pointer-events-auto",
                            // DESKTOP: Sidebar Right
                            "lg:top-24 lg:right-6 lg:bottom-6 lg:w-[320px] lg:rounded-[32px] lg:bg-white/90 lg:backdrop-blur-xl lg:border lg:border-white/50",
                            // MOBILE: Bottom Dock (Horizontal Scroll)
                            "left-0 right-0 bottom-0 h-auto rounded-t-[32px] bg-[#F8FAFC] border-t border-slate-200"
                        )}
                    >
                        {/* --- HEADER --- */}
                        <div className="p-5 lg:p-6 border-b border-slate-100 flex items-center justify-between shrink-0 bg-white/50 backdrop-blur-md lg:rounded-t-[32px] rounded-t-[32px]">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-[#004F71] text-white rounded-xl shadow-lg shadow-blue-900/20">
                                    <Crown className="w-4 h-4" />
                                </div>
                                <div className="flex flex-col">
                                    <h3 className="text-sm font-[900] text-slate-900 uppercase tracking-tight leading-none">Trainer Command</h3>
                                    <span className="text-[9px] font-bold text-slate-400 uppercase tracking-widest mt-0.5">Drag to Assign</span>
                                </div>
                            </div>
                            <div className="flex items-center gap-2">
                                <span className="px-2 py-1 bg-slate-100 rounded-lg text-[9px] font-black text-slate-500">{availableMentors.length} Active</span>
                                <button onClick={onClose} className="p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors">
                                    {isMobile ? <ChevronDown className="w-5 h-5" /> : <X className="w-5 h-5" />}
                                </button>
                            </div>
                        </div>

                        {/* --- CONTENT AREA --- */}
                        <div className={cn(
                            "flex-1 p-4 lg:p-6 overflow-y-auto custom-scrollbar relative z-10",
                            isMobile ? "overflow-x-auto overflow-y-hidden flex flex-row gap-4 pb-8" : "flex flex-col gap-3"
                        )}>
                            {/* Empty State */}
                            {availableMentors.length === 0 && (
                                <div className="flex flex-col items-center justify-center h-full text-slate-400 border-2 border-dashed border-slate-200 rounded-2xl p-8 min-w-[300px]">
                                    <Users className="w-8 h-8 mb-2 opacity-50" />
                                    <p className="text-[10px] font-bold uppercase tracking-widest">No Leaders Available</p>
                                </div>
                            )}

                            {/* Mentor List */}
                            {availableMentors.map(trainer => (
                                <DraggableTrainerPill 
                                    key={trainer.id} 
                                    trainer={trainer} 
                                    onDragStart={onDragStart} 
                                    onDragEnd={onDragEnd} 
                                />
                            ))}
                            
                            {/* Mobile Spacer to allow scrolling past last item */}
                            {isMobile && <div className="w-4 shrink-0" />}
                        </div>

                        {/* --- FOOTER (Desktop Only) --- */}
                        <div className="hidden lg:block p-5 border-t border-slate-100 bg-slate-50/50 lg:rounded-b-[32px]">
                            <div className="flex items-start gap-3 p-3 rounded-xl bg-blue-50/50 border border-blue-100/50">
                                <Zap className="w-4 h-4 text-[#004F71] mt-0.5" />
                                <p className="text-[10px] text-slate-500 font-medium leading-relaxed">
                                    Drag a trainer card onto any team member to establish a mentorship link.
                                </p>
                            </div>
                        </div>
                    </motion.div>
                </>
            )}
        </AnimatePresence>
    );
}
--- FILE: ./app/(main)/team/_components/Badge.tsx ---
"use client";

import { cn } from "@/lib/utils";

interface BadgeProps {
  children: React.ReactNode;
  /**
   * Defines the color palette for the badge.
   * Defaults to 'slate'.
   */
  color?: "blue" | "red" | "green" | "orange" | "slate";
  /**
   * Optional Lucide icon to display inside the badge.
   */
  icon?: any;
  /**
   * Additional Tailwind classes for layout adjustments (e.g., margins).
   */
  className?: string;
}

export const Badge = ({ 
  children, 
  color = "slate", 
  icon: Icon, 
  className 
}: BadgeProps) => {
  
  // High-contrast color mapping following the Operational Command aesthetic
  const styles = {
    blue: "bg-blue-50 text-[#004F71] border-blue-100 shadow-sm shadow-blue-900/5",
    red: "bg-red-50 text-[#E51636] border-red-100 shadow-sm shadow-red-900/5",
    green: "bg-emerald-50 text-emerald-700 border-emerald-100 shadow-sm shadow-emerald-900/5",
    orange: "bg-orange-50 text-orange-700 border-orange-100 shadow-sm shadow-orange-900/5",
    slate: "bg-slate-100 text-slate-600 border-slate-200 shadow-sm"
  };

  return (
    <div 
      className={cn(
        "px-3 py-1.5 rounded-full border text-[9px] font-black uppercase tracking-widest flex items-center gap-2 shrink-0 transition-all",
        styles[color],
        className
      )}
    >
      {Icon && <Icon className="w-3 h-3" />}
      <span className="leading-none">{children}</span>
    </div>
  );
};
--- FILE: ./app/(main)/team/page.tsx ---
"use client";

import { useState, useMemo, useEffect } from "react";
import { AnimatePresence, motion, LayoutGroup, PanInfo, Transition, Variants } from "framer-motion";
import { 
  Users, Search, Zap,
  LayoutGrid, GalleryHorizontal, Layers, ChevronDown, X
} from "lucide-react";
import { cn } from "@/lib/utils";
import toast from "react-hot-toast";
import { useAppStore } from "@/lib/store/useStore";
import { Status, STAGES, TeamMember } from "../calendar/_components/types";
import { TeamCard } from "./_components/TeamCard";
import { MemberDetailSheet } from "./_components/MemberDetailSheet";
import TrainerRecruitmentModal from "./_components/TrainerRecruitmentModal";

// --- PHYSICS CONFIGURATION ---
const ISLAND_TRANSITION: Transition = {
    type: "spring",
    damping: 25,
    stiffness: 300,
    mass: 0.8
};

const CONTENT_VARIANTS: Variants = {
    closed: { 
        opacity: 0, 
        y: -10, 
        filter: "blur(4px)",
        transition: { duration: 0.2 } 
    },
    open: { 
        opacity: 1, 
        y: 0, 
        filter: "blur(0px)",
        transition: { delay: 0.1, duration: 0.3 } 
    }
};

// --- PROMOTION HUD ---
function PromotionHUD({ draggingMember }: { draggingMember?: TeamMember }) {
    return (
        <motion.div 
            initial={{ y: 100, opacity: 0, x: "-50%" }} 
            animate={{ y: 0, opacity: 1, x: "-50%" }} 
            exit={{ y: 100, opacity: 0, x: "-50%" }}
            className="fixed bottom-10 left-1/2 z-[100] w-[95%] max-w-6xl px-6 pointer-events-none"
        >
            <div className="pointer-events-auto bg-white/95 backdrop-blur-2xl border border-slate-200 rounded-[44px] p-2 shadow-2xl flex items-center overflow-hidden ring-4 ring-slate-100 flex-col md:flex-row gap-2 md:gap-0">
                <div className="bg-[#E51636] rounded-[36px] p-4 flex items-center gap-4 shadow-xl w-full md:w-auto min-w-[260px] shrink-0 relative overflow-hidden">
                    <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20 mix-blend-overlay" />
                    <div className="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-white shadow-inner"><Zap className="w-5 h-5 fill-current" /></div>
                    <div className="flex flex-col relative z-10">
                        <span className="text-[8px] font-bold text-white/80 uppercase tracking-widest">Active Deployment</span>
                        <span className="text-sm font-bold text-white truncate max-w-[150px]">{draggingMember?.name}</span>
                    </div>
                </div>
                <div className="flex-1 grid grid-cols-3 md:grid-cols-6 gap-2 px-4 w-full">
                    {STAGES.map((stage) => (
                        <div key={stage.id} data-stage-id={stage.id} className={cn(
                            "relative h-14 md:h-16 rounded-[20px] md:rounded-[24px] border-2 transition-all duration-300 flex flex-col items-center justify-center gap-1 group",
                            draggingMember?.status === stage.id ? "bg-slate-50 border-transparent opacity-20 pointer-events-none" : "bg-white border-dashed border-slate-200 hover:bg-red-50 hover:border-[#E51636] cursor-pointer"
                        )}>
                            <stage.icon className="w-3.5 h-3.5 md:w-4 md:h-4 text-slate-400 group-hover:text-[#E51636] transition-colors" />
                            <span className="text-[7px] md:text-[8px] font-bold text-slate-500 group-hover:text-[#E51636] uppercase tracking-tighter text-center leading-none">{stage.title}</span>
                        </div>
                    ))}
                </div>
            </div>
        </motion.div>
    );
}

// --- MAIN PAGE ---
export default function TeamBoardPage() {
    const { team, subscribeTeam, subscribeEvents } = useAppStore(); 
    
    // View States
    const [activeStage, setActiveStage] = useState<Status>("Team Member");
    const [activeFilter, setActiveFilter] = useState<"ALL" | "FOH" | "BOH">("ALL");
    const [viewMode, setViewMode] = useState<"grid" | "horizontal">("grid"); 
    const [searchQuery, setSearchQuery] = useState("");
    const [isIslandExpanded, setIsIslandExpanded] = useState(false);

    // Pagination State
    const [visibleCount, setVisibleCount] = useState(12);

    // Interaction States
    const [selectedMember, setSelectedMember] = useState<TeamMember | null>(null);
    const [activeTab, setActiveTab] = useState<"overview" | "curriculum" | "performance">("overview");

    // Drag & Drop States
    const [memberDraggingId, setMemberDraggingId] = useState<string | null>(null);
    const [trainerDraggingId, setTrainerDraggingId] = useState<string | null>(null);
    const [isTrainerPanelOpen, setIsTrainerPanelOpen] = useState(false);

    useEffect(() => {
        const unsubTeam = subscribeTeam();
        const unsubEvents = subscribeEvents(); 
        return () => { unsubTeam(); unsubEvents(); };
    }, [subscribeTeam, subscribeEvents]);

    // Reset pagination when filters change
    useEffect(() => {
        setVisibleCount(12);
    }, [activeStage, activeFilter, searchQuery]);

    const filteredMembers = useMemo(() => {
        return team
            .filter(m => {
                const matchesStage = m.status === activeStage;
                const matchesFilter = activeFilter === "ALL" || m.dept === activeFilter;
                const matchesSearch = m.name.toLowerCase().includes(searchQuery.toLowerCase());
                return matchesStage && matchesFilter && matchesSearch;
            })
            .sort((a, b) => a.name.localeCompare(b.name));
    }, [team, activeStage, activeFilter, searchQuery]);

    const visibleMembers = useMemo(() => {
        return filteredMembers.slice(0, visibleCount);
    }, [filteredMembers, visibleCount]);

    // -- HANDLERS --

    // Triggered when clicking the "Assign Mentor" slot on the card
    const handleOpenTrainerModal = (member: TeamMember) => {
        setIsTrainerPanelOpen(true);
        // Note: In a future iteration, we could store the 'targetMember' state here
        // to filter the modal or auto-assign upon click, but for now we open the drag interface.
    };

    const handleTrainerDragStart = (trainerId: string) => setTrainerDraggingId(trainerId);

    const handleAssignTrainer = (trainer: TeamMember, memberId: string) => {
        const member = team.find(m => m.id === memberId);
        if (member) {
            toast.success(
                <div className="flex flex-col">
                    <span className="font-bold">Mentorship Established</span>
                    <span className="text-xs opacity-90">{trainer.name} is now guiding {member.name}</span>
                </div>,
                { icon: '', style: { background: '#004F71', color: '#fff', padding: '16px', borderRadius: '16px' } }
            );
        }
    };

    const handleTrainerDragEnd = (event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo, trainer: TeamMember) => {
        setTrainerDraggingId(null);
        let clientX, clientY;
        // @ts-ignore
        if ('clientX' in event) { clientX = event.clientX; clientY = event.clientY; } 
        // @ts-ignore
        else if ('changedTouches' in event) { clientX = event.changedTouches[0]?.clientX; clientY = event.changedTouches[0]?.clientY; }
        
        if (clientX === undefined || clientY === undefined) return;
        const elementsBelow = document.elementsFromPoint(clientX, clientY);
        const teamCardElement = elementsBelow.find(el => el.closest('[data-team-card-id]'))?.closest('[data-team-card-id]');
        if (teamCardElement) {
            const memberId = teamCardElement.getAttribute('data-team-card-id');
            if (memberId) handleAssignTrainer(trainer, memberId);
        }
    };

    const activeStageTitle = STAGES.find(s => s.id === activeStage)?.title || "Roster";

    return (
        <div className="min-h-screen bg-[#F8FAFC] pb-40 relative overflow-x-hidden selection:bg-[#E51636] selection:text-white">
            <div className="absolute inset-0 pointer-events-none opacity-[0.4]" style={{ backgroundImage: 'radial-gradient(#cbd5e1 1px, transparent 1px)', backgroundSize: '24px 24px' }} />

            {/* DYNAMIC ISLAND NAV (Top) */}
            <div className="fixed top-24 left-0 right-0 z-50 flex flex-col items-center pointer-events-none px-4">
                <LayoutGroup id="island-nav">
                    <motion.div 
                        layout 
                        initial={false}
                        animate={{ 
                            width: isIslandExpanded ? "auto" : "fit-content",
                            height: isIslandExpanded ? "auto" : "44px",
                            borderRadius: isIslandExpanded ? 32 : 50
                        }}
                        transition={ISLAND_TRANSITION}
                        onClick={() => !isIslandExpanded && setIsIslandExpanded(true)}
                        className={cn(
                            "pointer-events-auto bg-white/90 backdrop-blur-3xl border border-white/60 shadow-[0_8px_30px_rgb(0,0,0,0.12)] flex flex-col relative overflow-hidden transform-gpu ring-1 ring-black/5",
                            isIslandExpanded 
                                ? "p-2 cursor-default min-w-[340px] max-w-[95vw]" 
                                : "px-2 cursor-pointer hover:scale-[1.02] active:scale-95 flex-row items-center justify-center"
                        )}
                    >
                        {/* Header Row */}
                        <motion.div layout="position" className={cn("flex items-center justify-between w-full", !isIslandExpanded && "h-full")}>
                            
                            {/* Left: Active Stage */}
                            <motion.div layout="position" className="flex items-center gap-2 px-2">
                                <motion.div layout className="flex items-center gap-2 text-[#004F71]">
                                    <div className={cn("p-1.5 rounded-full transition-colors", isIslandExpanded ? "bg-[#004F71]/10" : "bg-transparent")}>
                                        <Layers className="w-3.5 h-3.5 fill-current" />
                                    </div>
                                    <motion.span 
                                        layout="position" 
                                        className="text-[11px] font-[900] uppercase tracking-widest whitespace-nowrap text-slate-700"
                                    >
                                        {activeStageTitle}
                                    </motion.span>
                                </motion.div>

                                {/* Divider & Filter Tag */}
                                {!isIslandExpanded && (
                                    <motion.div 
                                        initial={{ opacity: 0, width: 0 }} 
                                        animate={{ opacity: 1, width: "auto" }} 
                                        exit={{ opacity: 0, width: 0 }}
                                        transition={{ duration: 0.2 }}
                                        className="flex items-center gap-2 overflow-hidden pl-1"
                                    >
                                        <div className="h-3 w-px bg-slate-200" />
                                        <span className={cn(
                                            "text-[9px] font-black px-2 py-0.5 rounded-full uppercase tracking-wider",
                                            activeFilter === 'FOH' ? "bg-blue-50 text-blue-600" : 
                                            activeFilter === 'BOH' ? "bg-red-50 text-red-600" : 
                                            "bg-slate-100 text-slate-500"
                                        )}>
                                            {activeFilter}
                                        </span>
                                    </motion.div>
                                )}
                            </motion.div>

                            {/* Right: Close Button */}
                            <AnimatePresence mode="popLayout">
                                {isIslandExpanded && (
                                    <motion.button 
                                        layout
                                        initial={{ opacity: 0, scale: 0.5, rotate: -90 }} 
                                        animate={{ opacity: 1, scale: 1, rotate: 0 }} 
                                        exit={{ opacity: 0, scale: 0.5, rotate: 90 }} 
                                        transition={{ duration: 0.2 }} 
                                        onClick={(e) => { e.stopPropagation(); setIsIslandExpanded(false); }} 
                                        className="w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-full text-slate-400 transition-colors ml-2"
                                    >
                                        <X className="w-3.5 h-3.5" />
                                    </motion.button>
                                )}
                            </AnimatePresence>
                        </motion.div>

                        {/* Expanded Content */}
                        <AnimatePresence>
                            {isIslandExpanded && (
                                <motion.div 
                                    variants={CONTENT_VARIANTS} 
                                    initial="closed" 
                                    animate="open" 
                                    exit="closed" 
                                    className="flex flex-col gap-4 w-full origin-top pt-4 px-2 pb-2"
                                >
                                    {/* Department Toggle */}
                                    <div className="bg-slate-50 p-1.5 rounded-2xl flex relative isolate">
                                        <div className="absolute inset-0 border border-slate-200/50 rounded-2xl pointer-events-none" />
                                        {(["ALL", "FOH", "BOH"] as const).map(f => {
                                            const isActive = activeFilter === f;
                                            return (
                                                <button 
                                                    key={f} 
                                                    onClick={() => setActiveFilter(f)} 
                                                    className={cn(
                                                        "flex-1 py-3 rounded-xl text-[10px] font-[900] uppercase tracking-widest transition-all relative z-10", 
                                                        isActive ? "text-slate-900 shadow-sm" : "text-slate-400 hover:text-slate-600"
                                                    )}
                                                >
                                                    {isActive && (
                                                        <motion.div 
                                                            layoutId="filter-pill"
                                                            className="absolute inset-0 bg-white rounded-xl shadow-sm ring-1 ring-black/5"
                                                            transition={ISLAND_TRANSITION}
                                                        />
                                                    )}
                                                    <span className="relative z-10">{f}</span>
                                                </button>
                                            )
                                        })}
                                    </div>

                                    {/* Stage Scroller */}
                                    <div className="flex items-center gap-2 overflow-x-auto no-scrollbar pb-1 mask-linear-fade">
                                        {STAGES.map((stage) => {
                                            const isActive = activeStage === stage.id;
                                            return (
                                                <button 
                                                    key={stage.id} 
                                                    onClick={(e) => { e.stopPropagation(); setActiveStage(stage.id); }} 
                                                    className={cn(
                                                        "px-5 py-2.5 rounded-xl flex items-center gap-2 transition-all shrink-0 border whitespace-nowrap", 
                                                        isActive 
                                                            ? "bg-[#0F172A] text-white border-transparent shadow-lg shadow-slate-900/20 scale-[1.02]" 
                                                            : "bg-white text-slate-500 border-slate-100 hover:border-slate-300 hover:bg-slate-50"
                                                    )}
                                                >
                                                    <span className="text-[10px] font-black uppercase tracking-wider">{stage.title}</span>
                                                </button>
                                            );
                                        })}
                                    </div>
                                </motion.div>
                            )}
                        </AnimatePresence>
                    </motion.div>
                </LayoutGroup>
            </div>

            {/* HEADER TEXT */}
            <div className="max-w-[1400px] mx-auto mt-[8rem] md:mt-48 px-2 md:px-8 space-y-6 relative z-10">
                <div className="hidden md:flex flex-col md:flex-row md:items-end justify-between gap-4">
                    <div className="space-y-1">
                        <h2 className="text-4xl md:text-6xl font-black text-slate-900 tracking-tighter leading-none uppercase">{activeStage}</h2>
                    </div>
                </div>
            </div>

            {/* TEAM GRID */}
            <div className="mt-4 md:mt-8 relative z-10 px-0 md:px-8 max-w-[1400px] mx-auto">
                {viewMode === "grid" ? (
                    <LayoutGroup id="roster-grid">
                        <motion.div layout className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-10 pb-40 px-4 md:px-0">
                            <AnimatePresence mode="popLayout" initial={false}>
                                {visibleMembers.length > 0 ? (
                                    visibleMembers.map((member) => (
                                        <motion.div key={member.id} layout initial={{ opacity: 0, scale: 0.9 }} animate={{ opacity: 1, scale: 1 }} exit={{ opacity: 0, scale: 0.9 }} transition={{ duration: 0.2 }} data-team-card-id={member.id} className="relative">
                                            <TeamCard 
                                                member={member} 
                                                onClick={setSelectedMember} 
                                                onAssignClick={handleOpenTrainerModal} // PASSED HERE
                                                onDragStart={() => setMemberDraggingId(member.id)} 
                                                onDragEnd={() => setMemberDraggingId(null)} 
                                                isDragging={memberDraggingId === member.id} 
                                                isDropTarget={!!trainerDraggingId} 
                                            />
                                        </motion.div>
                                    ))
                                ) : (
                                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="col-span-full h-64 flex flex-col items-center justify-center text-slate-300 border-2 border-dashed border-slate-200 rounded-[32px] w-full bg-slate-50/50 mx-4 md:mx-0">
                                        <Users className="w-12 h-12 mb-4 opacity-50" /><p className="text-xs font-black uppercase tracking-[0.2em]">No Operatives Found</p>
                                    </motion.div>
                                )}
                            </AnimatePresence>
                        </motion.div>

                        {/* LOAD MORE BUTTON */}
                        {visibleCount < filteredMembers.length && (
                             <div className="flex justify-center pb-20 -mt-20 relative z-20">
                                 <button onClick={() => setVisibleCount(prev => prev + 12)} className="bg-white hover:bg-slate-50 border border-slate-200 text-slate-500 font-bold py-3 px-8 rounded-full shadow-lg transition-all flex items-center gap-2 hover:scale-105 active:scale-95">
                                    <span className="text-xs uppercase tracking-widest">Load More Agents</span>
                                    <ChevronDown className="w-4 h-4" />
                                 </button>
                             </div>
                        )}
                    </LayoutGroup>
                ) : (
                   <div className="w-full h-[600px] flex items-center justify-center text-slate-400">
                       <p className="text-xs uppercase font-bold tracking-widest">Horizontal Mode (Optimized)</p>
                   </div>
                )}
            </div>

            {/* BOTTOM DOCK (Mobile Only) */}
            <div className="md:hidden fixed bottom-28 left-0 right-0 z-40 flex items-center pointer-events-none justify-center px-4">
                <motion.div initial={{ y: 20, opacity: 0 }} animate={{ y: 0, opacity: 1 }} transition={{ delay: 0.2 }} className="pointer-events-auto flex items-center bg-white/90 backdrop-blur-2xl border border-white/60 shadow-[0_20px_50px_-10px_rgba(0,0,0,0.15)] rounded-full h-14 p-1.5 ring-1 ring-slate-900/5 w-full max-w-sm gap-2">
                    <button onClick={() => setViewMode(viewMode === 'grid' ? 'horizontal' : 'grid')} className="w-11 h-full bg-slate-100 rounded-full flex items-center justify-center text-slate-500 shadow-sm border border-slate-200 shrink-0 active:scale-95 transition-transform">
                        {viewMode === 'grid' ? <GalleryHorizontal className="w-5 h-5" /> : <LayoutGrid className="w-5 h-5" />}
                    </button>
                    <div className="flex-1 flex items-center gap-2 px-3 bg-slate-50/80 rounded-full h-full border border-slate-100/50">
                        <Search className="w-4 h-4 text-slate-400 shrink-0" />
                        <input className="bg-transparent w-full text-sm font-bold text-slate-800 outline-none placeholder:text-slate-400" placeholder="Find operative..." value={searchQuery} onChange={e => setSearchQuery(e.target.value)} />
                    </div>
                    {/* UserPlus Button Removed as requested */}
                </motion.div>
            </div>

            <TrainerRecruitmentModal isOpen={isTrainerPanelOpen} onClose={() => setIsTrainerPanelOpen(false)} onDragStart={handleTrainerDragStart} onDragEnd={handleTrainerDragEnd} />
            <AnimatePresence>{memberDraggingId && <PromotionHUD draggingMember={team.find(m => m.id === memberDraggingId)} />}</AnimatePresence>
            <AnimatePresence>{selectedMember && <MemberDetailSheet member={selectedMember} activeTab={activeTab} setActiveTab={setActiveTab} onClose={() => setSelectedMember(null)} />}</AnimatePresence>
        </div>
    );
}
--- FILE: ./app/(main)/layout.tsx ---
import DynamicHeader from "@/components/core/DynamicHeader";
// We removed import Sidebar from "@/components/core/Sidebar";

export default function MainLayout({ children }: { children: React.ReactNode }) {
  return (
    <div className="min-h-screen bg-slate-50 flex flex-col">
      {/* 1. Top: The Dynamic Island Header 
      */}
      <DynamicHeader />
      
      {/* 2. Main Content Area 
        - Removed <Sidebar />
        - Removed lg:pl-64 (Sidebar offset)
        - Added w-full to ensure it spans the screen
        - Adjusted pt-12 to give breathing room below the floating header
      */}
      <main className="flex-1 w-full pt-12 transition-all duration-300">
        <div className="max-w-[1800px] mx-auto p-4 md:p-8">
          {children}
        </div>
      </main>
    </div>
  );
}
--- FILE: ./app/(main)/certifications/page.tsx ---
"use client";

import { useState, useEffect, useMemo } from "react";
import { motion, AnimatePresence, PanInfo } from "framer-motion";
import { 
  Trophy, Star, Target, Zap, ShieldCheck, Search, Loader2, 
  Plus, Award, Heart, Medal, Activity, Users, Clock, Crown, 
  Fingerprint, Crosshair, Rocket, Flame, Coffee, GripVertical, 
  Sparkles, Shield, X, Palette, Layout, Settings, Pipette, 
  Check, Trash2, Edit3, Save, ChevronRight
} from "lucide-react";
import { cn } from "@/lib/utils";

// Firebase & Store
import { db } from "@/lib/firebase";
import { 
  collection, onSnapshot, addDoc, updateDoc, deleteDoc, doc, setDoc,
  arrayUnion, serverTimestamp, query, orderBy 
} from "firebase/firestore";
import { useAppStore } from "@/lib/store/useStore";
import { TACTICAL_ICONS } from "@/lib/icon-library";
import toast from "react-hot-toast";
import ClientPortal from "@/components/core/ClientPortal"; // Added Import

// Components
import { Badge } from "../team/_components/Badge";

const PRESET_COLORS = [
    { id: "red", hex: "#E51636" }, { id: "navy", hex: "#004F71" },
    { id: "emerald", hex: "#10b981" }, { id: "amber", hex: "#f59e0b" },
    { id: "violet", hex: "#8b5cf6" }, { id: "rose", hex: "#f43f5e" },
    { id: "cyan", hex: "#06b6d4" }, { id: "slate", hex: "#475569" },
];

function TacticalColorPicker({ color, onChange }: { color: string, onChange: (h: string) => void }) {
    return (
        <div className="space-y-3 bg-white border border-slate-100 p-4 rounded-[24px] shadow-sm">
            <div className="flex items-center justify-between mb-2">
                <div className="flex items-center gap-2">
                    <div className="p-1 bg-slate-100 rounded-md text-slate-400"><Pipette className="w-3 h-3" /></div>
                    <span className="text-[9px] font-black uppercase tracking-widest text-slate-400">Color DNA</span>
                </div>
                <div className="h-4 w-4 rounded-full border border-slate-200 shadow-sm" style={{ backgroundColor: color }} />
            </div>
            <input type="range" min="0" max="360" onChange={(e) => onChange(`hsl(${e.target.value}, 85%, 50%)`)} className="w-full h-3 rounded-full appearance-none cursor-pointer border border-slate-200 shadow-inner overflow-hidden opacity-90 hover:opacity-100 transition-opacity" style={{ background: 'linear-gradient(to right, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%)' }} />
            <div className="flex gap-1.5 justify-between">{PRESET_COLORS.map((c) => (<button key={c.id} onClick={() => onChange(c.hex)} className={cn("h-5 w-5 rounded-full transition-all border border-white shadow-sm hover:scale-110", color === c.hex ? "ring-2 ring-offset-1 ring-slate-900 scale-110" : "opacity-80 hover:opacity-100")} style={{ backgroundColor: c.hex }} />))}</div>
        </div>
    );
}

export default function CertificationsPage() {
  const { team, loading } = useAppStore(); // Removed subscription logic
  
  // -- UI States --
  const [searchQuery, setSearchQuery] = useState("");
  const [isDragging, setIsDragging] = useState(false);
  const [hoveredMemberId, setHoveredMemberId] = useState<string | null>(null);
  const [isArchitectOpen, setIsArchitectOpen] = useState(false);
  const [isMobileArmoryOpen, setIsMobileArmoryOpen] = useState(false); // Mobile Armory State
  
  // -- CRUD States --
  const [editingId, setEditingId] = useState<string | null>(null);
  const [customAccolades, setCustomAccolades] = useState<any[]>([]);
  const [badgeDraft, setBadgeDraft] = useState({ 
    label: "", iconId: "Star", hex: "#E51636", desc: "Operational Excellence" 
  });
  
  // New state for mobile awarding flow
  const [selectedMemberForAward, setSelectedMemberForAward] = useState<string | null>(null);

  useEffect(() => {
    // Only subscribe to custom accolades locally since they are specific to this page
    const q = query(collection(db, "customAccolades"), orderBy("createdAt", "desc"));
    const unsubBadges = onSnapshot(q, (snap) => {
        setCustomAccolades(snap.docs.map(d => ({ id: d.id, ...d.data() })));
    });
    return () => unsubBadges();
  }, []);

  const filteredTeam = useMemo(() => 
    team.filter(m => m.name.toLowerCase().includes(searchQuery.toLowerCase()))
  , [team, searchQuery]);

  // -- CRUD HANDLERS --
  const openForge = (badge?: any) => {
    if (badge) {
        setEditingId(badge.id);
        setBadgeDraft({ label: badge.label, iconId: badge.iconId, hex: badge.hex, desc: badge.desc });
    } else {
        setEditingId(null);
        setBadgeDraft({ label: "", iconId: "Star", hex: "#E51636", desc: "Operational Excellence" });
    }
    setIsArchitectOpen(true);
    setIsMobileArmoryOpen(false); // Close mobile sheet if open
  };

  const handleSaveBadge = async () => {
    if (!badgeDraft.label) return toast.error("Label required");
    if (editingId) {
        await updateDoc(doc(db, "customAccolades", editingId), { ...badgeDraft, updatedAt: serverTimestamp() });
        toast.success("Module Re-Configured");
    } else {
        await addDoc(collection(db, "customAccolades"), { ...badgeDraft, createdAt: serverTimestamp() });
        toast.success("Identity Module Forged");
    }
    setIsArchitectOpen(false);
  };

  const handleDeleteBadge = async (id: string) => {
    if (!confirm("Decommission this module?")) return;
    await deleteDoc(doc(db, "customAccolades", id));
    toast.error("Module Decommissioned");
    setIsArchitectOpen(false);
  };

  // -- DRAG ENGINE (Desktop) --
  const handleDragUpdate = (_: any, info: PanInfo) => {
    const target = document.elementFromPoint(info.point.x, info.point.y);
    const card = target?.closest("[data-member-id]");
    if (card) {
        const id = card.getAttribute("data-member-id");
        if (id !== hoveredMemberId) setHoveredMemberId(id);
    } else {
        setHoveredMemberId(null);
    }
  };

  const handleDragEnd = async (_: any, __: any, badge: any) => {
    setIsDragging(false);
    const targetId = hoveredMemberId; 
    setHoveredMemberId(null);

    if (targetId) {
        awardBadge(targetId, badge);
    }
  };
  
  // -- AWARD LOGIC (Shared) --
  const awardBadge = async (targetId: string, badge: any) => {
      const member = team.find(m => m.id === targetId);
      const loadingToast = toast.loading(`Synchronizing Identity...`);
      try {
        const memberRef = doc(db, "profileOverrides", targetId); 
        await setDoc(memberRef, {
            badges: arrayUnion({ ...badge, awardedId: Math.random().toString(36).substr(2, 9), timestamp: new Date().toISOString() }), 
            updatedAt: serverTimestamp() 
        }, { merge: true });
        toast.success(`${badge.label} Validated for ${member?.name}`, { id: loadingToast });
        setSelectedMemberForAward(null); // Close mobile selection if active
        setIsMobileArmoryOpen(false); // Close sheet
      } catch (e) {
        toast.error("Authentication Failure", { id: loadingToast });
      }
  };

  // -- MOBILE CLICK HANDLER --
  const handleMobileMemberClick = (memberId: string) => {
      // Only on mobile do we want clicking a member to open the award sheet
      if (window.innerWidth < 1024) {
          setSelectedMemberForAward(memberId);
          setIsMobileArmoryOpen(true);
      }
  };

  return (
    <div className="min-h-screen bg-[#F8FAFC] relative font-sans select-none overflow-x-hidden pt-6 pb-32 md:pb-0">
      
      <div className="max-w-[1750px] mx-auto flex flex-col lg:flex-row gap-8 px-4 md:px-6">
        
        {/* --- MAIN ROSTER --- */}
        {/* Removed huge padding-right on mobile */}
        <div className="flex-1 w-full lg:pr-[300px]">
          <div className="mb-6 md:mb-8 space-y-2 mt-12 md:mt-0">
              <div className="flex items-center gap-3">
                 <div className="w-1.5 h-6 bg-[#E51636] rounded-full shadow-[0_0_15px_#e51636]" />
                 <span className="text-[10px] font-black uppercase tracking-[0.4em] text-slate-400">Validated Roster</span>
              </div>
              <h1 className="text-4xl md:text-6xl font-[1000] text-slate-900 tracking-tighter leading-none">Certifications</h1>
              <p className="md:hidden text-xs font-bold text-slate-400">Tap a member to award a certification.</p>
          </div>

          <div className="space-y-3 pb-20 md:pb-40">
            {loading && team.length === 0 ? (
                <div className="flex justify-center py-40"><Loader2 className="animate-spin text-[#E51636] w-12 h-12" /></div>
            ) : (
                <AnimatePresence mode="popLayout">
                    {filteredTeam.map((member) => {
                        const isFOH = member.dept === "FOH";
                        const isHoveredTarget = hoveredMemberId === member.id || selectedMemberForAward === member.id;
                        const initials = member.name.split(' ').map(n => n[0]).join('').toUpperCase();
                        
                        return (
                            <motion.div 
                                key={member.id} 
                                data-member-id={member.id} 
                                layout 
                                onClick={() => handleMobileMemberClick(member.id)}
                                className={cn(
                                    "group relative overflow-hidden rounded-[24px] border transition-all duration-300 active:scale-95 md:active:scale-100 cursor-pointer lg:cursor-default",
                                    isHoveredTarget 
                                        ? "border-[#E51636] bg-white shadow-xl scale-[1.01] z-30 ring-4 ring-red-50" 
                                        : "bg-white border-slate-100 shadow-[0_2px_8px_rgba(0,0,0,0.02)] hover:shadow-md hover:border-slate-200",
                                    isDragging && !isHoveredTarget && "opacity-40 grayscale blur-[1px] scale-98"
                                )}
                            >
                                {/* Subtle Department Tint */}
                                <div className={cn(
                                    "absolute left-0 top-0 bottom-0 w-1 transition-colors z-0",
                                    isFOH ? "bg-[#004F71]" : "bg-[#E51636]"
                                )} />
                                
                                <div className="flex items-start p-4 pl-6 relative z-10 gap-4 md:gap-6">
                                    {/* COMPACT AVATAR */}
                                    <div className="relative shrink-0 pt-1">
                                        <div className={cn(
                                            "h-10 w-10 md:h-12 md:w-12 rounded-2xl flex items-center justify-center text-sm md:text-lg font-black shadow-md transition-all duration-500 relative overflow-hidden group-hover:scale-105",
                                            isFOH ? "bg-[#004F71] text-white" : "bg-[#E51636] text-white",
                                            isHoveredTarget && "rotate-[-12deg] scale-110"
                                        )}>
                                            <span className="relative z-10">{initials}</span>
                                            <div className="absolute inset-0 bg-gradient-to-tr from-transparent via-white/10 to-transparent opacity-50" />
                                        </div>
                                    </div>

                                    {/* INFO SECTION */}
                                    <div className="flex-1 min-w-0 flex flex-col gap-2 md:gap-3">
                                        <div className="flex items-center justify-between">
                                            <div className="space-y-0.5">
                                                <h3 className="text-base md:text-lg font-[900] text-slate-900 tracking-tight leading-none group-hover:text-[#004F71] transition-colors">{member.name}</h3>
                                                <div className="flex items-center gap-2">
                                                    <span className={cn("text-[7px] md:text-[8px] font-black px-1.5 py-0.5 rounded-md uppercase tracking-wider border", isFOH ? "bg-blue-50 text-blue-700 border-blue-100" : "bg-red-50 text-red-700 border-red-100")}>{member.dept}</span>
                                                    <span className="text-[8px] md:text-[9px] font-bold text-slate-400 uppercase tracking-wider">{member.role}</span>
                                                </div>
                                            </div>
                                            
                                            {/* Count Indicator */}
                                            {member.badges?.length > 0 && (
                                                <div className="px-2 py-1 bg-slate-50 border border-slate-100 rounded-full text-[8px] md:text-[9px] font-black text-slate-400 uppercase tracking-widest shadow-sm">
                                                    {member.badges.length} <span className="hidden md:inline">Certified</span>
                                                </div>
                                            )}
                                        </div>
                                        
                                        {/* ASSET TRAY */}
                                        <div className="bg-slate-50/50 rounded-[16px] border border-slate-100/50 shadow-inner p-2 md:p-2.5 min-h-[44px] md:min-h-[52px]">
                                            {member.badges?.length > 0 ? (
                                                <div className="flex flex-wrap gap-1.5 md:gap-2">
                                                    {member.badges.map((b: any) => {
                                                        const Icon = TACTICAL_ICONS.find(i => i.id === b.iconId)?.icon || Award;
                                                        return (
                                                            <motion.div 
                                                                initial={{ scale: 0 }} 
                                                                animate={{ scale: 1 }} 
                                                                key={b.awardedId || Math.random()} 
                                                                className="relative group/badge z-10 hover:z-50 transition-all"
                                                            >
                                                                <div 
                                                                    className="h-7 w-7 md:h-8 md:w-8 rounded-lg flex items-center justify-center shadow-sm border border-white bg-white hover:scale-110 hover:-translate-y-1 transition-transform duration-300 relative overflow-hidden"
                                                                >
                                                                    <div className="absolute inset-0 opacity-10" style={{ backgroundColor: b.hex }} />
                                                                    <Icon className="w-3.5 h-3.5 md:w-4 md:h-4 relative z-10" style={{ color: b.hex }} />
                                                                </div>
                                                                {/* Tooltip hidden on mobile to prevent clutter */}
                                                                <div className="hidden md:flex absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-1.5 bg-[#0F172A] text-white text-[9px] font-bold uppercase rounded-lg opacity-0 group-hover/badge:opacity-100 transition-all whitespace-nowrap pointer-events-none shadow-xl z-50 items-center gap-2 transform origin-bottom scale-95 group-hover/badge:scale-100">
                                                                    <div className="w-1.5 h-1.5 rounded-full" style={{ backgroundColor: b.hex }} />
                                                                    {b.label}
                                                                    <div className="absolute -bottom-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#0F172A] border-b border-r border-[#E51636]/20 rotate-45" />
                                                                </div>
                                                            </motion.div>
                                                        )
                                                    })}
                                                </div>
                                            ) : (
                                                <div className="flex items-center justify-center h-full gap-2 opacity-40 py-1">
                                                    <div className="w-1.5 h-1.5 rounded-full bg-slate-300" />
                                                    <span className="text-[9px] font-bold text-slate-400 uppercase tracking-widest">No Certifications</span>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </div>
                                
                                {/* Overlay only for drag hover on desktop */}
                                {isHoveredTarget && isDragging && (
                                    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className="absolute inset-0 flex items-center justify-center bg-white/80 backdrop-blur-[2px] z-20">
                                        <div className="px-6 py-2.5 bg-[#E51636] text-white rounded-full font-[900] text-[10px] uppercase tracking-[0.25em] shadow-xl flex items-center gap-2 animate-bounce border-2 border-white/20">
                                            <Sparkles className="w-3.5 h-3.5 fill-current" /> 
                                            Validate Module
                                        </div>
                                    </motion.div>
                                )}
                            </motion.div>
                        )
                    })}
                </AnimatePresence>
            )}
          </div>
        </div>

        {/* --- DESKTOP ARMORY SIDEBAR (Hidden on Mobile) --- */}
        <aside className="hidden lg:block fixed top-28 right-8 bottom-8 w-[280px] z-[40]">
            <div className="h-full bg-[#F8FAFC]/90 backdrop-blur-3xl border border-white/80 rounded-[40px] shadow-[0_20px_60px_-12px_rgba(0,0,0,0.15)] flex flex-col overflow-hidden ring-1 ring-white/60 relative">
                
                <div className="absolute top-0 left-0 right-0 h-40 bg-gradient-to-b from-white/60 to-transparent pointer-events-none" />

                <div className="p-6 pb-2 relative z-10 shrink-0">
                    <div className="flex items-center justify-between mb-5">
                        <div className="flex items-center gap-2.5">
                            <div className="p-2 bg-slate-900 text-white rounded-lg shadow-lg">
                                <Trophy className="w-4 h-4" />
                            </div>
                            <div>
                                <h2 className="text-sm font-[1000] text-slate-900 uppercase tracking-tighter leading-none">Armory</h2>
                                <div className="flex items-center gap-1 mt-0.5">
                                    <div className="w-1 h-1 rounded-full bg-emerald-500 animate-pulse" />
                                    <span className="text-[8px] font-bold text-slate-400 uppercase tracking-widest">Active</span>
                                </div>
                            </div>
                        </div>
                        <div className="px-2 py-0.5 bg-white border border-slate-200 rounded-md text-[8px] font-black text-slate-400 uppercase tracking-widest">
                            v4.2
                        </div>
                    </div>

                    <button 
                        onClick={() => openForge()} 
                        className="group w-full relative overflow-hidden rounded-[20px] bg-slate-900 text-white p-0.5 shadow-xl shadow-slate-900/10 transition-all hover:scale-[1.02] active:scale-95"
                    >
                        <div className="absolute inset-0 bg-gradient-to-r from-slate-800 to-slate-900" />
                        <div className="relative flex items-center justify-between p-4">
                            <div className="flex flex-col items-start">
                                <span className="text-[8px] font-black text-slate-400 uppercase tracking-[0.2em] mb-0.5">Create</span>
                                <span className="text-sm font-bold">New Module</span>
                            </div>
                            <div className="w-8 h-8 rounded-xl bg-white/10 flex items-center justify-center border border-white/10 group-hover:bg-white group-hover:text-slate-900 transition-colors">
                                <Plus className="w-4 h-4" />
                            </div>
                        </div>
                    </button>
                </div>

                <div className="flex-1 overflow-y-auto custom-scrollbar p-6 pt-2 space-y-2 relative z-10">
                    <div className="flex items-center justify-between px-1 mb-1">
                        <span className="text-[8px] font-black text-slate-300 uppercase tracking-[0.2em]">Inventory</span>
                        <span className="text-[8px] font-bold text-slate-300">{customAccolades.length}</span>
                    </div>

                    <div className="space-y-2 pb-20">
                        {customAccolades.map(badge => {
                            const IconComp = TACTICAL_ICONS.find(i => i.id === badge.iconId)?.icon || Star;
                            return (
                                <motion.div 
                                    key={badge.id} 
                                    drag dragSnapToOrigin dragElastic={0.05} 
                                    onDragStart={() => setIsDragging(true)} 
                                    onDrag={(e, info) => handleDragUpdate(e, info)} 
                                    onDragEnd={(e, info) => handleDragEnd(e, info, badge)} 
                                    whileHover={{ scale: 1.02, x: 2 }} 
                                    whileDrag={{ scale: 1.1, zIndex: 1000, rotate: -3, pointerEvents: 'none', boxShadow: "0 20px 40px -10px rgba(0,0,0,0.2)" }} 
                                    className="group relative bg-white border border-slate-100 p-2.5 rounded-[18px] flex items-center gap-3 cursor-grab active:cursor-grabbing shadow-sm hover:shadow-md transition-all hover:border-slate-200"
                                >
                                    <div className="h-10 w-10 rounded-xl flex items-center justify-center shadow-inner relative overflow-hidden shrink-0" style={{ backgroundColor: `${badge.hex}10` }}>
                                        <IconComp className="w-5 h-5 relative z-10 transition-transform group-hover:scale-110" style={{ color: badge.hex }} />
                                    </div>

                                    <div className="min-w-0 flex-1 py-0.5">
                                        <div className="flex items-center justify-between gap-2">
                                            <p className="text-xs font-bold text-slate-700 leading-none truncate group-hover:text-slate-900 transition-colors">{badge.label}</p>
                                        </div>
                                        <div className="flex items-center gap-1.5 mt-1">
                                            <div className="w-1.5 h-1.5 rounded-full" style={{ backgroundColor: badge.hex }} />
                                            <span className="text-[7px] font-mono text-slate-400 uppercase tracking-wider truncate">
                                                {badge.hex}
                                            </span>
                                        </div>
                                    </div>

                                    <button onClick={(e) => { e.stopPropagation(); openForge(badge); }} className="p-1.5 hover:bg-slate-50 rounded-lg text-slate-300 hover:text-slate-600 transition-colors opacity-0 group-hover:opacity-100">
                                        <Edit3 className="w-3 h-3" />
                                    </button>
                                    
                                    <div className="absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-slate-100 rounded-l-full group-hover:bg-slate-200 transition-colors" />
                                </motion.div>
                            )
                        })}
                    </div>
                </div>
                
                <div className="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-[#F8FAFC] to-transparent pointer-events-none z-20" />
            </div>
        </aside>
      </div>

      {/* --- MOBILE FAB (Open Armory Sheet) --- */}
      <button 
        onClick={() => setIsMobileArmoryOpen(true)}
        className="lg:hidden fixed bottom-28 right-6 w-14 h-14 bg-[#0F172A] text-white rounded-full shadow-[0_10px_30px_-10px_rgba(15,23,42,0.5)] flex items-center justify-center z-50 active:scale-90 transition-transform border-4 border-white"
      >
        <Trophy className="w-6 h-6" />
      </button>

      {/* --- MOBILE ARMORY SHEET --- */}
      <AnimatePresence>
        {isMobileArmoryOpen && (
             <ClientPortal>
                <div className="fixed inset-0 z-[200] lg:hidden flex items-end justify-center pointer-events-none">
                     <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto" onClick={() => { setIsMobileArmoryOpen(false); setSelectedMemberForAward(null); }} />
                     
                     <motion.div 
                        initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} 
                        transition={{ type: "spring", damping: 25, stiffness: 300 }}
                        className="pointer-events-auto bg-[#F8FAFC] w-full h-[75vh] rounded-t-[32px] shadow-2xl relative flex flex-col overflow-hidden"
                     >
                         <div className="flex justify-center pt-3 pb-1 shrink-0"><div className="w-12 h-1.5 bg-slate-300 rounded-full" /></div>
                         <div className="px-6 py-4 border-b border-slate-200 flex justify-between items-center bg-white shrink-0">
                             <div className="flex flex-col">
                                 <h2 className="text-lg font-black text-slate-900">{selectedMemberForAward ? "Award Badge" : "Armory"}</h2>
                                 <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">
                                     {selectedMemberForAward 
                                        ? `To: ${team.find(m => m.id === selectedMemberForAward)?.name}` 
                                        : "Manage Certifications"}
                                 </p>
                             </div>
                             <div className="flex gap-2">
                                <button onClick={() => openForge()} className="p-2.5 bg-slate-100 rounded-full active:scale-95 transition-all text-slate-600"><Plus className="w-5 h-5" /></button>
                                <button onClick={() => { setIsMobileArmoryOpen(false); setSelectedMemberForAward(null); }} className="p-2.5 bg-slate-100 rounded-full active:scale-95 transition-all text-slate-600"><X className="w-5 h-5" /></button>
                             </div>
                         </div>

                         <div className="flex-1 overflow-y-auto p-4 space-y-3 pb-20">
                             {customAccolades.map(badge => {
                                 const IconComp = TACTICAL_ICONS.find(i => i.id === badge.iconId)?.icon || Star;
                                 return (
                                     <div 
                                        key={badge.id}
                                        onClick={() => {
                                            if (selectedMemberForAward) {
                                                awardBadge(selectedMemberForAward, badge);
                                            } else {
                                                openForge(badge);
                                            }
                                        }}
                                        className="bg-white p-4 rounded-[20px] border border-slate-100 shadow-sm flex items-center gap-4 active:scale-[0.98] transition-transform"
                                     >
                                        <div className="h-12 w-12 rounded-xl flex items-center justify-center shadow-inner relative overflow-hidden shrink-0" style={{ backgroundColor: `${badge.hex}10` }}>
                                            <IconComp className="w-6 h-6 relative z-10" style={{ color: badge.hex }} />
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <p className="text-sm font-bold text-slate-900">{badge.label}</p>
                                            <p className="text-[10px] text-slate-400 font-medium truncate">{badge.desc || "No description"}</p>
                                        </div>
                                        <div className="h-8 w-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-300">
                                            {selectedMemberForAward ? <Check className="w-4 h-4" /> : <Edit3 className="w-4 h-4" />}
                                        </div>
                                     </div>
                                 )
                             })}
                         </div>
                     </motion.div>
                </div>
             </ClientPortal>
        )}
      </AnimatePresence>

      {/* --- ARCHITECT MODAL --- */}
      <AnimatePresence>
        {isArchitectOpen && (
            <div className="fixed inset-0 z-[200] flex items-end md:items-center justify-center md:p-4">
                <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }} className="absolute inset-0 bg-[#0F172A]/90 backdrop-blur-xl" onClick={() => setIsArchitectOpen(false)} />
                <motion.div 
                    initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }} 
                    className="relative bg-white w-full h-[90vh] md:h-[600px] md:max-w-4xl rounded-t-[40px] md:rounded-[48px] shadow-2xl overflow-hidden flex flex-col md:flex-row md:border-[8px] border-white"
                >
                    <div className="w-full md:w-[340px] border-b md:border-b-0 md:border-r border-slate-100 flex flex-col shrink-0 bg-[#F8FAFC] relative overflow-hidden">
                        <div className="bg-[#E51636] p-6 md:p-8 text-white relative shrink-0 overflow-hidden">
                            <div className="absolute inset-0 opacity-[0.1]" style={{ backgroundImage: `radial-gradient(circle at 1px 1px, white 1px, transparent 0)`, backgroundSize: '16px 16px' }} />
                            <div className="relative z-10 flex justify-between items-start">
                                <div>
                                    <span className="text-[9px] font-black uppercase tracking-[0.3em] opacity-70 mb-1 block">Logic Core</span>
                                    <h2 className="text-3xl md:text-4xl font-[1000] tracking-tighter leading-none text-white">FORGE</h2>
                                </div>
                                <button onClick={() => setIsArchitectOpen(false)} className="md:hidden p-2 bg-white/20 rounded-full"><X className="w-5 h-5" /></button>
                            </div>
                        </div>
                        <div className="flex-1 p-6 space-y-6 overflow-y-auto custom-scrollbar">
                            <div className="relative group p-4 rounded-[28px] bg-white border border-slate-200 shadow-lg flex items-center gap-4">
                                <div className="absolute -inset-1 rounded-[32px] blur-lg opacity-20 transition-all duration-700" style={{ backgroundColor: badgeDraft.hex }} />
                                <div className="relative p-3 rounded-2xl shadow-md border border-slate-100 scale-100" style={{ backgroundColor: `${badgeDraft.hex}15`, color: badgeDraft.hex }}>
                                    {(() => { const Icon = TACTICAL_ICONS.find(i => i.id === badgeDraft.iconId)?.icon || Star; return <Icon className="w-8 h-8" /> })()}
                                </div>
                                <div className="relative min-w-0">
                                    <p className="text-lg font-[1000] text-slate-900 leading-none mb-1 truncate">{badgeDraft.label || "Untitled"}</p>
                                    <div className="flex items-center gap-1.5">
                                        <div className="h-1.5 w-1.5 rounded-full animate-pulse" style={{ backgroundColor: badgeDraft.hex }} />
                                        <span className="text-[8px] font-bold text-slate-400 uppercase tracking-widest">Preview</span>
                                    </div>
                                </div>
                            </div>
                            <div className="space-y-4">
                                <div className="space-y-1.5">
                                    <label className="text-[9px] font-black uppercase text-slate-400 px-2 flex items-center gap-1.5"><Fingerprint className="w-3 h-3" /> Identity</label>
                                    <input value={badgeDraft.label} onChange={e => setBadgeDraft({...badgeDraft, label: e.target.value})} className="w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold outline-none focus:border-[#E51636] focus:ring-4 focus:ring-red-500/5 shadow-sm transition-all placeholder:text-slate-300" placeholder="Module Name..." />
                                </div>
                                <TacticalColorPicker color={badgeDraft.hex} onChange={(h) => setBadgeDraft({...badgeDraft, hex: h})} />
                            </div>
                        </div>
                        <div className="p-6 pt-0 flex gap-3 safe-area-pb">
                            {editingId && (
                                <button onClick={() => handleDeleteBadge(editingId)} className="p-4 bg-white border border-slate-200 text-slate-400 hover:text-red-500 rounded-2xl hover:bg-red-50 transition-all active:scale-90 shadow-sm">
                                    <Trash2 className="w-5 h-5" />
                                </button>
                            )}
                            <button onClick={handleSaveBadge} className="flex-1 py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[9px] tracking-[0.3em] shadow-xl hover:scale-[1.02] active:scale-95 transition-all">
                                {editingId ? "Update" : "Fabricate"}
                            </button>
                        </div>
                    </div>
                    <div className="flex-1 flex flex-col bg-white">
                        <div className="px-6 md:px-8 py-4 md:py-6 flex items-center justify-between border-b border-slate-50 bg-white sticky top-0 z-20">
                            <div className="space-y-0.5">
                                <div className="flex items-center gap-2 text-[#E51636]">
                                    <Layout className="w-4 h-4" />
                                    <span className="text-[9px] font-black uppercase tracking-[0.3em]">Asset Library</span>
                                </div>
                                <h3 className="text-xl md:text-2xl font-[1000] text-slate-900 tracking-tighter leading-none">Tactical Icons</h3>
                            </div>
                            <button onClick={() => setIsArchitectOpen(false)} className="hidden md:block p-2.5 bg-slate-50 text-slate-400 rounded-xl hover:bg-[#E51636] hover:text-white transition-all active:scale-90 border border-slate-100"><X className="w-5 h-5" /></button>
                        </div>
                        <div className="flex-1 overflow-y-auto custom-scrollbar p-6 md:p-8 space-y-8 md:space-y-10 pb-20">
                            {["Achievement", "Hospitality", "BOH", "Operational", "Creative"].map((cat) => (
                                <div key={cat} className="space-y-4">
                                    <div className="flex items-center gap-4 pl-1">
                                        <span className="text-[10px] font-black uppercase text-slate-300 tracking-[0.4em] whitespace-nowrap">{cat} Sector</span>
                                        <div className="h-px w-full bg-slate-100" />
                                    </div>
                                    <div className="grid grid-cols-5 md:grid-cols-6 gap-3">
                                        {TACTICAL_ICONS.filter(i => i.category === cat).map((item) => (
                                            <button 
                                                key={item.id} 
                                                onClick={() => setBadgeDraft({...badgeDraft, iconId: item.id})} 
                                                className={cn(
                                                    "aspect-square rounded-2xl flex flex-col items-center justify-center gap-2 transition-all duration-300 group relative", 
                                                    badgeDraft.iconId === item.id 
                                                        ? "bg-slate-900 text-white shadow-xl scale-110 z-10" 
                                                        : "bg-slate-50 text-slate-400 hover:bg-white hover:text-slate-900 hover:shadow-md border border-transparent hover:border-slate-100"
                                                )}
                                            >
                                                <item.icon className="w-5 h-5 md:w-6 md:h-6 group-hover:rotate-6 transition-transform" />
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </motion.div>
            </div>
        )}
      </AnimatePresence>
    </div>
  );
}
--- FILE: ./app/page.tsx ---
import { redirect } from "next/navigation";

export default function Home() {
  // Automatically sends user to the dashboard
  redirect("/dashboard");
}
--- FILE: ./app/globals.css ---
@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --foreground-rgb: 15, 23, 42; /* slate-900 */
  --background-start-rgb: 248, 250, 252; /* slate-50 */
  --background-end-rgb: 248, 250, 252;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-start-rgb));
  font-family: Arial, Helvetica, sans-serif;
  overflow-x: hidden;
}

/* Custom Scrollbar to match Infobook */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}
::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}

@keyframes shine {
    100% {
        left: 125%;
    }
}
.animate-shine {
    animation: shine 1s;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.no-scrollbar {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

/* Custom Scrollbar to match Infobook (Only where explicitly needed, otherwise use no-scrollbar) */
.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 3px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}
--- FILE: ./postcss.config.mjs ---
/** @type {import('postcss-load-config').Config} */
const config = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

export default config;
--- FILE: ./next-env.d.ts ---
/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/dev/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.

--- FILE: ./tailwind.config.ts ---
import type { Config } from "tailwindcss";

const config: Config = {
  content: [
    "./app/**/*.{js,ts,jsx,tsx,mdx}",        // Scans the App Router
    "./pages/**/*.{js,ts,jsx,tsx,mdx}",      // Scans Pages (if any)
    "./components/**/*.{js,ts,jsx,tsx,mdx}", // Scans Components
  ],
  theme: {
    extend: {
      colors: {
        background: "var(--background)",
        foreground: "var(--foreground)",
      },
    },
  },
  plugins: [],
};
export default config;
--- FILE: ./components/core/NotificationPanel.tsx ---
"use client";
import { useState, useEffect } from "react";
import { X, Bell, CheckCircle2, AlertCircle, Calendar } from "lucide-react";
import { cn } from "@/lib/utils";

// Types of notifications for the system
type Notification = {
  id: string;
  type: "success" | "alert" | "info";
  title: string;
  message: string;
  time: string;
  read: boolean;
};

// Mock Data
const NOTIFICATIONS: Notification[] = [
  {
    id: "1",
    type: "success",
    title: "Goal Completed",
    message: "Sarah Jenkins completed 'Speed of Service' training.",
    time: "10 min ago",
    read: false,
  },
  {
    id: "2",
    type: "alert",
    title: "Shift Coverage Needed",
    message: "BOH closing shift for Friday is open.",
    time: "1 hour ago",
    read: false,
  },
  {
    id: "3",
    type: "info",
    title: "New Policy Update",
    message: "Uniform guidelines have been updated for Winter.",
    time: "2 hours ago",
    read: true,
  },
];

interface NotificationPanelProps {
  isOpen: boolean;
  onClose: () => void;
}

export default function NotificationPanel({ isOpen, onClose }: NotificationPanelProps) {
  const [isVisible, setIsVisible] = useState(false);

  // Handle animation timing
  useEffect(() => {
    if (isOpen) setIsVisible(true);
    else setTimeout(() => setIsVisible(false), 300); // Wait for slide out
  }, [isOpen]);

  if (!isVisible && !isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex justify-end">
      {/* Backdrop */}
      <div 
        className={cn(
          "fixed inset-0 bg-slate-900/20 backdrop-blur-sm transition-opacity duration-300",
          isOpen ? "opacity-100" : "opacity-0"
        )}
        onClick={onClose}
      />

      {/* Slide-over Panel */}
      <div 
        className={cn(
          "relative z-50 w-full max-w-sm bg-slate-50 h-full shadow-2xl transition-transform duration-300 ease-in-out transform border-l border-slate-200",
          isOpen ? "translate-x-0" : "translate-x-full"
        )}
      >
        <div className="flex flex-col h-full">
          {/* Header */}
          <div className="flex items-center justify-between p-5 bg-white border-b border-slate-200">
            <div className="flex items-center gap-2">
              <Bell className="h-5 w-5 text-[#004F71]" />
              <h2 className="font-bold text-slate-800">Notifications</h2>
            </div>
            <button 
              onClick={onClose}
              className="p-2 text-slate-400 hover:bg-slate-100 rounded-full transition-colors"
            >
              <X className="h-5 w-5" />
            </button>
          </div>

          {/* List */}
          <div className="flex-1 overflow-y-auto p-4 space-y-3">
            {NOTIFICATIONS.map((note) => (
              <div 
                key={note.id}
                className={cn(
                  "p-4 rounded-xl border transition-all hover:shadow-sm bg-white relative overflow-hidden",
                  note.read ? "border-slate-200 opacity-75" : "border-blue-100 shadow-sm ring-1 ring-blue-50"
                )}
              >
                {!note.read && (
                  <div className="absolute top-4 right-4 h-2 w-2 bg-[#E51636] rounded-full" />
                )}
                
                <div className="flex gap-3">
                  <div className={cn(
                    "mt-0.5 h-8 w-8 rounded-lg flex items-center justify-center flex-shrink-0",
                    note.type === "success" && "bg-emerald-100 text-emerald-600",
                    note.type === "alert" && "bg-amber-100 text-amber-600",
                    note.type === "info" && "bg-blue-100 text-blue-600",
                  )}>
                    {note.type === "success" && <CheckCircle2 className="h-4 w-4" />}
                    {note.type === "alert" && <AlertCircle className="h-4 w-4" />}
                    {note.type === "info" && <Calendar className="h-4 w-4" />}
                  </div>
                  <div>
                    <h3 className={cn("text-sm font-bold", note.read ? "text-slate-600" : "text-slate-900")}>
                      {note.title}
                    </h3>
                    <p className="text-xs text-slate-500 mt-1 leading-relaxed">
                      {note.message}
                    </p>
                    <p className="text-[10px] font-bold text-slate-400 uppercase tracking-wider mt-2">
                      {note.time}
                    </p>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {/* Footer */}
          <div className="p-4 border-t border-slate-200 bg-white">
            <button className="w-full py-3 text-xs font-bold text-slate-500 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-colors">
              Mark all as read
            </button>
          </div>
        </div>
      </div>
    </div>
  );
}
--- FILE: ./components/core/DynamicHeader.tsx ---
"use client";

import React, { useState, useEffect } from 'react';
import Link from 'next/link';
import { usePathname } from 'next/navigation';
import { motion, useScroll, useTransform, AnimatePresence } from 'framer-motion';
import { 
  LayoutDashboard, 
  Users, 
  GraduationCap,
  Settings, 
  LogOut, 
  Bell, 
  Search,
  ChevronDown,
  Calendar,
  BookOpen,
  Menu
} from 'lucide-react';
import { cn } from '@/lib/utils';

// CONFIGURED NAV LINKS
const NAV_LINKS = [
  { href: '/dashboard', label: 'Overview', icon: LayoutDashboard },
  { href: '/calendar', label: 'Schedule', icon: Calendar },
  { href: '/training', label: 'Learn', icon: BookOpen }, 
  { href: '/certifications', label: 'Certs', icon: GraduationCap },
  { href: '/team', label: 'Roster', icon: Users },
];

export default function DynamicHeader() {
  const pathname = usePathname();
  const { scrollY } = useScroll();
  const [isProfileOpen, setIsProfileOpen] = useState(false);
  
  // --- Scroll Physics ---
  const headerY = useTransform(scrollY, [0, 100], [0, -10]);
  const headerBorder = useTransform(scrollY, [0, 20], ["rgba(0,0,0,0)", "rgba(226,232,240,1)"]);
  const headerShadow = useTransform(scrollY, [0, 20], ["none", "0 10px 15px -3px rgba(0, 0, 0, 0.05)"]);

  const user = { name: "James L.", email: "james@trainingbook.com", initials: "JL" };

  return (
    <>
      {/* =======================================
          DESKTOP & TABLET HEADER (Top)
      ======================================= */}
      <motion.header
        style={{ y: headerY, borderColor: headerBorder, boxShadow: headerShadow }}
        className="sticky top-4 z-50 mx-auto max-w-[1800px] w-[95%] rounded-full transition-all duration-300 bg-white/80 backdrop-blur-xl border border-transparent hidden md:block"
      >
        <div className="px-6 h-16 flex items-center justify-between gap-4">
          
          {/* --- Left: Logo & Nav --- */}
          <div className="flex items-center gap-6 flex-1 overflow-hidden">
            <Link href="/dashboard" className="flex items-center gap-3 group shrink-0">
              <div className="relative h-9 w-9 bg-[#004F71] rounded-xl flex items-center justify-center text-white font-black text-sm shadow-lg ring-1 ring-white/20 group-hover:scale-105 transition-transform">
                T
                <div className="absolute inset-0 bg-white/10 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity" />
              </div>
              <span className="text-lg font-black tracking-tight text-slate-900">
                Training<span className="text-[#004F71]">book</span>
              </span>
            </Link>

            {/* Desktop Navigation Pills */}
            <div className="flex items-center gap-1 p-1 bg-slate-100/50 rounded-full border border-slate-200/50">
              {NAV_LINKS.map((link) => {
                const isActive = pathname?.startsWith(link.href);
                return (
                  <Link 
                    key={link.href} 
                    href={link.href}
                    className={cn(
                      "px-4 py-1.5 rounded-full text-[11px] font-bold uppercase tracking-wide transition-all duration-300 flex items-center gap-2 relative",
                      isActive 
                        ? "text-[#004F71]" 
                        : "text-slate-500 hover:text-slate-700 hover:bg-white/50"
                    )}
                  >
                    {isActive && (
                      <motion.div 
                        layoutId="desktopNav"
                        className="absolute inset-0 bg-white shadow-sm rounded-full border border-slate-100"
                        initial={false}
                        transition={{ type: "spring", stiffness: 300, damping: 30 }}
                      />
                    )}
                    <span className="relative z-10 flex items-center gap-2">
                        <link.icon className={cn("w-3.5 h-3.5", isActive && "text-[#E51636]")} />
                        {link.label}
                    </span>
                  </Link>
                );
              })}
            </div>
          </div>

          {/* --- Right: Actions --- */}
          <div className="flex items-center gap-3 shrink-0">
            <button className="h-10 w-10 rounded-full bg-white border border-slate-200 text-slate-400 hover:text-[#004F71] hover:border-blue-200 hover:shadow-md transition-all flex items-center justify-center">
               <Search className="w-4 h-4" />
            </button>

            <button className="h-10 w-10 rounded-full bg-white border border-slate-200 text-slate-400 hover:text-indigo-500 hover:border-indigo-200 hover:shadow-md transition-all flex items-center justify-center relative">
              <Bell className="w-4 h-4" />
              <span className="absolute top-2 right-2.5 h-2 w-2 bg-[#E51636] rounded-full ring-2 ring-white" />
            </button>
            
            <div className="h-8 w-px bg-slate-200 mx-1" />

            {/* Profile Dropdown */}
            <div className="relative">
              <button 
                onClick={() => setIsProfileOpen(!isProfileOpen)}
                className="flex items-center gap-3 pl-1 pr-2 py-1 rounded-full hover:bg-slate-100 transition-all border border-transparent hover:border-slate-200 outline-none"
              >
                <div className="h-8 w-8 rounded-full bg-slate-900 text-white flex items-center justify-center text-xs font-bold shadow-md">
                  {user.initials}
                </div>
                <div className="text-left">
                  <p className="text-xs font-bold text-slate-900 leading-none">{user.name}</p>
                  <p className="text-[9px] font-bold text-slate-400 uppercase leading-none mt-0.5">Admin</p>
                </div>
                <ChevronDown className="w-3 h-3 text-slate-400" />
              </button>

              <AnimatePresence>
                {isProfileOpen && (
                  <>
                    <div className="fixed inset-0 z-40" onClick={() => setIsProfileOpen(false)} />
                    <motion.div
                      initial={{ opacity: 0, scale: 0.95, y: 10 }}
                      animate={{ opacity: 1, scale: 1, y: 0 }}
                      exit={{ opacity: 0, scale: 0.95, y: 10 }}
                      className="absolute right-0 z-50 mt-2 w-56 origin-top-right rounded-2xl bg-white p-2 shadow-xl ring-1 ring-black/5 focus:outline-none border border-slate-100"
                    >
                      <div className="px-3 py-2 border-b border-slate-50 mb-1">
                        <p className="text-sm font-bold text-slate-900">{user.name}</p>
                        <p className="text-xs text-slate-500 truncate">{user.email}</p>
                      </div>
                      <Link href="/settings" className="flex items-center px-3 py-2 rounded-xl text-xs font-bold text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors">
                        <Settings className="mr-2 h-4 w-4" /> Preferences
                      </Link>
                      <button className="w-full flex items-center px-3 py-2 rounded-xl text-xs font-bold text-rose-600 hover:bg-rose-50 transition-colors">
                        <LogOut className="mr-2 h-4 w-4" /> Sign Out
                      </button>
                    </motion.div>
                  </>
                )}
              </AnimatePresence>
            </div>
          </div>
        </div>
      </motion.header>

      {/* =======================================
          MOBILE TOP BAR (Clean & Minimal)
      ======================================= */}
      <header className="md:hidden fixed top-0 left-0 right-0 z-40 px-6 py-4 bg-slate-50/80 backdrop-blur-md flex items-center justify-between">
          <Link href="/dashboard" className="flex items-center gap-3">
            <div className="h-9 w-9 bg-[#004F71] rounded-xl flex items-center justify-center text-white font-black text-sm shadow-lg shadow-blue-900/20">T</div>
            <span className="text-lg font-black tracking-tight text-slate-900">Trainingbook</span>
          </Link>
          <div className="h-9 w-9 rounded-full bg-slate-900 text-white flex items-center justify-center text-xs font-bold shadow-md ring-2 ring-white">
             {user.initials}
          </div>
      </header>

      {/* =======================================
          MOBILE COMMAND DOCK (Floating Glass)
      ======================================= */}
      <div className="md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] w-auto">
        <nav className="flex items-center gap-2 p-2 bg-white/90 backdrop-blur-2xl border border-white/60 rounded-[32px] shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)] ring-1 ring-white/50">
            {NAV_LINKS.map((link) => {
                const isActive = pathname?.startsWith(link.href);
                return (
                    <Link 
                        key={link.href} 
                        href={link.href}
                        className="relative flex items-center justify-center w-14 h-14 rounded-full"
                    >
                        {isActive && (
                            <motion.div 
                                layoutId="mobileNav"
                                className="absolute inset-0 bg-[#E51636] rounded-full shadow-lg shadow-red-500/30"
                                transition={{ type: "spring", stiffness: 350, damping: 25 }}
                            />
                        )}
                        <link.icon className={cn("w-6 h-6 transition-all relative z-10", isActive ? "text-white scale-110" : "text-slate-400 hover:text-slate-600")} />
                        
                        {/* Tiny Active Dot (Optional, kept for extra detail) */}
                        {isActive && (
                            <motion.div 
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 1 }}
                                className="absolute bottom-1 w-1 h-1 bg-white rounded-full z-20" 
                            />
                        )}
                    </Link>
                )
            })}
        </nav>
      </div>
    </>
  );
}
--- FILE: ./components/core/ClientPortal.tsx ---
"use client";

import { useEffect, useState } from "react";
import { createPortal } from "react-dom";

export default function ClientPortal({ children }: { children: React.ReactNode }) {
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
    return () => setMounted(false);
  }, []);

  return mounted ? createPortal(children, document.body) : null;
}
--- FILE: ./package-lock.json ---
{
  "name": "trainingbook",
  "version": "0.1.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "trainingbook",
      "version": "0.1.0",
      "dependencies": {
        "clsx": "^2.1.1",
        "date-fns": "^4.1.0",
        "firebase": "^12.7.0",
        "framer-motion": "^12.23.26",
        "lucide-react": "^0.561.0",
        "next": "16.0.10",
        "react": "19.2.1",
        "react-dom": "19.2.1",
        "react-hot-toast": "^2.6.0",
        "tailwind-merge": "^3.4.0",
        "zustand": "^5.0.9"
      },
      "devDependencies": {
        "@types/node": "^20",
        "@types/react": "^19",
        "@types/react-dom": "^19",
        "autoprefixer": "^10.4.23",
        "babel-plugin-react-compiler": "1.0.0",
        "eslint": "^9",
        "eslint-config-next": "16.0.10",
        "postcss": "^8.5.6",
        "tailwindcss": "^3.4.17",
        "typescript": "^5"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.5.tgz",
      "integrity": "sha512-6uFXyCayocRbqhZOB+6XcuZbkMNimwfVGFji8CTZnCzOHVGvDqzvitu1re2AU5LROliz7eQPhB8CpAMvnx9EjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.5.tgz",
      "integrity": "sha512-e7jT4DxYvIDLk1ZHmU/m/mB19rex9sv0c2ftBtjSBv+kVM/902eh0fINUzD7UwLLNR+jU585GxUJ8/EBfAM5fw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.5.tgz",
      "integrity": "sha512-3EwLFhZ38J4VyIP6WNtt2kUdW9dokXA9Cr4IVIFHuCpZ3H8/YFOl5JjZHisrn1fATPBmKKqXzDFvh9fUwHz6CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.5",
        "@babel/types": "^7.28.5",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "devOptional": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.28.5.tgz",
      "integrity": "sha512-qSs4ifwzKJSV39ucNjsvc6WVHs6b7S03sOh2OcHF9UHfVPqWWALUsNUVzhSBiItjRZoLHx7nIarVjqKVusUZ1Q==",
      "devOptional": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.5.tgz",
      "integrity": "sha512-KKBU1VGYR7ORr3At5HAtUQ+TV3SzRCXmA/8OdDZiLDBIZxVyzXuztPjfLd3BV1PRAQGCMWWSHYhL0F8d5uHBDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.5"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.5.tgz",
      "integrity": "sha512-TCCj4t55U90khlYkVV/0TfkJkAkUg3jZFA3Neb7unZT8CPok7iiRfaX0F+WnqWqt7OxhOn0uBKXCw4lbL8W0aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.5",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.5",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.5",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.5",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.5.tgz",
      "integrity": "sha512-qQ5m48eI/MFLQ5PxQj4PFaprjyCTLI37ElWMmNs0K8Lk3dVeOdNpB3ks8jc7yM5CDmVC73eMVk/trk3fgmrUpA==",
      "devOptional": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.28.5"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@emnapi/core": {
      "version": "1.7.1",
      "resolved": "https://registry.npmjs.org/@emnapi/core/-/core-1.7.1.tgz",
      "integrity": "sha512-o1uhUASyo921r2XtHYOHy7gdkGLge8ghBEQHMWmyJFoXlpU58kIrhhN3w26lpQb6dspetweapMn2CSNwQ8I4wg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/wasi-threads": "1.1.0",
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/runtime": {
      "version": "1.7.1",
      "resolved": "https://registry.npmjs.org/@emnapi/runtime/-/runtime-1.7.1.tgz",
      "integrity": "sha512-PVtJr5CmLwYAU9PZDMITZoR5iAOShYREoR45EyyLrbntV50mdePTgUn4AmOw90Ifcj+x2kRjdzr1HP3RrNiHGA==",
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@emnapi/wasi-threads": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@emnapi/wasi-threads/-/wasi-threads-1.1.0.tgz",
      "integrity": "sha512-WI0DdZ8xFSbgMjR1sFsKABJ/C5OnRrjT06JXbZKexJGrDuPTzZdDYfFlsgcCXCyf+suG5QU2e/y1Wo2V/OapLQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.2",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.2.tgz",
      "integrity": "sha512-EriSTlt5OC9/7SXkRSCAhfSxxoSUgBm33OH+IkwbdpgoqsSsUg7y3uh+IICI/Qg4BBWr3U2i39RpmycbxMq4ew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.2",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.2.tgz",
      "integrity": "sha512-gBrxN88gOIf3R7ja5K9slwNayVcZgK6SOUORm2uBzTeIEfeVaIhOpCtTox3P6R7o2jLFwLFTLnC7kU/RGcYEgw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.17.0.tgz",
      "integrity": "sha512-yL/sLrpmtDaFEiUj1osRP4TI2MDz1AddJL+jZ7KSqvBuliN4xqYY54IfdN8qD8Toa6g1iloph1fxQNkjOxrrpQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.3.tgz",
      "integrity": "sha512-Kr+LPIUVKz2qkx1HAMH8q1q6azbqBAsXJUxBl/ODDuVPX45Z9DfwB8tPjTi6nNZ8BuM3nbJxC5zCAg5elnBUTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.1",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.39.2",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.39.2.tgz",
      "integrity": "sha512-q1mjIoW1VX4IvSocvM/vbTiveKC4k9eLrajNEuSsmjymSDEbpGddtpfOoN7YGAqBK3NG+uqo8ia4PDTt8buCYA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.1.tgz",
      "integrity": "sha512-43/qtrDUokr7LJqoF2c3+RInu/t4zfrpYdoSDfYyhg52rwLV6TnOvdG4fXm7IkSB3wErkcmJS9iEhjVtOSEjjA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.17.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@firebase/ai": {
      "version": "2.6.1",
      "resolved": "https://registry.npmjs.org/@firebase/ai/-/ai-2.6.1.tgz",
      "integrity": "sha512-qJd9bpABqsanFnwdbjZEDbKKr1jRtuUZ+cHyNBLWsxobH4pd73QncvuO3XlMq4eKBLlg1f5jNdFpJ3G3ABu2Tg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/analytics": {
      "version": "0.10.19",
      "resolved": "https://registry.npmjs.org/@firebase/analytics/-/analytics-0.10.19.tgz",
      "integrity": "sha512-3wU676fh60gaiVYQEEXsbGS4HbF2XsiBphyvvqDbtC1U4/dO4coshbYktcCHq+HFaGIK07iHOh4pME0hEq1fcg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/installations": "0.6.19",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/analytics-compat": {
      "version": "0.2.25",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-compat/-/analytics-compat-0.2.25.tgz",
      "integrity": "sha512-fdzoaG0BEKbqksRDhmf4JoyZf16Wosrl0Y7tbZtJyVDOOwziE0vrFjmZuTdviL0yhak+Nco6rMsUUbkbD+qb6Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/analytics": "0.10.19",
        "@firebase/analytics-types": "0.8.3",
        "@firebase/component": "0.7.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/analytics-types": {
      "version": "0.8.3",
      "resolved": "https://registry.npmjs.org/@firebase/analytics-types/-/analytics-types-0.8.3.tgz",
      "integrity": "sha512-VrIp/d8iq2g501qO46uGz3hjbDb8xzYMrbu8Tp0ovzIzrvJZ2fvmj649gTjge/b7cCCcjT0H37g1gVtlNhnkbg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app": {
      "version": "0.14.6",
      "resolved": "https://registry.npmjs.org/@firebase/app/-/app-0.14.6.tgz",
      "integrity": "sha512-4uyt8BOrBsSq6i4yiOV/gG6BnnrvTeyymlNcaN/dKvyU1GoolxAafvIvaNP1RCGPlNab3OuE4MKUQuv2lH+PLQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/app-check": {
      "version": "0.11.0",
      "resolved": "https://registry.npmjs.org/@firebase/app-check/-/app-check-0.11.0.tgz",
      "integrity": "sha512-XAvALQayUMBJo58U/rxW02IhsesaxxfWVmVkauZvGEz3vOAjMEQnzFlyblqkc2iAaO82uJ2ZVyZv9XzPfxjJ6w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/app-check-compat": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-compat/-/app-check-compat-0.4.0.tgz",
      "integrity": "sha512-UfK2Q8RJNjYM/8MFORltZRG9lJj11k0nW84rrffiKvcJxLf1jf6IEjCIkCamykHE73C6BwqhVfhIBs69GXQV0g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check": "0.11.0",
        "@firebase/app-check-types": "0.5.3",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/app-check-interop-types": {
      "version": "0.3.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-interop-types/-/app-check-interop-types-0.3.3.tgz",
      "integrity": "sha512-gAlxfPLT2j8bTI/qfe3ahl2I2YcBQ8cFIBdhAQA4I2f3TndcO+22YizyGYuttLHPQEpWkhmpFW60VCFEPg4g5A==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-check-types": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-check-types/-/app-check-types-0.5.3.tgz",
      "integrity": "sha512-hyl5rKSj0QmwPdsAxrI5x1otDlByQ7bvNvVt8G/XPO2CSwE++rmSVf3VEhaeOR4J8ZFaF0Z0NDSmLejPweZ3ng==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/app-compat": {
      "version": "0.5.6",
      "resolved": "https://registry.npmjs.org/@firebase/app-compat/-/app-compat-0.5.6.tgz",
      "integrity": "sha512-YYGARbutghQY4zZUWMYia0ib0Y/rb52y72/N0z3vglRHL7ii/AaK9SA7S/dzScVOlCdnbHXz+sc5Dq+r8fwFAg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app": "0.14.6",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/app-types": {
      "version": "0.9.3",
      "resolved": "https://registry.npmjs.org/@firebase/app-types/-/app-types-0.9.3.tgz",
      "integrity": "sha512-kRVpIl4vVGJ4baogMDINbyrIOtOxqhkZQg4jTq3l8Lw6WSk0xfpEYzezFu+Kl4ve4fbPl79dvwRtaFqAC/ucCw==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/auth": {
      "version": "1.12.0",
      "resolved": "https://registry.npmjs.org/@firebase/auth/-/auth-1.12.0.tgz",
      "integrity": "sha512-zkvLpsrxynWHk07qGrUDfCSqKf4AvfZGEqJ7mVCtYGjNNDbGE71k0Yn84rg8QEZu4hQw1BC0qDEHzpNVBcSVmA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x",
        "@react-native-async-storage/async-storage": "^2.2.0"
      },
      "peerDependenciesMeta": {
        "@react-native-async-storage/async-storage": {
          "optional": true
        }
      }
    },
    "node_modules/@firebase/auth-compat": {
      "version": "0.6.2",
      "resolved": "https://registry.npmjs.org/@firebase/auth-compat/-/auth-compat-0.6.2.tgz",
      "integrity": "sha512-8UhCzF6pav9bw/eXA8Zy1QAKssPRYEYXaWagie1ewLTwHkXv6bKp/j6/IwzSYQP67sy/BMFXIFaCCsoXzFLr7A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth": "1.12.0",
        "@firebase/auth-types": "0.13.0",
        "@firebase/component": "0.7.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/auth-interop-types": {
      "version": "0.2.4",
      "resolved": "https://registry.npmjs.org/@firebase/auth-interop-types/-/auth-interop-types-0.2.4.tgz",
      "integrity": "sha512-JPgcXKCuO+CWqGDnigBtvo09HeBs5u/Ktc2GaFj2m01hLarbxthLNm7Fk8iOP1aqAtXV+fnnGj7U28xmk7IwVA==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/auth-types": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@firebase/auth-types/-/auth-types-0.13.0.tgz",
      "integrity": "sha512-S/PuIjni0AQRLF+l9ck0YpsMOdE8GO2KU6ubmBB7P+7TJUCQDa3R1dlgYm9UzGbbePMZsp0xzB93f2b/CgxMOg==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/component": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/@firebase/component/-/component-0.7.0.tgz",
      "integrity": "sha512-wR9En2A+WESUHexjmRHkqtaVH94WLNKt6rmeqZhSLBybg4Wyf0Umk04SZsS6sBq4102ZsDBFwoqMqJYj2IoDSg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/data-connect": {
      "version": "0.3.12",
      "resolved": "https://registry.npmjs.org/@firebase/data-connect/-/data-connect-0.3.12.tgz",
      "integrity": "sha512-baPddcoNLj/+vYo+HSJidJUdr5W4OkhT109c5qhR8T1dJoZcyJpkv/dFpYlw/VJ3dV66vI8GHQFrmAZw/xUS4g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/database": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@firebase/database/-/database-1.1.0.tgz",
      "integrity": "sha512-gM6MJFae3pTyNLoc9VcJNuaUDej0ctdjn3cVtILo3D5lpp0dmUHHLFN/pUKe7ImyeB1KAvRlEYxvIHNF04Filg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "faye-websocket": "0.11.4",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/database-compat": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@firebase/database-compat/-/database-compat-2.1.0.tgz",
      "integrity": "sha512-8nYc43RqxScsePVd1qe1xxvWNf0OBnbwHxmXJ7MHSuuTVYFO3eLyLW3PiCKJ9fHnmIz4p4LbieXwz+qtr9PZDg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/database": "1.1.0",
        "@firebase/database-types": "1.0.16",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/database-types": {
      "version": "1.0.16",
      "resolved": "https://registry.npmjs.org/@firebase/database-types/-/database-types-1.0.16.tgz",
      "integrity": "sha512-xkQLQfU5De7+SPhEGAXFBnDryUWhhlFXelEg2YeZOQMCdoe7dL64DDAd77SQsR+6uoXIZY5MB4y/inCs4GTfcw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-types": "0.9.3",
        "@firebase/util": "1.13.0"
      }
    },
    "node_modules/@firebase/firestore": {
      "version": "4.9.3",
      "resolved": "https://registry.npmjs.org/@firebase/firestore/-/firestore-4.9.3.tgz",
      "integrity": "sha512-RVuvhcQzs1sD5Osr2naQS71H0bQMbSnib16uOWAKk3GaKb/WBPyCYSr2Ry7MqlxDP/YhwknUxECL07lw9Rq1nA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "@firebase/webchannel-wrapper": "1.0.5",
        "@grpc/grpc-js": "~1.9.0",
        "@grpc/proto-loader": "^0.7.8",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/firestore-compat": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-compat/-/firestore-compat-0.4.3.tgz",
      "integrity": "sha512-1ylF/njF68Pmb6p0erP0U78XQv1w77Wap4bUmqZ7ZVkmN1oMgplyu0TyirWtCBoKFRV2+SUZfWXvIij/z39LYg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/firestore": "4.9.3",
        "@firebase/firestore-types": "3.0.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/firestore-types": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@firebase/firestore-types/-/firestore-types-3.0.3.tgz",
      "integrity": "sha512-hD2jGdiWRxB/eZWF89xcK9gF8wvENDJkzpVFb4aGkzfEaKxVRD1kjz1t1Wj8VZEp2LCB53Yx1zD8mrhQu87R6Q==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/functions": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/@firebase/functions/-/functions-0.13.1.tgz",
      "integrity": "sha512-sUeWSb0rw5T+6wuV2o9XNmh9yHxjFI9zVGFnjFi+n7drTEWpl7ZTz1nROgGrSu472r+LAaj+2YaSicD4R8wfbw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/app-check-interop-types": "0.3.3",
        "@firebase/auth-interop-types": "0.2.4",
        "@firebase/component": "0.7.0",
        "@firebase/messaging-interop-types": "0.2.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/functions-compat": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@firebase/functions-compat/-/functions-compat-0.4.1.tgz",
      "integrity": "sha512-AxxUBXKuPrWaVNQ8o1cG1GaCAtXT8a0eaTDfqgS5VsRYLAR0ALcfqDLwo/QyijZj1w8Qf8n3Qrfy/+Im245hOQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/functions": "0.13.1",
        "@firebase/functions-types": "0.6.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/functions-types": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/@firebase/functions-types/-/functions-types-0.6.3.tgz",
      "integrity": "sha512-EZoDKQLUHFKNx6VLipQwrSMh01A1SaL3Wg6Hpi//x6/fJ6Ee4hrAeswK99I5Ht8roiniKHw4iO0B1Oxj5I4plg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/installations": {
      "version": "0.6.19",
      "resolved": "https://registry.npmjs.org/@firebase/installations/-/installations-0.6.19.tgz",
      "integrity": "sha512-nGDmiwKLI1lerhwfwSHvMR9RZuIH5/8E3kgUWnVRqqL7kGVSktjLTWEMva7oh5yxQ3zXfIlIwJwMcaM5bK5j8Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/util": "1.13.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/installations-compat": {
      "version": "0.2.19",
      "resolved": "https://registry.npmjs.org/@firebase/installations-compat/-/installations-compat-0.2.19.tgz",
      "integrity": "sha512-khfzIY3EI5LePePo7vT19/VEIH1E3iYsHknI/6ek9T8QCozAZshWT9CjlwOzZrKvTHMeNcbpo/VSOSIWDSjWdQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/installations": "0.6.19",
        "@firebase/installations-types": "0.5.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/installations-types": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/@firebase/installations-types/-/installations-types-0.5.3.tgz",
      "integrity": "sha512-2FJI7gkLqIE0iYsNQ1P751lO3hER+Umykel+TkLwHj6plzWVxqvfclPUZhcKFVQObqloEBTmpi2Ozn7EkCABAA==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x"
      }
    },
    "node_modules/@firebase/logger": {
      "version": "0.5.0",
      "resolved": "https://registry.npmjs.org/@firebase/logger/-/logger-0.5.0.tgz",
      "integrity": "sha512-cGskaAvkrnh42b3BA3doDWeBmuHFO/Mx5A83rbRDYakPjO9bJtRL3dX7javzc2Rr/JHZf4HlterTW2lUkfeN4g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/messaging": {
      "version": "0.12.23",
      "resolved": "https://registry.npmjs.org/@firebase/messaging/-/messaging-0.12.23.tgz",
      "integrity": "sha512-cfuzv47XxqW4HH/OcR5rM+AlQd1xL/VhuaeW/wzMW1LFrsFcTn0GND/hak1vkQc2th8UisBcrkVcQAnOnKwYxg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/installations": "0.6.19",
        "@firebase/messaging-interop-types": "0.2.3",
        "@firebase/util": "1.13.0",
        "idb": "7.1.1",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/messaging-compat": {
      "version": "0.2.23",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-compat/-/messaging-compat-0.2.23.tgz",
      "integrity": "sha512-SN857v/kBUvlQ9X/UjAqBoQ2FEaL1ZozpnmL1ByTe57iXkmnVVFm9KqAsTfmf+OEwWI4kJJe9NObtN/w22lUgg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/messaging": "0.12.23",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/messaging-interop-types": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@firebase/messaging-interop-types/-/messaging-interop-types-0.2.3.tgz",
      "integrity": "sha512-xfzFaJpzcmtDjycpDeCUj0Ge10ATFi/VHVIvEEjDNc3hodVBQADZ7BWQU7CuFpjSHE+eLuBI13z5F/9xOoGX8Q==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/performance": {
      "version": "0.7.9",
      "resolved": "https://registry.npmjs.org/@firebase/performance/-/performance-0.7.9.tgz",
      "integrity": "sha512-UzybENl1EdM2I1sjYm74xGt/0JzRnU/0VmfMAKo2LSpHJzaj77FCLZXmYQ4oOuE+Pxtt8Wy2BVJEENiZkaZAzQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/installations": "0.6.19",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0",
        "web-vitals": "^4.2.4"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/performance-compat": {
      "version": "0.2.22",
      "resolved": "https://registry.npmjs.org/@firebase/performance-compat/-/performance-compat-0.2.22.tgz",
      "integrity": "sha512-xLKxaSAl/FVi10wDX/CHIYEUP13jXUjinL+UaNXT9ByIvxII5Ne5150mx6IgM8G6Q3V+sPiw9C8/kygkyHUVxg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/performance": "0.7.9",
        "@firebase/performance-types": "0.2.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/performance-types": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@firebase/performance-types/-/performance-types-0.2.3.tgz",
      "integrity": "sha512-IgkyTz6QZVPAq8GSkLYJvwSLr3LS9+V6vNPQr0x4YozZJiLF5jYixj0amDtATf1X0EtYHqoPO48a9ija8GocxQ==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/remote-config": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config/-/remote-config-0.7.0.tgz",
      "integrity": "sha512-dX95X6WlW7QlgNd7aaGdjAIZUiQkgWgNS+aKNu4Wv92H1T8Ue/NDUjZHd9xb8fHxLXIHNZeco9/qbZzr500MjQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/installations": "0.6.19",
        "@firebase/logger": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-compat": {
      "version": "0.2.20",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-compat/-/remote-config-compat-0.2.20.tgz",
      "integrity": "sha512-P/ULS9vU35EL9maG7xp66uljkZgcPMQOxLj3Zx2F289baTKSInE6+YIkgHEi1TwHoddC/AFePXPpshPlEFkbgg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/logger": "0.5.0",
        "@firebase/remote-config": "0.7.0",
        "@firebase/remote-config-types": "0.5.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/remote-config-types": {
      "version": "0.5.0",
      "resolved": "https://registry.npmjs.org/@firebase/remote-config-types/-/remote-config-types-0.5.0.tgz",
      "integrity": "sha512-vI3bqLoF14L/GchtgayMiFpZJF+Ao3uR8WCde0XpYNkSokDpAKca2DxvcfeZv7lZUqkUwQPL2wD83d3vQ4vvrg==",
      "license": "Apache-2.0"
    },
    "node_modules/@firebase/storage": {
      "version": "0.14.0",
      "resolved": "https://registry.npmjs.org/@firebase/storage/-/storage-0.14.0.tgz",
      "integrity": "sha512-xWWbb15o6/pWEw8H01UQ1dC5U3rf8QTAzOChYyCpafV6Xki7KVp3Yaw2nSklUwHEziSWE9KoZJS7iYeyqWnYFA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app": "0.x"
      }
    },
    "node_modules/@firebase/storage-compat": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@firebase/storage-compat/-/storage-compat-0.4.0.tgz",
      "integrity": "sha512-vDzhgGczr1OfcOy285YAPur5pWDEvD67w4thyeCUh6Ys0izN9fNYtA1MJERmNBfqjqu0lg0FM5GLbw0Il21M+g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/component": "0.7.0",
        "@firebase/storage": "0.14.0",
        "@firebase/storage-types": "0.8.3",
        "@firebase/util": "1.13.0",
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      },
      "peerDependencies": {
        "@firebase/app-compat": "0.x"
      }
    },
    "node_modules/@firebase/storage-types": {
      "version": "0.8.3",
      "resolved": "https://registry.npmjs.org/@firebase/storage-types/-/storage-types-0.8.3.tgz",
      "integrity": "sha512-+Muk7g9uwngTpd8xn9OdF/D48uiQ7I1Fae7ULsWPuKoCH3HU7bfFPhxtJYzyhjdniowhuDpQcfPmuNRAqZEfvg==",
      "license": "Apache-2.0",
      "peerDependencies": {
        "@firebase/app-types": "0.x",
        "@firebase/util": "1.x"
      }
    },
    "node_modules/@firebase/util": {
      "version": "1.13.0",
      "resolved": "https://registry.npmjs.org/@firebase/util/-/util-1.13.0.tgz",
      "integrity": "sha512-0AZUyYUfpMNcztR5l09izHwXkZpghLgCUaAGjtMwXnCg3bj4ml5VgiwqOMOxJ+Nw4qN/zJAaOQBcJ7KGkWStqQ==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@firebase/webchannel-wrapper": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/@firebase/webchannel-wrapper/-/webchannel-wrapper-1.0.5.tgz",
      "integrity": "sha512-+uGNN7rkfn41HLO0vekTFhTxk61eKa8mTpRGLO0QSqlQdKvIoGAvLp3ppdVIWbTGYJWM6Kp0iN+PjMIOcnVqTw==",
      "license": "Apache-2.0"
    },
    "node_modules/@grpc/grpc-js": {
      "version": "1.9.15",
      "resolved": "https://registry.npmjs.org/@grpc/grpc-js/-/grpc-js-1.9.15.tgz",
      "integrity": "sha512-nqE7Hc0AzI+euzUwDAy0aY5hCp10r734gMGRdU+qOPX0XSceI2ULrcXB5U2xSc5VkWwalCj4M7GzCAygZl2KoQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@grpc/proto-loader": "^0.7.8",
        "@types/node": ">=12.12.47"
      },
      "engines": {
        "node": "^8.13.0 || >=10.10.0"
      }
    },
    "node_modules/@grpc/proto-loader": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.7.15.tgz",
      "integrity": "sha512-tMXdRCfYVixjuFK+Hk0Q1s38gV9zDiDJfWL3h1rv4Qc39oILCu1TRTDt7+fGUI8K4G1Fj125Hx/ru3azECWTyQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.2.5",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@img/colour": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@img/colour/-/colour-1.0.0.tgz",
      "integrity": "sha512-A5P/LfWGFSl6nsckYtjw9da+19jB8hkJ6ACTGcDfEJ0aE+l2n2El7dsVM7UVHZQ9s2lmYMWlrS21YLy2IR1LUw==",
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@img/sharp-darwin-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-arm64/-/sharp-darwin-arm64-0.34.5.tgz",
      "integrity": "sha512-imtQ3WMJXbMY4fxb/Ndp6HBTNVtWCUI0WdobyheGf5+ad6xX8VIDO8u2xE4qc/fr08CKG/7dDseFtn6M6g/r3w==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-darwin-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-darwin-x64/-/sharp-darwin-x64-0.34.5.tgz",
      "integrity": "sha512-YNEFAF/4KQ/PeW0N+r+aVVsoIY0/qxxikF2SWdp+NRkmMB7y9LBZAVqQ4yhGCm/H3H270OSykqmQMKLBhBJDEw==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-darwin-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-arm64/-/sharp-libvips-darwin-arm64-1.2.4.tgz",
      "integrity": "sha512-zqjjo7RatFfFoP0MkQ51jfuFZBnVE2pRiaydKJ1G/rHZvnsrHAOcQALIi9sA5co5xenQdTugCvtb1cuf78Vf4g==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-darwin-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-darwin-x64/-/sharp-libvips-darwin-x64-1.2.4.tgz",
      "integrity": "sha512-1IOd5xfVhlGwX+zXv2N93k0yMONvUlANylbJw1eTah8K/Jtpi15KC+WSiaX/nBmbm2HxRM1gZ0nSdjSsrZbGKg==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "darwin"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm/-/sharp-libvips-linux-arm-1.2.4.tgz",
      "integrity": "sha512-bFI7xcKFELdiNCVov8e44Ia4u2byA+l3XtsAj+Q8tfCwO6BQ8iDojYdvoPMqsKDkuoOo+X6HZA0s0q11ANMQ8A==",
      "cpu": [
        "arm"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-arm64/-/sharp-libvips-linux-arm64-1.2.4.tgz",
      "integrity": "sha512-excjX8DfsIcJ10x1Kzr4RcWe1edC9PquDRRPx3YVCvQv+U5p7Yin2s32ftzikXojb1PIFc/9Mt28/y+iRklkrw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-ppc64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-ppc64/-/sharp-libvips-linux-ppc64-1.2.4.tgz",
      "integrity": "sha512-FMuvGijLDYG6lW+b/UvyilUWu5Ayu+3r2d1S8notiGCIyYU/76eig1UfMmkZ7vwgOrzKzlQbFSuQfgm7GYUPpA==",
      "cpu": [
        "ppc64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-riscv64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-riscv64/-/sharp-libvips-linux-riscv64-1.2.4.tgz",
      "integrity": "sha512-oVDbcR4zUC0ce82teubSm+x6ETixtKZBh/qbREIOcI3cULzDyb18Sr/Wcyx7NRQeQzOiHTNbZFF1UwPS2scyGA==",
      "cpu": [
        "riscv64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-s390x": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-s390x/-/sharp-libvips-linux-s390x-1.2.4.tgz",
      "integrity": "sha512-qmp9VrzgPgMoGZyPvrQHqk02uyjA0/QrTO26Tqk6l4ZV0MPWIW6LTkqOIov+J1yEu7MbFQaDpwdwJKhbJvuRxQ==",
      "cpu": [
        "s390x"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linux-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linux-x64/-/sharp-libvips-linux-x64-1.2.4.tgz",
      "integrity": "sha512-tJxiiLsmHc9Ax1bz3oaOYBURTXGIRDODBqhveVHonrHJ9/+k89qbLl0bcJns+e4t4rvaNBxaEZsFtSfAdquPrw==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-arm64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-arm64/-/sharp-libvips-linuxmusl-arm64-1.2.4.tgz",
      "integrity": "sha512-FVQHuwx1IIuNow9QAbYUzJ+En8KcVm9Lk5+uGUQJHaZmMECZmOlix9HnH7n1TRkXMS0pGxIJokIVB9SuqZGGXw==",
      "cpu": [
        "arm64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-libvips-linuxmusl-x64": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/@img/sharp-libvips-linuxmusl-x64/-/sharp-libvips-linuxmusl-x64-1.2.4.tgz",
      "integrity": "sha512-+LpyBk7L44ZIXwz/VYfglaX/okxezESc6UxDSoyo2Ks6Jxc4Y7sGjpgU9s4PMgqgjj1gZCylTieNamqA1MF7Dg==",
      "cpu": [
        "x64"
      ],
      "license": "LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "linux"
      ],
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-linux-arm": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm/-/sharp-linux-arm-0.34.5.tgz",
      "integrity": "sha512-9dLqsvwtg1uuXBGZKsxem9595+ujv0sJ6Vi8wcTANSFpwV/GONat5eCkzQo/1O6zRIkh0m/8+5BjrRr7jDUSZw==",
      "cpu": [
        "arm"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-arm64/-/sharp-linux-arm64-0.34.5.tgz",
      "integrity": "sha512-bKQzaJRY/bkPOXyKx5EVup7qkaojECG6NLYswgktOZjaXecSAeCWiZwwiFf3/Y+O1HrauiE3FVsGxFg8c24rZg==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-ppc64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-ppc64/-/sharp-linux-ppc64-0.34.5.tgz",
      "integrity": "sha512-7zznwNaqW6YtsfrGGDA6BRkISKAAE1Jo0QdpNYXNMHu2+0dTrPflTLNkpc8l7MUP5M16ZJcUvysVWWrMefZquA==",
      "cpu": [
        "ppc64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-ppc64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-riscv64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-riscv64/-/sharp-linux-riscv64-0.34.5.tgz",
      "integrity": "sha512-51gJuLPTKa7piYPaVs8GmByo7/U7/7TZOq+cnXJIHZKavIRHAP77e3N2HEl3dgiqdD/w0yUfiJnII77PuDDFdw==",
      "cpu": [
        "riscv64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-riscv64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-s390x": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-s390x/-/sharp-linux-s390x-0.34.5.tgz",
      "integrity": "sha512-nQtCk0PdKfho3eC5MrbQoigJ2gd1CgddUMkabUj+rBevs8tZ2cULOx46E7oyX+04WGfABgIwmMC0VqieTiR4jg==",
      "cpu": [
        "s390x"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-s390x": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linux-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linux-x64/-/sharp-linux-x64-0.34.5.tgz",
      "integrity": "sha512-MEzd8HPKxVxVenwAa+JRPwEC7QFjoPWuS5NZnBt6B3pu7EG2Ge0id1oLHZpPJdn3OQK+BQDiw9zStiHBTJQQQQ==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linux-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linuxmusl-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-arm64/-/sharp-linuxmusl-arm64-0.34.5.tgz",
      "integrity": "sha512-fprJR6GtRsMt6Kyfq44IsChVZeGN97gTD331weR1ex1c1rypDEABN6Tm2xa1wE6lYb5DdEnk03NZPqA7Id21yg==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-linuxmusl-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-linuxmusl-x64/-/sharp-linuxmusl-x64-0.34.5.tgz",
      "integrity": "sha512-Jg8wNT1MUzIvhBFxViqrEhWDGzqymo3sV7z7ZsaWbZNDLXRJZoRGrjulp60YYtV4wfY8VIKcWidjojlLcWrd8Q==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-libvips-linuxmusl-x64": "1.2.4"
      }
    },
    "node_modules/@img/sharp-wasm32": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-wasm32/-/sharp-wasm32-0.34.5.tgz",
      "integrity": "sha512-OdWTEiVkY2PHwqkbBI8frFxQQFekHaSSkUIJkwzclWZe64O1X4UlUjqqqLaPbUpMOQk6FBu/HtlGXNblIs0huw==",
      "cpu": [
        "wasm32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later AND MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/runtime": "^1.7.0"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-arm64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-arm64/-/sharp-win32-arm64-0.34.5.tgz",
      "integrity": "sha512-WQ3AgWCWYSb2yt+IG8mnC6Jdk9Whs7O0gxphblsLvdhSpSTtmu69ZG1Gkb6NuvxsNACwiPV6cNSZNzt0KPsw7g==",
      "cpu": [
        "arm64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-ia32": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-ia32/-/sharp-win32-ia32-0.34.5.tgz",
      "integrity": "sha512-FV9m/7NmeCmSHDD5j4+4pNI8Cp3aW+JvLoXcTUo0IqyjSfAZJ8dIUmijx1qaJsIiU+Hosw6xM5KijAWRJCSgNg==",
      "cpu": [
        "ia32"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@img/sharp-win32-x64": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/@img/sharp-win32-x64/-/sharp-win32-x64-0.34.5.tgz",
      "integrity": "sha512-+29YMsqY2/9eFEiW93eqWnuLcWcufowXewwSNIT6UwZdUUCrM3oFjMWH/Z6/TMmb4hlFenmfAVbpWeup2jryCw==",
      "cpu": [
        "x64"
      ],
      "license": "Apache-2.0 AND LGPL-3.0-or-later",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@napi-rs/wasm-runtime": {
      "version": "0.2.12",
      "resolved": "https://registry.npmjs.org/@napi-rs/wasm-runtime/-/wasm-runtime-0.2.12.tgz",
      "integrity": "sha512-ZVWUcfwY4E/yPitQJl481FjFo3K22D6qF0DuFH6Y/nbnE11GY5uguDxZMGXPQ8WQ0128MXQD7TnfHyK4oWoIJQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@emnapi/core": "^1.4.3",
        "@emnapi/runtime": "^1.4.3",
        "@tybys/wasm-util": "^0.10.0"
      }
    },
    "node_modules/@next/env": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/env/-/env-16.0.10.tgz",
      "integrity": "sha512-8tuaQkyDVgeONQ1MeT9Mkk8pQmZapMKFh5B+OrFUlG3rVmYTXcXlBetBgTurKXGaIZvkoqRT9JL5K3phXcgang==",
      "license": "MIT"
    },
    "node_modules/@next/eslint-plugin-next": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/eslint-plugin-next/-/eslint-plugin-next-16.0.10.tgz",
      "integrity": "sha512-b2NlWN70bbPLmfyoLvvidPKWENBYYIe017ZGUpElvQjDytCWgxPJx7L9juxHt0xHvNVA08ZHJdOyhGzon/KJuw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-glob": "3.3.1"
      }
    },
    "node_modules/@next/swc-darwin-arm64": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-arm64/-/swc-darwin-arm64-16.0.10.tgz",
      "integrity": "sha512-4XgdKtdVsaflErz+B5XeG0T5PeXKDdruDf3CRpnhN+8UebNa5N2H58+3GDgpn/9GBurrQ1uWW768FfscwYkJRg==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-darwin-x64": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-darwin-x64/-/swc-darwin-x64-16.0.10.tgz",
      "integrity": "sha512-spbEObMvRKkQ3CkYVOME+ocPDFo5UqHb8EMTS78/0mQ+O1nqE8toHJVioZo4TvebATxgA8XMTHHrScPrn68OGw==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-gnu": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-gnu/-/swc-linux-arm64-gnu-16.0.10.tgz",
      "integrity": "sha512-uQtWE3X0iGB8apTIskOMi2w/MKONrPOUCi5yLO+v3O8Mb5c7K4Q5KD1jvTpTF5gJKa3VH/ijKjKUq9O9UhwOYw==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-arm64-musl": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-arm64-musl/-/swc-linux-arm64-musl-16.0.10.tgz",
      "integrity": "sha512-llA+hiDTrYvyWI21Z0L1GiXwjQaanPVQQwru5peOgtooeJ8qx3tlqRV2P7uH2pKQaUfHxI/WVarvI5oYgGxaTw==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-gnu": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-gnu/-/swc-linux-x64-gnu-16.0.10.tgz",
      "integrity": "sha512-AK2q5H0+a9nsXbeZ3FZdMtbtu9jxW4R/NgzZ6+lrTm3d6Zb7jYrWcgjcpM1k8uuqlSy4xIyPR2YiuUr+wXsavA==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-linux-x64-musl": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-linux-x64-musl/-/swc-linux-x64-musl-16.0.10.tgz",
      "integrity": "sha512-1TDG9PDKivNw5550S111gsO4RGennLVl9cipPhtkXIFVwo31YZ73nEbLjNC8qG3SgTz/QZyYyaFYMeY4BKZR/g==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-arm64-msvc": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-arm64-msvc/-/swc-win32-arm64-msvc-16.0.10.tgz",
      "integrity": "sha512-aEZIS4Hh32xdJQbHz121pyuVZniSNoqDVx1yIr2hy+ZwJGipeqnMZBJHyMxv2tiuAXGx6/xpTcQJ6btIiBjgmg==",
      "cpu": [
        "arm64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@next/swc-win32-x64-msvc": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/@next/swc-win32-x64-msvc/-/swc-win32-x64-msvc-16.0.10.tgz",
      "integrity": "sha512-E+njfCoFLb01RAFEnGZn6ERoOqhK1Gl3Lfz1Kjnj0Ulfu7oJbuMyvBKNj/bw8XZnenHDASlygTjZICQW+rYW1Q==",
      "cpu": [
        "x64"
      ],
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nolyfill/is-core-module": {
      "version": "1.0.39",
      "resolved": "https://registry.npmjs.org/@nolyfill/is-core-module/-/is-core-module-1.0.39.tgz",
      "integrity": "sha512-nn5ozdjYQpUCZlWGuxcJY/KpxkWQs4DcbMCmKojjyrYDEAGy4Ce19NN4v5MduafTwJlbKc99UA8YhSVqq9yPZA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.4.0"
      }
    },
    "node_modules/@protobufjs/aspromise": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/base64": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/codegen": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/eventemitter": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/fetch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.1",
        "@protobufjs/inquire": "^1.1.0"
      }
    },
    "node_modules/@protobufjs/float": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/inquire": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/path": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/pool": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/utf8": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@rtsao/scc": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@rtsao/scc/-/scc-1.1.0.tgz",
      "integrity": "sha512-zt6OdqaDoOnJ1ZYsCYGt9YmWzDXl4vQdKTyJev62gFhRGKdx7mcT54V9KIjg+d2wi9EXsPvAPKe7i7WjfVWB8g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@swc/helpers": {
      "version": "0.5.15",
      "resolved": "https://registry.npmjs.org/@swc/helpers/-/helpers-0.5.15.tgz",
      "integrity": "sha512-JQ5TuMi45Owi4/BIMAJBoSQoOJu12oOk/gADqlcUL9JEdHB8vyjUSsxqeNXnmXHjYKMi2WcYtezGEEhqUI/E2g==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.8.0"
      }
    },
    "node_modules/@tybys/wasm-util": {
      "version": "0.10.1",
      "resolved": "https://registry.npmjs.org/@tybys/wasm-util/-/wasm-util-0.10.1.tgz",
      "integrity": "sha512-9tTaPJLSiejZKx+Bmog4uSubteqTvFrVrURwkmHixBo0G4seD0zUxp98E1DzUBJxLQ3NPwXrGKDiVjwx/DpPsg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "tslib": "^2.4.0"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json5": {
      "version": "0.0.29",
      "resolved": "https://registry.npmjs.org/@types/json5/-/json5-0.0.29.tgz",
      "integrity": "sha512-dRLjCWHYg4oaA77cxO64oO+7JwCwnIzkZPdrrC71jQmQtlhM556pwKo5bUzqvZndkVbeFLIIi+9TC40JNF5hNQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "20.19.27",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.27.tgz",
      "integrity": "sha512-N2clP5pJhB2YnZJ3PIHFk5RkygRX5WO/5f0WC08tp0wd+sv0rsJk3MqWn3CbNmT2J505a5336jaQj4ph1AdMug==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/react": {
      "version": "19.2.7",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.2.7.tgz",
      "integrity": "sha512-MWtvHrGZLFttgeEj28VXHxpmwYbor/ATPYbBfSFZEIRK0ecCFLl2Qo55z52Hss+UV9CRN7trSeq1zbgx7YDWWg==",
      "devOptional": true,
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.2.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.2.3",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.2.3.tgz",
      "integrity": "sha512-jp2L/eY6fn+KgVVQAOqYItbF0VY/YApe5Mz2F0aykSO8gx31bYCZyvSeYxCHKvzHG5eZjc+zyaS5BrBWya2+kQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^19.2.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.50.0.tgz",
      "integrity": "sha512-O7QnmOXYKVtPrfYzMolrCTfkezCJS9+ljLdKW/+DCvRsc3UAz+sbH6Xcsv7p30+0OwUbeWfUDAQE0vpabZ3QLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.50.0",
        "@typescript-eslint/type-utils": "8.50.0",
        "@typescript-eslint/utils": "8.50.0",
        "@typescript-eslint/visitor-keys": "8.50.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.50.0",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.50.0.tgz",
      "integrity": "sha512-6/cmF2piao+f6wSxUsJLZjck7OQsYyRtcOZS02k7XINSNlz93v6emM8WutDQSXnroG2xwYlEVHJI+cPA7CPM3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.50.0",
        "@typescript-eslint/types": "8.50.0",
        "@typescript-eslint/typescript-estree": "8.50.0",
        "@typescript-eslint/visitor-keys": "8.50.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.50.0.tgz",
      "integrity": "sha512-Cg/nQcL1BcoTijEWyx4mkVC56r8dj44bFDvBdygifuS20f3OZCHmFbjF34DPSi07kwlFvqfv/xOLnJ5DquxSGQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.50.0",
        "@typescript-eslint/types": "^8.50.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.50.0.tgz",
      "integrity": "sha512-xCwfuCZjhIqy7+HKxBLrDVT5q/iq7XBVBXLn57RTIIpelLtEIZHXAF/Upa3+gaCpeV1NNS5Z9A+ID6jn50VD4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.50.0",
        "@typescript-eslint/visitor-keys": "8.50.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.50.0.tgz",
      "integrity": "sha512-vxd3G/ybKTSlm31MOA96gqvrRGv9RJ7LGtZCn2Vrc5htA0zCDvcMqUkifcjrWNNKXHUU3WCkYOzzVSFBd0wa2w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.50.0.tgz",
      "integrity": "sha512-7OciHT2lKCewR0mFoBrvZJ4AXTMe/sYOe87289WAViOocEmDjjv8MvIOT2XESuKj9jp8u3SZYUSh89QA4S1kQw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.50.0",
        "@typescript-eslint/typescript-estree": "8.50.0",
        "@typescript-eslint/utils": "8.50.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.50.0.tgz",
      "integrity": "sha512-iX1mgmGrXdANhhITbpp2QQM2fGehBse9LbTf0sidWK6yg/NE+uhV5dfU1g6EYPlcReYmkE9QLPq/2irKAmtS9w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.50.0.tgz",
      "integrity": "sha512-W7SVAGBR/IX7zm1t70Yujpbk+zdPq/u4soeFSknWFdXIFuWsBGBOUu/Tn/I6KHSKvSh91OiMuaSnYp3mtPt5IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.50.0",
        "@typescript-eslint/tsconfig-utils": "8.50.0",
        "@typescript-eslint/types": "8.50.0",
        "@typescript-eslint/visitor-keys": "8.50.0",
        "debug": "^4.3.4",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "tinyglobby": "^0.2.15",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.50.0.tgz",
      "integrity": "sha512-87KgUXET09CRjGCi2Ejxy3PULXna63/bMYv72tCAlDJC3Yqwln0HiFJ3VJMst2+mEtNtZu5oFvX4qJGjKsnAgg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.50.0",
        "@typescript-eslint/types": "8.50.0",
        "@typescript-eslint/typescript-estree": "8.50.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.50.0.tgz",
      "integrity": "sha512-Xzmnb58+Db78gT/CCj/PVCvK+zxbnsw6F+O1oheYszJbBSdEjVhQi3C/Xttzxgi/GLmpvOggRs1RFpiJ8+c34Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.50.0",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@unrs/resolver-binding-android-arm-eabi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm-eabi/-/resolver-binding-android-arm-eabi-1.11.1.tgz",
      "integrity": "sha512-ppLRUgHVaGRWUx0R0Ut06Mjo9gBaBkg3v/8AxusGLhsIotbBLuRk51rAzqLC8gq6NyyAojEXglNjzf6R948DNw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-android-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-android-arm64/-/resolver-binding-android-arm64-1.11.1.tgz",
      "integrity": "sha512-lCxkVtb4wp1v+EoN+HjIG9cIIzPkX5OtM03pQYkG+U5O/wL53LC4QbIeazgiKqluGeVEeBlZahHalCaBvU1a2g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-arm64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-arm64/-/resolver-binding-darwin-arm64-1.11.1.tgz",
      "integrity": "sha512-gPVA1UjRu1Y/IsB/dQEsp2V1pm44Of6+LWvbLc9SDk1c2KhhDRDBUkQCYVWe6f26uJb3fOK8saWMgtX8IrMk3g==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-darwin-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-darwin-x64/-/resolver-binding-darwin-x64-1.11.1.tgz",
      "integrity": "sha512-cFzP7rWKd3lZaCsDze07QX1SC24lO8mPty9vdP+YVa3MGdVgPmFc59317b2ioXtgCMKGiCLxJ4HQs62oz6GfRQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@unrs/resolver-binding-freebsd-x64": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-freebsd-x64/-/resolver-binding-freebsd-x64-1.11.1.tgz",
      "integrity": "sha512-fqtGgak3zX4DCB6PFpsH5+Kmt/8CIi4Bry4rb1ho6Av2QHTREM+47y282Uqiu3ZRF5IQioJQ5qWRV6jduA+iGw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-gnueabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-gnueabihf/-/resolver-binding-linux-arm-gnueabihf-1.11.1.tgz",
      "integrity": "sha512-u92mvlcYtp9MRKmP+ZvMmtPN34+/3lMHlyMj7wXJDeXxuM0Vgzz0+PPJNsro1m3IZPYChIkn944wW8TYgGKFHw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm-musleabihf": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm-musleabihf/-/resolver-binding-linux-arm-musleabihf-1.11.1.tgz",
      "integrity": "sha512-cINaoY2z7LVCrfHkIcmvj7osTOtm6VVT16b5oQdS4beibX2SYBwgYLmqhBjA1t51CarSaBuX5YNsWLjsqfW5Cw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-gnu/-/resolver-binding-linux-arm64-gnu-1.11.1.tgz",
      "integrity": "sha512-34gw7PjDGB9JgePJEmhEqBhWvCiiWCuXsL9hYphDF7crW7UgI05gyBAi6MF58uGcMOiOqSJ2ybEeCvHcq0BCmQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-arm64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-arm64-musl/-/resolver-binding-linux-arm64-musl-1.11.1.tgz",
      "integrity": "sha512-RyMIx6Uf53hhOtJDIamSbTskA99sPHS96wxVE/bJtePJJtpdKGXO1wY90oRdXuYOGOTuqjT8ACccMc4K6QmT3w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-ppc64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-ppc64-gnu/-/resolver-binding-linux-ppc64-gnu-1.11.1.tgz",
      "integrity": "sha512-D8Vae74A4/a+mZH0FbOkFJL9DSK2R6TFPC9M+jCWYia/q2einCubX10pecpDiTmkJVUH+y8K3BZClycD8nCShA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-gnu/-/resolver-binding-linux-riscv64-gnu-1.11.1.tgz",
      "integrity": "sha512-frxL4OrzOWVVsOc96+V3aqTIQl1O2TjgExV4EKgRY09AJ9leZpEg8Ak9phadbuX0BA4k8U5qtvMSQQGGmaJqcQ==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-riscv64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-riscv64-musl/-/resolver-binding-linux-riscv64-musl-1.11.1.tgz",
      "integrity": "sha512-mJ5vuDaIZ+l/acv01sHoXfpnyrNKOk/3aDoEdLO/Xtn9HuZlDD6jKxHlkN8ZhWyLJsRBxfv9GYM2utQ1SChKew==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-s390x-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-s390x-gnu/-/resolver-binding-linux-s390x-gnu-1.11.1.tgz",
      "integrity": "sha512-kELo8ebBVtb9sA7rMe1Cph4QHreByhaZ2QEADd9NzIQsYNQpt9UkM9iqr2lhGr5afh885d/cB5QeTXSbZHTYPg==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-gnu": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-gnu/-/resolver-binding-linux-x64-gnu-1.11.1.tgz",
      "integrity": "sha512-C3ZAHugKgovV5YvAMsxhq0gtXuwESUKc5MhEtjBpLoHPLYM+iuwSj3lflFwK3DPm68660rZ7G8BMcwSro7hD5w==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-linux-x64-musl": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-linux-x64-musl/-/resolver-binding-linux-x64-musl-1.11.1.tgz",
      "integrity": "sha512-rV0YSoyhK2nZ4vEswT/QwqzqQXw5I6CjoaYMOX0TqBlWhojUf8P94mvI7nuJTeaCkkds3QE4+zS8Ko+GdXuZtA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@unrs/resolver-binding-wasm32-wasi": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-wasm32-wasi/-/resolver-binding-wasm32-wasi-1.11.1.tgz",
      "integrity": "sha512-5u4RkfxJm+Ng7IWgkzi3qrFOvLvQYnPBmjmZQ8+szTK/b31fQCnleNl1GgEt7nIsZRIf5PLhPwT0WM+q45x/UQ==",
      "cpu": [
        "wasm32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "@napi-rs/wasm-runtime": "^0.2.11"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@unrs/resolver-binding-win32-arm64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-arm64-msvc/-/resolver-binding-win32-arm64-msvc-1.11.1.tgz",
      "integrity": "sha512-nRcz5Il4ln0kMhfL8S3hLkxI85BXs3o8EYoattsJNdsX4YUU89iOkVn7g0VHSRxFuVMdM4Q1jEpIId1Ihim/Uw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-ia32-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-ia32-msvc/-/resolver-binding-win32-ia32-msvc-1.11.1.tgz",
      "integrity": "sha512-DCEI6t5i1NmAZp6pFonpD5m7i6aFrpofcp4LA2i8IIq60Jyo28hamKBxNrZcyOwVOZkgsRp9O2sXWBWP8MnvIQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@unrs/resolver-binding-win32-x64-msvc": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/@unrs/resolver-binding-win32-x64-msvc/-/resolver-binding-win32-x64-msvc-1.11.1.tgz",
      "integrity": "sha512-lrW200hZdbfRtztbygyaq/6jP6AKE8qQN2KvPcJ+x7wiD038YtnYtZ82IMNJ69GJibV7bwL3y9FgK+5w/pYt6g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/aria-query": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/aria-query/-/aria-query-5.3.2.tgz",
      "integrity": "sha512-COROpnaoap1E2F000S62r6A60uHZnmlvomhfyT2DlTcrY1OrBKn2UhH7qn5wTC9zMvD0AY7csdPSNwKP+7WiQw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-includes": {
      "version": "3.1.9",
      "resolved": "https://registry.npmjs.org/array-includes/-/array-includes-3.1.9.tgz",
      "integrity": "sha512-FmeCCAenzH0KH381SPT5FZmiA/TmpndpcaShhfgEN9eCVjnFBqq3l1xrI42y8+PPLI6hypzou4GXw00WHmPBLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.24.0",
        "es-object-atoms": "^1.1.1",
        "get-intrinsic": "^1.3.0",
        "is-string": "^1.1.1",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.findlast": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/array.prototype.findlast/-/array.prototype.findlast-1.2.5.tgz",
      "integrity": "sha512-CVvd6FHg1Z3POpBLxO6E6zr+rSKEQ9L6rZHAaY7lLfhKsWYUBBOuMs0e9o24oopj6H+geRCX0YJ+TJLBK2eHyQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.findlastindex": {
      "version": "1.2.6",
      "resolved": "https://registry.npmjs.org/array.prototype.findlastindex/-/array.prototype.findlastindex-1.2.6.tgz",
      "integrity": "sha512-F/TKATkzseUExPlfvmwQKGITM3DGTK+vkAsCZoDc5daVygbJBnjEUCbgkAvVFsgfXfX4YIqZ/27G3k3tdXrTxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-shim-unscopables": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flat": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flat/-/array.prototype.flat-1.3.3.tgz",
      "integrity": "sha512-rwG/ja1neyLqCuGZ5YYrznA62D4mZXg0i1cIskIUKSiqF3Cje9/wXAls9B9s1Wa2fomMsIv8czB8jZcPmxCXFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.flatmap": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/array.prototype.flatmap/-/array.prototype.flatmap-1.3.3.tgz",
      "integrity": "sha512-Y7Wt51eKJSyi80hFrJCePGGNo5ktJCslFuboqJsbf57CCPcm5zztluPlc4/aD8sWsKvlwatezpV4U1efk8kpjg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array.prototype.tosorted": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/array.prototype.tosorted/-/array.prototype.tosorted-1.1.4.tgz",
      "integrity": "sha512-p6Fx8B7b7ZhL/gmUsAy0D15WhvDccw3mnGNbZpi3pmeJdxtWsj2jEaI4Y6oo3XiHfzuSgPwKc04MYt6KgvC/wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3",
        "es-errors": "^1.3.0",
        "es-shim-unscopables": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/arraybuffer.prototype.slice": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
      "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.1",
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "is-array-buffer": "^3.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/ast-types-flow": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/ast-types-flow/-/ast-types-flow-0.0.8.tgz",
      "integrity": "sha512-OH/2E5Fg20h2aPrbe+QL8JZQFko0YZaF+j4mnQ7BGhfavO7OpSLa8a0y9sBwomHdSbkhTS8TQNayBfnW5DwbvQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async-function": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
      "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/autoprefixer": {
      "version": "10.4.23",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.23.tgz",
      "integrity": "sha512-YYTXSFulfwytnjAPlw8QHncHJmlvFKtczb8InXaAx9Q0LbfDnfEYDE55omerIJKihhmU61Ft+cAOSzQVaBUmeA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.28.1",
        "caniuse-lite": "^1.0.30001760",
        "fraction.js": "^5.3.4",
        "picocolors": "^1.1.1",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/axe-core": {
      "version": "4.11.0",
      "resolved": "https://registry.npmjs.org/axe-core/-/axe-core-4.11.0.tgz",
      "integrity": "sha512-ilYanEU8vxxBexpJd8cWM4ElSQq4QctCLKih0TSfjIfCQTeyH/6zVrmIJfLPrKTKJRbiG+cfnZbQIjAlJmF1jQ==",
      "dev": true,
      "license": "MPL-2.0",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/axobject-query": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/axobject-query/-/axobject-query-4.1.0.tgz",
      "integrity": "sha512-qIj0G9wZbMGNLjLmg1PT6v2mE9AH2zlnADJD/2tC6E00hgmhUOfEB6greHPAfLRSufHqROIUTkw6E+M3lH0PTQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/babel-plugin-react-compiler": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/babel-plugin-react-compiler/-/babel-plugin-react-compiler-1.0.0.tgz",
      "integrity": "sha512-Ixm8tFfoKKIPYdCCKYTsqv+Fd4IJ0DQqMyEimo+pxUOMUR9cVPlwTrFt9Avu+3cb6Zp3mAzl+t1MrG2fxxKsxw==",
      "devOptional": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.26.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.9.7",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.9.7.tgz",
      "integrity": "sha512-k9xFKplee6KIio3IDbwj+uaCLpqzOwakOgmqzPezM0sFJlFKcg30vk2wOiAJtkTSfx0SSQDSe8q+mWA/fSH5Zg==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.28.1",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.28.1.tgz",
      "integrity": "sha512-ZC5Bd0LgJXgwGqUknZY/vkUQ04r8NXnJZ3yYi4vDmSiZmC/pdSN0NbNRPxZpbtO4uAfDUAFffO8IZoM3Gj8IkA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.9.0",
        "caniuse-lite": "^1.0.30001759",
        "electron-to-chromium": "^1.5.263",
        "node-releases": "^2.0.27",
        "update-browserslist-db": "^1.2.0"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001760",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001760.tgz",
      "integrity": "sha512-7AAMPcueWELt1p3mi13HR/LHH0TJLT11cnwDJEs3xA4+CK/PLKeO9Kl1oru24htkyUKtkGCvAx4ohB0Ttry8Dw==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/client-only": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/client-only/-/client-only-0.0.1.tgz",
      "integrity": "sha512-IV3Ou0jSMzZrd3pZ48nLkT9DA7Ag1pnPzaiQhpW7c3RbcqqzvzzVu+L8gfqMp/8IM2MQtSiqaCxrrcfu8I8rMA==",
      "license": "MIT"
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "3.2.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.2.3.tgz",
      "integrity": "sha512-z1HGKcYy2xA8AGQfwrn0PAy+PB7X/GSj3UVJW9qKyn43xWa+gl5nXmU4qqLMRzWVLFC8KusUX8T/0kCiOYpAIQ==",
      "license": "MIT"
    },
    "node_modules/damerau-levenshtein": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/damerau-levenshtein/-/damerau-levenshtein-1.0.8.tgz",
      "integrity": "sha512-sdQSFB7+llfUcQHUQO3+B8ERRj0Oa4w9POWMI/puGtuf7gFywGmkaLCElnudfTiKZV+NvHqL0ifzdrI8Ro7ESA==",
      "dev": true,
      "license": "BSD-2-Clause"
    },
    "node_modules/data-view-buffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
      "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/data-view-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
      "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/inspect-js"
      }
    },
    "node_modules/data-view-byte-offset": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
      "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/date-fns": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/date-fns/-/date-fns-4.1.0.tgz",
      "integrity": "sha512-Ukq0owbQXxa/U3EGtsdVBkR1w7KOQ5gIBqdH2hkvknzZPYvBxb/aa6E8L7tmjFtkwZBu3UXBbjIgPo/Ez4xaNg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/kossnocorp"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
      "license": "Apache-2.0",
      "optional": true,
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/doctrine": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-2.1.0.tgz",
      "integrity": "sha512-35mSku4ZXK0vfCuHEDAwt55dg2jNajHZ1odvF+8SSr82EsZY4QmXfuWso8oEd8zRhVObSN18aM0CjSdoBX7zIw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.267",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.267.tgz",
      "integrity": "sha512-0Drusm6MVRXSOJpGbaSVgcQsuB4hEkMpHXaVstcPmhu5LIedxs1xNK/nIxmQIU/RPC0+1/o0AVZfBTkTNJOdUw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/es-abstract": {
      "version": "1.24.1",
      "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.1.tgz",
      "integrity": "sha512-zHXBLhP+QehSSbsS9Pt23Gg964240DPd6QCf8WpkqEXxQ7fhdZzYsocOr5u7apWonsS5EjZDmTF+/slGMyasvw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.2",
        "arraybuffer.prototype.slice": "^1.0.4",
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "data-view-buffer": "^1.0.2",
        "data-view-byte-length": "^1.0.2",
        "data-view-byte-offset": "^1.0.1",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-set-tostringtag": "^2.1.0",
        "es-to-primitive": "^1.3.0",
        "function.prototype.name": "^1.1.8",
        "get-intrinsic": "^1.3.0",
        "get-proto": "^1.0.1",
        "get-symbol-description": "^1.1.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "internal-slot": "^1.1.0",
        "is-array-buffer": "^3.0.5",
        "is-callable": "^1.2.7",
        "is-data-view": "^1.0.2",
        "is-negative-zero": "^2.0.3",
        "is-regex": "^1.2.1",
        "is-set": "^2.0.3",
        "is-shared-array-buffer": "^1.0.4",
        "is-string": "^1.1.1",
        "is-typed-array": "^1.1.15",
        "is-weakref": "^1.1.1",
        "math-intrinsics": "^1.1.0",
        "object-inspect": "^1.13.4",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.7",
        "own-keys": "^1.0.1",
        "regexp.prototype.flags": "^1.5.4",
        "safe-array-concat": "^1.1.3",
        "safe-push-apply": "^1.0.0",
        "safe-regex-test": "^1.1.0",
        "set-proto": "^1.0.0",
        "stop-iteration-iterator": "^1.1.0",
        "string.prototype.trim": "^1.2.10",
        "string.prototype.trimend": "^1.0.9",
        "string.prototype.trimstart": "^1.0.8",
        "typed-array-buffer": "^1.0.3",
        "typed-array-byte-length": "^1.0.3",
        "typed-array-byte-offset": "^1.0.4",
        "typed-array-length": "^1.0.7",
        "unbox-primitive": "^1.1.0",
        "which-typed-array": "^1.1.19"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-iterator-helpers": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/es-iterator-helpers/-/es-iterator-helpers-1.2.2.tgz",
      "integrity": "sha512-BrUQ0cPTB/IwXj23HtwHjS9n7O4h9FX94b4xc5zlTHxeLgTAdzYUDyy6KdExAl9lbN5rtfe44xpjpmj9grxs5w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.24.1",
        "es-errors": "^1.3.0",
        "es-set-tostringtag": "^2.1.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.3.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "iterator.prototype": "^1.1.5",
        "safe-array-concat": "^1.1.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-shim-unscopables": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/es-shim-unscopables/-/es-shim-unscopables-1.1.0.tgz",
      "integrity": "sha512-d9T8ucsEhh8Bi1woXCf+TIKDIROLG5WCkxg8geBCbvk22kzwC5G2OnXVMO6FUsvQlgUUXQ2itephWDLqDzbeCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-to-primitive": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
      "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7",
        "is-date-object": "^1.0.5",
        "is-symbol": "^1.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.39.2",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.39.2.tgz",
      "integrity": "sha512-LEyamqS7W5HB3ujJyvi0HQK/dtVINZvd5mAAp9eT5S/ujByGjiZLCzPcHVzuXbpJDJF/cxwHlfceVUDZ2lnSTw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.2",
        "@eslint/core": "^0.17.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.39.2",
        "@eslint/plugin-kit": "^0.4.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-config-next": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/eslint-config-next/-/eslint-config-next-16.0.10.tgz",
      "integrity": "sha512-BxouZUm0I45K4yjOOIzj24nTi0H2cGo0y7xUmk+Po/PYtJXFBYVDS1BguE7t28efXjKdcN0tmiLivxQy//SsZg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@next/eslint-plugin-next": "16.0.10",
        "eslint-import-resolver-node": "^0.3.6",
        "eslint-import-resolver-typescript": "^3.5.2",
        "eslint-plugin-import": "^2.32.0",
        "eslint-plugin-jsx-a11y": "^6.10.0",
        "eslint-plugin-react": "^7.37.0",
        "eslint-plugin-react-hooks": "^7.0.0",
        "globals": "16.4.0",
        "typescript-eslint": "^8.46.0"
      },
      "peerDependencies": {
        "eslint": ">=9.0.0",
        "typescript": ">=3.3.1"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-config-next/node_modules/globals": {
      "version": "16.4.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.4.0.tgz",
      "integrity": "sha512-ob/2LcVVaVGCYN+r14cnwnoDPUufjiYgSqRhiFD0Q1iI4Odora5RE8Iv1D24hAz5oMophRGkGz+yuvQmmUMnMw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint-import-resolver-node": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-node/-/eslint-import-resolver-node-0.3.9.tgz",
      "integrity": "sha512-WFj2isz22JahUv+B788TlO3N6zL3nNJGU8CcZbPZvVEkBPaJdCV4vy5wyghty5ROFbCRnm132v8BScu5/1BQ8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7",
        "is-core-module": "^2.13.0",
        "resolve": "^1.22.4"
      }
    },
    "node_modules/eslint-import-resolver-node/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-import-resolver-typescript": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/eslint-import-resolver-typescript/-/eslint-import-resolver-typescript-3.10.1.tgz",
      "integrity": "sha512-A1rHYb06zjMGAxdLSkN2fXPBwuSaQ0iO5M/hdyS0Ajj1VBaRp0sPD3dn1FhME3c/JluGFbwSxyCfqdSbtQLAHQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@nolyfill/is-core-module": "1.0.39",
        "debug": "^4.4.0",
        "get-tsconfig": "^4.10.0",
        "is-bun-module": "^2.0.0",
        "stable-hash": "^0.0.5",
        "tinyglobby": "^0.2.13",
        "unrs-resolver": "^1.6.2"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint-import-resolver-typescript"
      },
      "peerDependencies": {
        "eslint": "*",
        "eslint-plugin-import": "*",
        "eslint-plugin-import-x": "*"
      },
      "peerDependenciesMeta": {
        "eslint-plugin-import": {
          "optional": true
        },
        "eslint-plugin-import-x": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils": {
      "version": "2.12.1",
      "resolved": "https://registry.npmjs.org/eslint-module-utils/-/eslint-module-utils-2.12.1.tgz",
      "integrity": "sha512-L8jSWTze7K2mTg0vos/RuLRS5soomksDPoJLXIslC7c8Wmut3bx7CPpJijDcBZtxQ5lrbUdM+s0OlNbz0DCDNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^3.2.7"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependenciesMeta": {
        "eslint": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-module-utils/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-import": {
      "version": "2.32.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-import/-/eslint-plugin-import-2.32.0.tgz",
      "integrity": "sha512-whOE1HFo/qJDyX4SnXzP4N6zOWn79WhnCUY/iDR0mPfQZO8wcYE4JClzI2oZrhBnnMUCBCHZhO6VQyoBU95mZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@rtsao/scc": "^1.1.0",
        "array-includes": "^3.1.9",
        "array.prototype.findlastindex": "^1.2.6",
        "array.prototype.flat": "^1.3.3",
        "array.prototype.flatmap": "^1.3.3",
        "debug": "^3.2.7",
        "doctrine": "^2.1.0",
        "eslint-import-resolver-node": "^0.3.9",
        "eslint-module-utils": "^2.12.1",
        "hasown": "^2.0.2",
        "is-core-module": "^2.16.1",
        "is-glob": "^4.0.3",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "object.groupby": "^1.0.3",
        "object.values": "^1.2.1",
        "semver": "^6.3.1",
        "string.prototype.trimend": "^1.0.9",
        "tsconfig-paths": "^3.15.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^2 || ^3 || ^4 || ^5 || ^6 || ^7.2.0 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-import/node_modules/debug": {
      "version": "3.2.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-3.2.7.tgz",
      "integrity": "sha512-CFjzYYAi4ThfiQvizrFQevTTXHtnCqWfe7x1AhgEscTz6ZbLbfoLRLPugTQyBth6f8ZERVUSyWHFD/7Wu4t1XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.1"
      }
    },
    "node_modules/eslint-plugin-jsx-a11y": {
      "version": "6.10.2",
      "resolved": "https://registry.npmjs.org/eslint-plugin-jsx-a11y/-/eslint-plugin-jsx-a11y-6.10.2.tgz",
      "integrity": "sha512-scB3nz4WmG75pV8+3eRUQOHZlNSUhFNq37xnpgRkCCELU3XMvXAxLk1eqWWyE22Ki4Q01Fnsw9BA3cJHDPgn2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "aria-query": "^5.3.2",
        "array-includes": "^3.1.8",
        "array.prototype.flatmap": "^1.3.2",
        "ast-types-flow": "^0.0.8",
        "axe-core": "^4.10.0",
        "axobject-query": "^4.1.0",
        "damerau-levenshtein": "^1.0.8",
        "emoji-regex": "^9.2.2",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^3.3.5",
        "language-tags": "^1.0.9",
        "minimatch": "^3.1.2",
        "object.fromentries": "^2.0.8",
        "safe-regex-test": "^1.0.3",
        "string.prototype.includes": "^2.0.1"
      },
      "engines": {
        "node": ">=4.0"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9"
      }
    },
    "node_modules/eslint-plugin-react": {
      "version": "7.37.5",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react/-/eslint-plugin-react-7.37.5.tgz",
      "integrity": "sha512-Qteup0SqU15kdocexFNAJMvCJEfa2xUKNV4CC1xsVMrIIqEy3SQ/rqyxCWNzfrd3/ldy6HMlD2e0JDVpDg2qIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.8",
        "array.prototype.findlast": "^1.2.5",
        "array.prototype.flatmap": "^1.3.3",
        "array.prototype.tosorted": "^1.1.4",
        "doctrine": "^2.1.0",
        "es-iterator-helpers": "^1.2.1",
        "estraverse": "^5.3.0",
        "hasown": "^2.0.2",
        "jsx-ast-utils": "^2.4.1 || ^3.0.0",
        "minimatch": "^3.1.2",
        "object.entries": "^1.1.9",
        "object.fromentries": "^2.0.8",
        "object.values": "^1.2.1",
        "prop-types": "^15.8.1",
        "resolve": "^2.0.0-next.5",
        "semver": "^6.3.1",
        "string.prototype.matchall": "^4.0.12",
        "string.prototype.repeat": "^1.0.0"
      },
      "engines": {
        "node": ">=4"
      },
      "peerDependencies": {
        "eslint": "^3 || ^4 || ^5 || ^6 || ^7 || ^8 || ^9.7"
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-7.0.1.tgz",
      "integrity": "sha512-O0d0m04evaNzEPoSW+59Mezf8Qt0InfgGIBJnpC0h3NH/WjUAR7BIKUfysC6todmtiZ/A0oUVS8Gce0WhBrHsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.24.4",
        "@babel/parser": "^7.24.4",
        "hermes-parser": "^0.25.1",
        "zod": "^3.25.0 || ^4.0.0",
        "zod-validation-error": "^3.5.0 || ^4.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react/node_modules/resolve": {
      "version": "2.0.0-next.5",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-2.0.0-next.5.tgz",
      "integrity": "sha512-U7WjGVG9sH8tvjW5SmGbQuui75FiyjAX72HX15DwBBwF9dNiQZRQAg9nnPhYy+TUnE0+VcrttuvNI8oSxZcocA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.13.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.1.tgz",
      "integrity": "sha512-kNFPyjhh5cKjrUltxs+wFx+ZkbRaxxmZ+X0ZU31SOsxCEtP9VPgtq2teZw1DebupL5GmDaNQ6yKMMVcM41iqDg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.4"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/faye-websocket": {
      "version": "0.11.4",
      "resolved": "https://registry.npmjs.org/faye-websocket/-/faye-websocket-0.11.4.tgz",
      "integrity": "sha512-CzbClwlXAuiRQAlUyfqPgvPoNKTckTPGfwZV4ZdAhVcP2lh9KUxJg2b5GkE7XbjKQ3YJnQ9z6D9ntLAlB+tP8g==",
      "license": "Apache-2.0",
      "dependencies": {
        "websocket-driver": ">=0.5.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/firebase": {
      "version": "12.7.0",
      "resolved": "https://registry.npmjs.org/firebase/-/firebase-12.7.0.tgz",
      "integrity": "sha512-ZBZg9jFo8uH4Emd7caOqtalKJfDGHnHQSrCPiqRAdTFQd0wL3ERilUBfhnhBLnlernugkN/o7nJa0p+sE71Izg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@firebase/ai": "2.6.1",
        "@firebase/analytics": "0.10.19",
        "@firebase/analytics-compat": "0.2.25",
        "@firebase/app": "0.14.6",
        "@firebase/app-check": "0.11.0",
        "@firebase/app-check-compat": "0.4.0",
        "@firebase/app-compat": "0.5.6",
        "@firebase/app-types": "0.9.3",
        "@firebase/auth": "1.12.0",
        "@firebase/auth-compat": "0.6.2",
        "@firebase/data-connect": "0.3.12",
        "@firebase/database": "1.1.0",
        "@firebase/database-compat": "2.1.0",
        "@firebase/firestore": "4.9.3",
        "@firebase/firestore-compat": "0.4.3",
        "@firebase/functions": "0.13.1",
        "@firebase/functions-compat": "0.4.1",
        "@firebase/installations": "0.6.19",
        "@firebase/installations-compat": "0.2.19",
        "@firebase/messaging": "0.12.23",
        "@firebase/messaging-compat": "0.2.23",
        "@firebase/performance": "0.7.9",
        "@firebase/performance-compat": "0.2.22",
        "@firebase/remote-config": "0.7.0",
        "@firebase/remote-config-compat": "0.2.20",
        "@firebase/storage": "0.14.0",
        "@firebase/storage-compat": "0.4.0",
        "@firebase/util": "1.13.0"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/fraction.js": {
      "version": "5.3.4",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-5.3.4.tgz",
      "integrity": "sha512-1X1NTtiJphryn/uLQz3whtY6jK3fTqoE3ohKs0tT+Ujr1W59oopxmoEh7Lu5p6vBaPbgoM0bzveAW4Qi5RyWDQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/framer-motion": {
      "version": "12.23.26",
      "resolved": "https://registry.npmjs.org/framer-motion/-/framer-motion-12.23.26.tgz",
      "integrity": "sha512-cPcIhgR42xBn1Uj+PzOyheMtZ73H927+uWPDVhUMqxy8UHt6Okavb6xIz9J/phFUHUj0OncR6UvMfJTXoc/LKA==",
      "license": "MIT",
      "dependencies": {
        "motion-dom": "^12.23.23",
        "motion-utils": "^12.23.6",
        "tslib": "^2.4.0"
      },
      "peerDependencies": {
        "@emotion/is-prop-valid": "*",
        "react": "^18.0.0 || ^19.0.0",
        "react-dom": "^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/is-prop-valid": {
          "optional": true
        },
        "react": {
          "optional": true
        },
        "react-dom": {
          "optional": true
        }
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/function.prototype.name": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
      "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "functions-have-names": "^1.2.3",
        "hasown": "^2.0.2",
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generator-function": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/generator-function/-/generator-function-2.0.1.tgz",
      "integrity": "sha512-SFdFmIJi+ybC0vjlHN0ZGVGHc3lgE0DxPAT0djjVg+kjOnSqclqmj0KQ7ykTOLP6YxoqOvuAODGdcHJn+43q3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-symbol-description": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
      "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.13.0",
      "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.13.0.tgz",
      "integrity": "sha512-1VKTZJCwBrvbd+Wn3AOgQP/2Av+TfTCOlE4AcRJE72W1ksZXbAx8PPBR9RzgTeSPzlPMHrbANMH3LbltH73wxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
      "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.2.1",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/goober": {
      "version": "2.1.18",
      "resolved": "https://registry.npmjs.org/goober/-/goober-2.1.18.tgz",
      "integrity": "sha512-2vFqsaDVIT9Gz7N6kAL++pLpp41l3PfDuusHcjnGLfR6+huZkl6ziX+zgVC3ZxpqWhzH6pyDdGrCeDhMIvwaxw==",
      "license": "MIT",
      "peerDependencies": {
        "csstype": "^3.0.10"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
      "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hermes-estree": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-estree/-/hermes-estree-0.25.1.tgz",
      "integrity": "sha512-0wUoCcLp+5Ev5pDW2OriHC2MJCbwLwuRx+gAqMTOkGKJJiBCLjtrvy4PWUGn6MIVefecRpzoOZ/UV6iGdOr+Cw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/hermes-parser": {
      "version": "0.25.1",
      "resolved": "https://registry.npmjs.org/hermes-parser/-/hermes-parser-0.25.1.tgz",
      "integrity": "sha512-6pEjquH3rqaI6cYAXYPcz9MS4rY6R4ngRgrgfDshRptUZIc3lw0MCIJIGDj9++mfySOuPTHB4nrSW99BCvOPIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hermes-estree": "0.25.1"
      }
    },
    "node_modules/http-parser-js": {
      "version": "0.5.10",
      "resolved": "https://registry.npmjs.org/http-parser-js/-/http-parser-js-0.5.10.tgz",
      "integrity": "sha512-Pysuw9XpUq5dVc/2SMHpuTY01RFl8fttgcyunjL7eEMhGM3cI4eOmiCycJDVCo/7O7ClfQD3SaI6ftDzqOXYMA==",
      "license": "MIT"
    },
    "node_modules/idb": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/idb/-/idb-7.1.1.tgz",
      "integrity": "sha512-gchesWBzyvGHRO9W8tzUWFDycow5gwjvFKfyV9FF32Y7F50yZMp7mP+T2mJIWFx49zicqyC4uefHM17o6xKIVQ==",
      "license": "ISC"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-async-function": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
      "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "async-function": "^1.0.0",
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bun-module": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/is-bun-module/-/is-bun-module-2.0.0.tgz",
      "integrity": "sha512-gNCGbnnnnFAUGKeZ9PdbyeGYJqewpmc2aKHUEMO5nQPWU9lOmv7jcmQIv+qHD8fXW6W7qfuCwX4rY9LNRjXrkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.7.1"
      }
    },
    "node_modules/is-bun-module/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-data-view": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
      "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "is-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-finalizationregistry": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
      "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-generator-function": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.2.tgz",
      "integrity": "sha512-upqt1SkGkODW9tsGNG5mtXTXtECizwtS2kA161M+gJPc1xdb/Ax629af6YrTwcOeQHbewrPNlE5Dx7kzvXTizA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.4",
        "generator-function": "^2.0.0",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-negative-zero": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
      "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-typed-array": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
      "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
      "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/iterator.prototype": {
      "version": "1.1.5",
      "resolved": "https://registry.npmjs.org/iterator.prototype/-/iterator.prototype-1.1.5.tgz",
      "integrity": "sha512-H0dkQoCa3b2VEeKQBOxFph+JAbcrQdE7KC0UkqwpLmv2EC4P41QXP+rqo9wYodACiG5/WM5s9oDApTU8utwj9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "get-proto": "^1.0.0",
        "has-symbols": "^1.1.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/jiti": {
      "version": "2.6.1",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-2.6.1.tgz",
      "integrity": "sha512-ekilCSN1jwRvIbgeg/57YFh8qQDNbwDb9xT/qu2DAHbFFZUicIl4ygVaAvzveMhMVr3LnpSKTNnwt8PoOfmKhQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "peer": true,
      "bin": {
        "jiti": "lib/jiti-cli.mjs"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.1.tgz",
      "integrity": "sha512-qQKT4zQxXl8lLwBtHMWwaTcGfFOZviOJet3Oy/xmGk2gZH677CJM9EvtfdSkgWcATZhj/55JZ0rmy3myCT5lsA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsx-ast-utils": {
      "version": "3.3.5",
      "resolved": "https://registry.npmjs.org/jsx-ast-utils/-/jsx-ast-utils-3.3.5.tgz",
      "integrity": "sha512-ZZow9HBI5O6EPgSJLUb8n2NKgmVWTwCvHGwFuJlMjvLFqlGG6pjirPhtdsseaLZjSibD8eegzmYpUZwoIlj2cQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-includes": "^3.1.6",
        "array.prototype.flat": "^1.3.1",
        "object.assign": "^4.1.4",
        "object.values": "^1.1.6"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/language-subtag-registry": {
      "version": "0.3.23",
      "resolved": "https://registry.npmjs.org/language-subtag-registry/-/language-subtag-registry-0.3.23.tgz",
      "integrity": "sha512-0K65Lea881pHotoGEa5gDlMxt3pctLi2RplBb7Ezh4rRdLEOtgi7n4EwK9lamnUCkKBqaeKRVebTq6BAxSkpXQ==",
      "dev": true,
      "license": "CC0-1.0"
    },
    "node_modules/language-tags": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/language-tags/-/language-tags-1.0.9.tgz",
      "integrity": "sha512-MbjN408fEndfiQXbFQ1vnd+1NoLDsnQW41410oQBXiyXDMYH5z505juWa4KUE1LqxRC7DgOgZDbKLxHIwm27hA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "language-subtag-registry": "^0.3.20"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.camelcase": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
      "integrity": "sha512-TwuEnCnxbc3rAvhf/LbG7tJUDzhqXyFnv3dtzLOPgCG/hODL7WFnsbwktkD7yUV0RrreP/l1PALq/YSg6VvjlA==",
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lucide-react": {
      "version": "0.561.0",
      "resolved": "https://registry.npmjs.org/lucide-react/-/lucide-react-0.561.0.tgz",
      "integrity": "sha512-Y59gMY38tl4/i0qewcqohPdEbieBy7SovpBL9IFebhc2mDd8x4PZSOsiFRkpPcOq6bj1r/mjH/Rk73gSlIJP2A==",
      "license": "ISC",
      "peerDependencies": {
        "react": "^16.5.1 || ^17.0.0 || ^18.0.0 || ^19.0.0"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/motion-dom": {
      "version": "12.23.23",
      "resolved": "https://registry.npmjs.org/motion-dom/-/motion-dom-12.23.23.tgz",
      "integrity": "sha512-n5yolOs0TQQBRUFImrRfs/+6X4p3Q4n1dUEqt/H58Vx7OW6RF+foWEgmTVDhIWJIMXOuNNL0apKH2S16en9eiA==",
      "license": "MIT",
      "dependencies": {
        "motion-utils": "^12.23.6"
      }
    },
    "node_modules/motion-utils": {
      "version": "12.23.6",
      "resolved": "https://registry.npmjs.org/motion-utils/-/motion-utils-12.23.6.tgz",
      "integrity": "sha512-eAWoPgr4eFEOFfg2WjIsMoqJTW6Z8MTUCgn/GZ3VRpClWBdnbjryiA3ZSNLyxCTmCQx4RmYX6jX1iWHbenUPNQ==",
      "license": "MIT"
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/napi-postinstall": {
      "version": "0.3.4",
      "resolved": "https://registry.npmjs.org/napi-postinstall/-/napi-postinstall-0.3.4.tgz",
      "integrity": "sha512-PHI5f1O0EP5xJ9gQmFGMS6IZcrVvTjpXjz7Na41gTE7eE2hK11lg04CECCYEEjdc17EV4DO+fkGEtt7TpTaTiQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "napi-postinstall": "lib/cli.js"
      },
      "engines": {
        "node": "^12.20.0 || ^14.18.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/napi-postinstall"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/next": {
      "version": "16.0.10",
      "resolved": "https://registry.npmjs.org/next/-/next-16.0.10.tgz",
      "integrity": "sha512-RtWh5PUgI+vxlV3HdR+IfWA1UUHu0+Ram/JBO4vWB54cVPentCD0e+lxyAYEsDTqGGMg7qpjhKh6dc6aW7W/sA==",
      "license": "MIT",
      "dependencies": {
        "@next/env": "16.0.10",
        "@swc/helpers": "0.5.15",
        "caniuse-lite": "^1.0.30001579",
        "postcss": "8.4.31",
        "styled-jsx": "5.1.6"
      },
      "bin": {
        "next": "dist/bin/next"
      },
      "engines": {
        "node": ">=20.9.0"
      },
      "optionalDependencies": {
        "@next/swc-darwin-arm64": "16.0.10",
        "@next/swc-darwin-x64": "16.0.10",
        "@next/swc-linux-arm64-gnu": "16.0.10",
        "@next/swc-linux-arm64-musl": "16.0.10",
        "@next/swc-linux-x64-gnu": "16.0.10",
        "@next/swc-linux-x64-musl": "16.0.10",
        "@next/swc-win32-arm64-msvc": "16.0.10",
        "@next/swc-win32-x64-msvc": "16.0.10",
        "sharp": "^0.34.4"
      },
      "peerDependencies": {
        "@opentelemetry/api": "^1.1.0",
        "@playwright/test": "^1.51.1",
        "babel-plugin-react-compiler": "*",
        "react": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "react-dom": "^18.2.0 || 19.0.0-rc-de68d2f4-20241204 || ^19.0.0",
        "sass": "^1.3.0"
      },
      "peerDependenciesMeta": {
        "@opentelemetry/api": {
          "optional": true
        },
        "@playwright/test": {
          "optional": true
        },
        "babel-plugin-react-compiler": {
          "optional": true
        },
        "sass": {
          "optional": true
        }
      }
    },
    "node_modules/next/node_modules/postcss": {
      "version": "8.4.31",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.4.31.tgz",
      "integrity": "sha512-PS08Iboia9mts/2ygV3eLpY5ghnUcfLV/EXTOW1E2qYxJKGGBUtNjN76FYHnMs36RmARn41bC0AZmn+rR0OVpQ==",
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.6",
        "picocolors": "^1.0.0",
        "source-map-js": "^1.0.2"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.27",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.27.tgz",
      "integrity": "sha512-nmh3lCkYZ3grZvqcCH+fjmQ7X+H0OeZgP40OierEaAptX4XofMh5kwNbWh7lBduUzCcV/8kZ+NDLCwm2iorIlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.entries": {
      "version": "1.1.9",
      "resolved": "https://registry.npmjs.org/object.entries/-/object.entries-1.1.9.tgz",
      "integrity": "sha512-8u/hfXFRBD1O0hPUjioLhoWFHRmt6tKA4/vZPyckBr18l1KE9uHrFaFaUi8MDRTpi4uak2goyPTSNJLXX2k2Hw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.fromentries": {
      "version": "2.0.8",
      "resolved": "https://registry.npmjs.org/object.fromentries/-/object.fromentries-2.0.8.tgz",
      "integrity": "sha512-k6E21FzySsSK5a21KRADBd/NGneRegFO5pLHfdQLpRDETUNJueLXs3WCzyQ3tFRDYgbq3KHGXfTbi2bs8WQ6rQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object.groupby": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/object.groupby/-/object.groupby-1.0.3.tgz",
      "integrity": "sha512-+Lhy3TQTuzXI5hevh8sBGqbmurHbbIjAi0Z4S63nthVLmLxfbj4T54a4CfZrXIrt9iP4mVAPYMo/v99taj3wjQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.values": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/object.values/-/object.values-1.2.1.tgz",
      "integrity": "sha512-gXah6aZrcUxjWg2zR2MwouP2eHlCBzdV4pygudehaKXSGW4v2AsRQUK+lwwXhii6KFZcunEnmSUoYp5CXibxtA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/own-keys": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
      "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.6",
        "object-keys": "^1.1.1",
        "safe-push-apply": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prop-types": {
      "version": "15.8.1",
      "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
      "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.4.0",
        "object-assign": "^4.1.1",
        "react-is": "^16.13.1"
      }
    },
    "node_modules/protobufjs": {
      "version": "7.5.4",
      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.4.tgz",
      "integrity": "sha512-CvexbZtbov6jW2eXAvLukXjXUW1TzFaivC46BpWc/3BpcCysb5Vffu+B3XHMm8lVEuy2Mm4XGex8hBSg1yapPg==",
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.2",
        "@protobufjs/base64": "^1.1.2",
        "@protobufjs/codegen": "^2.0.4",
        "@protobufjs/eventemitter": "^1.1.0",
        "@protobufjs/fetch": "^1.1.0",
        "@protobufjs/float": "^1.0.2",
        "@protobufjs/inquire": "^1.1.0",
        "@protobufjs/path": "^1.1.2",
        "@protobufjs/pool": "^1.1.0",
        "@protobufjs/utf8": "^1.1.0",
        "@types/node": ">=13.7.0",
        "long": "^5.0.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "19.2.1",
      "resolved": "https://registry.npmjs.org/react/-/react-19.2.1.tgz",
      "integrity": "sha512-DGrYcCWK7tvYMnWh79yrPHt+vdx9tY+1gPZa7nJQtO/p8bLTDaHp4dzwEhQB7pZ4Xe3ok4XKuEPrVuc+wlpkmw==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.2.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.2.1.tgz",
      "integrity": "sha512-ibrK8llX2a4eOskq1mXKu/TGZj9qzomO+sNfO98M6d9zIPOEhlBkMkBUBLd1vgS0gQsLDBzA+8jJBVXDnfHmJg==",
      "license": "MIT",
      "dependencies": {
        "scheduler": "^0.27.0"
      },
      "peerDependencies": {
        "react": "^19.2.1"
      }
    },
    "node_modules/react-hot-toast": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/react-hot-toast/-/react-hot-toast-2.6.0.tgz",
      "integrity": "sha512-bH+2EBMZ4sdyou/DPrfgIouFpcRLCJ+HoCA32UoAYHn6T3Ur5yfcDCeSr5mwldl6pFOsiocmrXMuoCJ1vV8bWg==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.1.3",
        "goober": "^2.1.16"
      },
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "react": ">=16",
        "react-dom": ">=16"
      }
    },
    "node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/reflect.getprototypeof": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
      "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.7",
        "get-proto": "^1.0.1",
        "which-builtin-type": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.11",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.11.tgz",
      "integrity": "sha512-RfqAvLnMl313r7c9oclB1HhUEAezcpLjz95wFH4LVuhk9JF/r22qmVP9AMmOU4vMX7Q8pN8jwNg/CSpdFnMjTQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.1",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
      "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-array-concat": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
      "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "has-symbols": "^1.1.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">=0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safe-push-apply": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
      "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/scheduler": {
      "version": "0.27.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.27.0.tgz",
      "integrity": "sha512-eNv+WrVbKu1f3vbYJT/xtiF5syA5HPIMtf9IgY/nKg0sWqzAUEvqY/xm7OcZc/qafLx/iO9FgOmeSAp4v5ti/Q==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-proto": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
      "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/sharp": {
      "version": "0.34.5",
      "resolved": "https://registry.npmjs.org/sharp/-/sharp-0.34.5.tgz",
      "integrity": "sha512-Ou9I5Ft9WNcCbXrU9cMgPBcCK8LiwLqcbywW3t4oDV37n1pzpuNLsYiAV8eODnjbtQlSDwZ2cUEeQz4E54Hltg==",
      "hasInstallScript": true,
      "license": "Apache-2.0",
      "optional": true,
      "dependencies": {
        "@img/colour": "^1.0.0",
        "detect-libc": "^2.1.2",
        "semver": "^7.7.3"
      },
      "engines": {
        "node": "^18.17.0 || ^20.3.0 || >=21.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/libvips"
      },
      "optionalDependencies": {
        "@img/sharp-darwin-arm64": "0.34.5",
        "@img/sharp-darwin-x64": "0.34.5",
        "@img/sharp-libvips-darwin-arm64": "1.2.4",
        "@img/sharp-libvips-darwin-x64": "1.2.4",
        "@img/sharp-libvips-linux-arm": "1.2.4",
        "@img/sharp-libvips-linux-arm64": "1.2.4",
        "@img/sharp-libvips-linux-ppc64": "1.2.4",
        "@img/sharp-libvips-linux-riscv64": "1.2.4",
        "@img/sharp-libvips-linux-s390x": "1.2.4",
        "@img/sharp-libvips-linux-x64": "1.2.4",
        "@img/sharp-libvips-linuxmusl-arm64": "1.2.4",
        "@img/sharp-libvips-linuxmusl-x64": "1.2.4",
        "@img/sharp-linux-arm": "0.34.5",
        "@img/sharp-linux-arm64": "0.34.5",
        "@img/sharp-linux-ppc64": "0.34.5",
        "@img/sharp-linux-riscv64": "0.34.5",
        "@img/sharp-linux-s390x": "0.34.5",
        "@img/sharp-linux-x64": "0.34.5",
        "@img/sharp-linuxmusl-arm64": "0.34.5",
        "@img/sharp-linuxmusl-x64": "0.34.5",
        "@img/sharp-wasm32": "0.34.5",
        "@img/sharp-win32-arm64": "0.34.5",
        "@img/sharp-win32-ia32": "0.34.5",
        "@img/sharp-win32-x64": "0.34.5"
      }
    },
    "node_modules/sharp/node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "license": "ISC",
      "optional": true,
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/stable-hash": {
      "version": "0.0.5",
      "resolved": "https://registry.npmjs.org/stable-hash/-/stable-hash-0.0.5.tgz",
      "integrity": "sha512-+L3ccpzibovGXFK+Ap/f8LOS0ahMrHTf3xu7mMLSpEGU0EO9ucaysSylKo9eRDFNhWve/y275iPmIZ4z39a9iA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "license": "MIT"
    },
    "node_modules/string.prototype.includes": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/string.prototype.includes/-/string.prototype.includes-2.0.1.tgz",
      "integrity": "sha512-o7+c9bW6zpAdJHTtujeePODAhkuicdAryFsfVKwA+wGw89wJ4GTY484WTucM9hLtDEOpOvI+aHnzqnC5lHp4Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.3"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/string.prototype.matchall": {
      "version": "4.0.12",
      "resolved": "https://registry.npmjs.org/string.prototype.matchall/-/string.prototype.matchall-4.0.12.tgz",
      "integrity": "sha512-6CC9uyBL+/48dYizRf7H7VAYCMCNTBeM78x/VTUe9bFEaxBepPJDa1Ow99LqI/1yF7kuy7Q3cQsYMrcjGUcskA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.6",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.6",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "internal-slot": "^1.1.0",
        "regexp.prototype.flags": "^1.5.3",
        "set-function-name": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.repeat": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/string.prototype.repeat/-/string.prototype.repeat-1.0.0.tgz",
      "integrity": "sha512-0u/TldDbKD8bFCQ/4f5+mNRrXwZ8hg2w7ZR8wa16e8z9XpePWl3eGEcUD0OXpEH/VJH/2G3gjUtR3ZOiBe2S/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.1.3",
        "es-abstract": "^1.17.5"
      }
    },
    "node_modules/string.prototype.trim": {
      "version": "1.2.10",
      "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
      "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-object-atoms": "^1.0.0",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimend": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
      "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimstart": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
      "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/styled-jsx": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/styled-jsx/-/styled-jsx-5.1.6.tgz",
      "integrity": "sha512-qSVyDTeMotdvQYoHWLNGwRFJHC+i+ZvdBRYosOFgC+Wg1vx4frN2/RG/NA7SYqqvKNLf39P2LSRA2pu6n0XYZA==",
      "license": "MIT",
      "dependencies": {
        "client-only": "0.0.1"
      },
      "engines": {
        "node": ">= 12.0.0"
      },
      "peerDependencies": {
        "react": ">= 16.8.0 || 17.x.x || ^18.0.0-0 || ^19.0.0-0"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/sucrase": {
      "version": "3.35.1",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.1.tgz",
      "integrity": "sha512-DhuTmvZWux4H1UOnWMB3sk0sbaCVOoQZjv8u1rDoTV0HTdGem9hkAZtl4JZy8P2z4Bg0nT+YMeOFyVr4zcG5Tw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "tinyglobby": "^0.2.11",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tailwind-merge": {
      "version": "3.4.0",
      "resolved": "https://registry.npmjs.org/tailwind-merge/-/tailwind-merge-3.4.0.tgz",
      "integrity": "sha512-uSaO4gnW+b3Y2aWoWfFpX62vn2sR3skfhbjsEnaBI81WD1wBLlHZe5sWf0AqjksNdYTbGBEd0UasQMT3SNV15g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/dcastil"
      }
    },
    "node_modules/tailwindcss": {
      "version": "3.4.17",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.17.tgz",
      "integrity": "sha512-w33E2aCvSDP0tW9RZuNXadXlkHXqFzSkQew/aIa2i/Sj8fThxwovwlXHSPXTbAHwEIhBFXAedUhP2tueAKP8Og==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.6.0",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.2",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.6",
        "lilconfig": "^3.1.3",
        "micromatch": "^4.0.8",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.1.1",
        "postcss": "^8.4.47",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.2",
        "postcss-nested": "^6.2.0",
        "postcss-selector-parser": "^6.1.2",
        "resolve": "^1.22.8",
        "sucrase": "^3.35.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tailwindcss/node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/tailwindcss/node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/tailwindcss/node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/tailwindcss/node_modules/postcss-load-config": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-4.0.2.tgz",
      "integrity": "sha512-bSVhyJGL00wMVoPUzAVAnbEoWyqRxkjv64tUl427SKnPrENtq6hJwUojroMz2VB+Q1edmi4IfrAPpami5VVgMQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.0.0",
        "yaml": "^2.3.4"
      },
      "engines": {
        "node": ">= 14"
      },
      "peerDependencies": {
        "postcss": ">=8.0.9",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "postcss": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/tsconfig-paths": {
      "version": "3.15.0",
      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-3.15.0.tgz",
      "integrity": "sha512-2Ac2RgzDe/cn48GvOe3M+o82pEFewD3UPbyoUHHdKasHwJKjds4fLXWf/Ux5kATBKN20oaFGu+jbElp1pos0mg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/json5": "^0.0.29",
        "json5": "^1.0.2",
        "minimist": "^1.2.6",
        "strip-bom": "^3.0.0"
      }
    },
    "node_modules/tsconfig-paths/node_modules/json5": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/json5/-/json5-1.0.2.tgz",
      "integrity": "sha512-g1MWMLBiz8FKi1e4w0UyVL3w+iJceWAFBAaBnnGKOpNa5f8TLktkbre1+s6oICydWAm+HRUGTmI+//xv2hvXYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.0"
      },
      "bin": {
        "json5": "lib/cli.js"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/typed-array-buffer": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
      "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/typed-array-byte-length": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
      "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-byte-offset": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
      "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.15",
        "reflect.getprototypeof": "^1.0.9"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-length": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
      "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "for-each": "^0.3.3",
        "gopd": "^1.0.1",
        "is-typed-array": "^1.1.13",
        "possible-typed-array-names": "^1.0.0",
        "reflect.getprototypeof": "^1.0.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.3.tgz",
      "integrity": "sha512-jl1vZzPDinLr9eUt3J/t7V6FgNEw9QjvBPdysz9KfQDD41fQrC2Y4vKQdiaUpFT4bXlb1RHhLpp8wtm6M5TgSw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/typescript-eslint": {
      "version": "8.50.0",
      "resolved": "https://registry.npmjs.org/typescript-eslint/-/typescript-eslint-8.50.0.tgz",
      "integrity": "sha512-Q1/6yNUmCpH94fbgMUMg2/BSAr/6U7GBk61kZTv1/asghQOWOjTlp9K8mixS5NcJmm2creY+UFfGeW/+OcA64A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/eslint-plugin": "8.50.0",
        "@typescript-eslint/parser": "8.50.0",
        "@typescript-eslint/typescript-estree": "8.50.0",
        "@typescript-eslint/utils": "8.50.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/unbox-primitive": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
      "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-bigints": "^1.0.2",
        "has-symbols": "^1.1.0",
        "which-boxed-primitive": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unrs-resolver": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/unrs-resolver/-/unrs-resolver-1.11.1.tgz",
      "integrity": "sha512-bSjt9pjaEBnNiGgc9rUiHGKv5l4/TGzDmYw3RhnkJGtLhbnnA/5qJj7x3dNDCRx/PJxu774LlH8lCOlB4hEfKg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "dependencies": {
        "napi-postinstall": "^0.3.0"
      },
      "funding": {
        "url": "https://opencollective.com/unrs-resolver"
      },
      "optionalDependencies": {
        "@unrs/resolver-binding-android-arm-eabi": "1.11.1",
        "@unrs/resolver-binding-android-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-arm64": "1.11.1",
        "@unrs/resolver-binding-darwin-x64": "1.11.1",
        "@unrs/resolver-binding-freebsd-x64": "1.11.1",
        "@unrs/resolver-binding-linux-arm-gnueabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm-musleabihf": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-arm64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-ppc64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-riscv64-musl": "1.11.1",
        "@unrs/resolver-binding-linux-s390x-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-gnu": "1.11.1",
        "@unrs/resolver-binding-linux-x64-musl": "1.11.1",
        "@unrs/resolver-binding-wasm32-wasi": "1.11.1",
        "@unrs/resolver-binding-win32-arm64-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-ia32-msvc": "1.11.1",
        "@unrs/resolver-binding-win32-x64-msvc": "1.11.1"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.2.2.tgz",
      "integrity": "sha512-E85pfNzMQ9jpKkA7+TJAi4TJN+tBCuWh5rUcS/sv6cFi+1q9LYDwDI5dpUL0u/73EElyQ8d3TEaeW4sPedBqYA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/web-vitals": {
      "version": "4.2.4",
      "resolved": "https://registry.npmjs.org/web-vitals/-/web-vitals-4.2.4.tgz",
      "integrity": "sha512-r4DIlprAGwJ7YM11VZp4R884m0Vmgr6EAKe3P+kO0PPj3Unqyvv59rczf6UiGcb9Z8QxZVcqKNwv/g0WNdWwsw==",
      "license": "Apache-2.0"
    },
    "node_modules/websocket-driver": {
      "version": "0.7.4",
      "resolved": "https://registry.npmjs.org/websocket-driver/-/websocket-driver-0.7.4.tgz",
      "integrity": "sha512-b17KeDIQVjvb0ssuSDF2cYXSg2iztliJ4B9WdsuB6J952qCPKmnVq4DyW5motImXHDC1cBT/1UezrJVsKw5zjg==",
      "license": "Apache-2.0",
      "dependencies": {
        "http-parser-js": ">=0.5.1",
        "safe-buffer": ">=5.1.0",
        "websocket-extensions": ">=0.1.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/websocket-extensions": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/websocket-extensions/-/websocket-extensions-0.1.4.tgz",
      "integrity": "sha512-OqedPIGOfsDlo31UNwYbCFMSaO9m9G/0faIHj5/dZFDMFqPTcx6UwqyOy3COEaEOg/9VsGIpdqn62W5KhoKSpg==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
      "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "function.prototype.name": "^1.1.6",
        "has-tostringtag": "^1.0.2",
        "is-async-function": "^2.0.0",
        "is-date-object": "^1.1.0",
        "is-finalizationregistry": "^1.1.0",
        "is-generator-function": "^1.0.10",
        "is-regex": "^1.2.1",
        "is-weakref": "^1.0.2",
        "isarray": "^2.0.5",
        "which-boxed-primitive": "^1.1.0",
        "which-collection": "^1.0.2",
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.2",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.2.tgz",
      "integrity": "sha512-mplynKqc1C2hTVYxd0PU2xQAc22TI1vShAYGksCCfxbn/dFwnHTNi1bvYsBTkhdUNtGIf5xNOg938rrSSYvS9A==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/eemeli"
      }
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.2.1.tgz",
      "integrity": "sha512-0wZ1IRqGGhMP76gLqz8EyfBXKk0J2qo2+H3fi4mcUP/KtTocoX08nmIAHl1Z2kJIZbZee8KOpBCSNPRgauucjw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    },
    "node_modules/zod-validation-error": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/zod-validation-error/-/zod-validation-error-4.0.2.tgz",
      "integrity": "sha512-Q6/nZLe6jxuU80qb/4uJ4t5v2VEZ44lzQjPDhYJNztRQ4wyWc6VF3D3Kb/fAuPetZQnhS3hnajCf9CsWesghLQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "zod": "^3.25.0 || ^4.0.0"
      }
    },
    "node_modules/zustand": {
      "version": "5.0.9",
      "resolved": "https://registry.npmjs.org/zustand/-/zustand-5.0.9.tgz",
      "integrity": "sha512-ALBtUj0AfjJt3uNRQoL1tL2tMvj6Gp/6e39dnfT6uzpelGru8v1tPOGBzayOWbPJvujM8JojDk3E1LxeFisBNg==",
      "license": "MIT",
      "engines": {
        "node": ">=12.20.0"
      },
      "peerDependencies": {
        "@types/react": ">=18.0.0",
        "immer": ">=9.0.6",
        "react": ">=18.0.0",
        "use-sync-external-store": ">=1.2.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        },
        "immer": {
          "optional": true
        },
        "react": {
          "optional": true
        },
        "use-sync-external-store": {
          "optional": true
        }
      }
    }
  }
}

--- FILE: ./package.json ---
{
  "name": "trainingbook",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "eslint"
  },
  "dependencies": {
    "clsx": "^2.1.1",
    "date-fns": "^4.1.0",
    "firebase": "^12.7.0",
    "framer-motion": "^12.23.26",
    "lucide-react": "^0.561.0",
    "next": "16.0.10",
    "react": "19.2.1",
    "react-dom": "19.2.1",
    "react-hot-toast": "^2.6.0",
    "tailwind-merge": "^3.4.0",
    "zustand": "^5.0.9"
  },
  "devDependencies": {
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "autoprefixer": "^10.4.23",
    "babel-plugin-react-compiler": "1.0.0",
    "eslint": "^9",
    "eslint-config-next": "16.0.10",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.17",
    "typescript": "^5"
  }
}

--- FILE: ./lib/firebase.ts ---
import { initializeApp, getApps, getApp } from "firebase/app";
import { getFirestore } from "firebase/firestore";
import { getStorage } from "firebase/storage";
import { getAuth } from "firebase/auth";

// --- CONFIG 1: Trainingbook (Primary Project) ---
// This project stores your Events, Storage Overrides, and Local Images
const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,
};

// --- CONFIG 2: CARES Path (Secondary Project) ---
// This project is the source for your Team Roster and Personnel data
const caresPathConfig = {
  apiKey: process.env.NEXT_PUBLIC_CARES_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_CARES_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_CARES_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_CARES_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_CARES_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_CARES_APP_ID,
};

// 1. Initialize Primary App (Default)
// We check getApps() to prevent initialization errors during Next.js hot-reloading
const app = getApps().length > 0 ? getApp() : initializeApp(firebaseConfig);

// Primary Project Instances
const db = getFirestore(app);
const storage = getStorage(app);
const auth = getAuth(app);

// 2. Initialize Secondary App (Named: "caresPath")
const caresApp = getApps().find(a => a.name === "caresPath") 
  ? getApp("caresPath") 
  : initializeApp(caresPathConfig, "caresPath");

// Secondary Project Instances
const caresDb = getFirestore(caresApp);
const caresStorage = getStorage(caresApp); // Available if you ever need to write back to CARES

// 3. Export all instances for use in components and stores
export { 
  app, 
  db, 
  storage, 
  auth, 
  caresApp, 
  caresDb, 
  caresStorage 
};
--- FILE: ./lib/utils.ts ---
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
--- FILE: ./lib/icon-library.ts ---
import * as LucideIcons from "lucide-react";

export interface TacticalIcon {
    id: string;
    icon: any;
    category: "Operational" | "Hospitality" | "BOH" | "Achievement" | "Creative";
}

export const TACTICAL_ICONS: TacticalIcon[] = [
    // --- ACHIEVEMENT ---
    { id: "Trophy", icon: LucideIcons.Trophy, category: "Achievement" },
    { id: "Crown", icon: LucideIcons.Crown, category: "Achievement" },
    { id: "Medal", icon: LucideIcons.Medal, category: "Achievement" },
    { id: "Award", icon: LucideIcons.Award, category: "Achievement" },
    { id: "Star", icon: LucideIcons.Star, category: "Achievement" },
    { id: "Gem", icon: LucideIcons.Gem, category: "Achievement" },
    { id: "Sparkles", icon: LucideIcons.Sparkles, category: "Achievement" },
    { id: "CheckCircle", icon: LucideIcons.CheckCircle2, category: "Achievement" },

    // --- HOSPITALITY & FOH ---
    { id: "Heart", icon: LucideIcons.Heart, category: "Hospitality" },
    { id: "Smile", icon: LucideIcons.Smile, category: "Hospitality" },
    { id: "Coffee", icon: LucideIcons.Coffee, category: "Hospitality" },
    { id: "Sun", icon: LucideIcons.Sun, category: "Hospitality" },
    { id: "Glass", icon: LucideIcons.GlassWater, category: "Hospitality" },
    { id: "Utensils", icon: LucideIcons.Utensils, category: "Hospitality" },
    { id: "Pizza", icon: LucideIcons.Pizza, category: "Hospitality" },
    { id: "IceCream", icon: LucideIcons.IceCream, category: "Hospitality" },
    { id: "Cake", icon: LucideIcons.Cake, category: "Hospitality" },
    { id: "Handshake", icon: LucideIcons.Handshake, category: "Hospitality" },

    // --- BOH & KITCHEN ---
    { id: "ChefHat", icon: LucideIcons.ChefHat, category: "BOH" },
    { id: "Flame", icon: LucideIcons.Flame, category: "BOH" },
    { id: "Pot", icon: LucideIcons.CookingPot, category: "BOH" }, // Replaced Knife
    { id: "Timer", icon: LucideIcons.Timer, category: "BOH" },
    { id: "Thermometer", icon: LucideIcons.Thermometer, category: "BOH" },
    { id: "Droplets", icon: LucideIcons.Droplets, category: "BOH" },
    { id: "Trash", icon: LucideIcons.Trash2, category: "BOH" },
    { id: "Refrigerator", icon: LucideIcons.Refrigerator, category: "BOH" },

    // --- OPERATIONAL & TACTICAL ---
    { id: "Zap", icon: LucideIcons.Zap, category: "Operational" },
    { id: "Shield", icon: LucideIcons.Shield, category: "Operational" },
    { id: "Target", icon: LucideIcons.Target, category: "Operational" },
    { id: "Crosshair", icon: LucideIcons.Crosshair, category: "Operational" },
    { id: "Rocket", icon: LucideIcons.Rocket, category: "Operational" },
    { id: "Activity", icon: LucideIcons.Activity, category: "Operational" },
    { id: "Fingerprint", icon: LucideIcons.Fingerprint, category: "Operational" },
    { id: "Compass", icon: LucideIcons.Compass, category: "Operational" },
    { id: "Anchor", icon: LucideIcons.Anchor, category: "Operational" },
    { id: "Map", icon: LucideIcons.Map, category: "Operational" },
    { id: "Radar", icon: LucideIcons.Radar, category: "Operational" },
    { id: "Flag", icon: LucideIcons.Flag, category: "Operational" },
    { id: "Gauge", icon: LucideIcons.Gauge, category: "Operational" },
    { id: "Cpu", icon: LucideIcons.Cpu, category: "Operational" },
    { id: "Terminal", icon: LucideIcons.Terminal, category: "Operational" },

    // --- CREATIVE & SYMBOLIC ---
    { id: "Palette", icon: LucideIcons.Palette, category: "Creative" },
    { id: "Feather", icon: LucideIcons.Feather, category: "Creative" },
    { id: "Moon", icon: LucideIcons.Moon, category: "Creative" },
    { id: "Mountain", icon: LucideIcons.Mountain, category: "Creative" },
    { id: "Tree", icon: LucideIcons.TreeDeciduous, category: "Creative" },
    { id: "Ghost", icon: LucideIcons.Ghost, category: "Creative" },
    { id: "Bird", icon: LucideIcons.Bird, category: "Creative" },
    { id: "Fish", icon: LucideIcons.Fish, category: "Creative" },
    { id: "Dog", icon: LucideIcons.Dog, category: "Creative" },
    { id: "Cat", icon: LucideIcons.Cat, category: "Creative" },
    { id: "Bomb", icon: LucideIcons.Bomb, category: "Creative" },
    { id: "Binoculars", icon: LucideIcons.Binoculars, category: "Creative" },
    { id: "Camera", icon: LucideIcons.Camera, category: "Creative" },
    { id: "Gamepad", icon: LucideIcons.Gamepad2, category: "Creative" },
    { id: "Music", icon: LucideIcons.Music, category: "Creative" },
    { id: "Plane", icon: LucideIcons.Plane, category: "Creative" },
    { id: "Puzzle", icon: LucideIcons.Puzzle, category: "Creative" },
    { id: "Gift", icon: LucideIcons.Gift, category: "Creative" },
    { id: "Lightbulb", icon: LucideIcons.Lightbulb, category: "Creative" },
    { id: "Magnet", icon: LucideIcons.Magnet, category: "Creative" },
    { id: "Umbrella", icon: LucideIcons.Umbrella, category: "Creative" },
];
--- FILE: ./lib/store/useStore.ts ---
import { create } from "zustand";
import { db, caresDb } from "@/lib/firebase";
import { collection, onSnapshot, query, orderBy } from "firebase/firestore";
import { 
  CalendarEvent, 
  TeamMember, 
  Status, 
  Department 
} from "@/app/(main)/calendar/_components/types";

interface AppState {
  events: CalendarEvent[];
  team: TeamMember[];
  curriculum: any[];
  loading: boolean;
  subscribeEvents: () => () => void;
  subscribeTeam: () => () => void;
  subscribeCurriculum: () => () => void;
}

export const useAppStore = create<AppState>((set) => ({
  events: [],
  team: [],
  curriculum: [],
  loading: true,

  subscribeEvents: () => {
    // Listen to the 'events' collection in the PRIMARY DB (Trainingbook)
    const q = query(collection(db, "events"), orderBy("startDate", "desc")); // Changed to desc for newest first
    return onSnapshot(q, (snapshot) => {
      const eventData = snapshot.docs.map(doc => ({
          ...doc.data(),
          id: doc.id,
          startDate: doc.data().startDate?.toDate ? doc.data().startDate.toDate() : new Date(doc.data().startDate),
          endDate: doc.data().endDate?.toDate ? doc.data().endDate.toDate() : new Date(doc.data().endDate),
      })) as CalendarEvent[];
      set({ events: eventData, loading: false });
    });
  },

  subscribeTeam: () => {
    // 1. External HR Data (Read-Only)
    const caresQuery = collection(caresDb, "teamMembers");
    // 2. Local Overrides (Write Access)
    const overridesQuery = collection(db, "profileOverrides");

    let rawCaresData: any[] = [];
    let allOverrides: Record<string, any> = {};

    const performMerge = () => {
      const roleMap: Record<string, Status> = {
        "team_leader": "Team Leader",
        "director": "Director",
        "asst_director": "Assistant Director",
        "team_member": "Team Member",
        "trainee": "Training",
        "onboarding": "Onboarding"
      };

      const mergedTeam = rawCaresData.map(data => {
        const friendlyStatus = roleMap[data.role] || "Team Member";
        const override = allOverrides[data.id] || {};
        
        return {
          id: data.id,
          name: data.name || "Unknown",
          role: friendlyStatus,
          status: friendlyStatus,
          dept: (data.department || "FOH") as Department,
          email: data.email || "",
          phone: data.phone || "",
          joined: "Recently",
          
          // --- MERGE LOGIC ---
          badges: override.badges || [], 
          image: override.image || data.image || `https://ui-avatars.com/api/?name=${encodeURIComponent(data.name || 'User')}&background=E51636&color=fff`,
          
          // CRITICAL: Prefer local override progress/tasks
          progress: override.progress !== undefined ? override.progress : (data.progress || 0),
          completedTaskIds: override.completedTaskIds || data.completedTaskIds || [],
          // -----------------

          level: data.level || 1,
          stats: data.stats || { speed: 50, accuracy: 50, hospitality: 50, knowledge: 50, leadership: 50 }
        };
      }) as TeamMember[];

      set({ team: mergedTeam });
    };

    const unsubCares = onSnapshot(caresQuery, (snapshot) => {
      rawCaresData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      performMerge();
    });

    const unsubOverrides = onSnapshot(overridesQuery, (snapshot) => {
      const newOverrides: Record<string, any> = {};
      snapshot.docs.forEach(doc => {
        newOverrides[doc.id] = doc.data();
      });
      allOverrides = newOverrides;
      performMerge();
    });

    return () => { unsubCares(); unsubOverrides(); };
  },

  subscribeCurriculum: () => {
    const q = query(collection(db, "curriculum"), orderBy("order", "asc"));
    return onSnapshot(q, (snapshot) => {
      set({ curriculum: snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) });
    });
  }
}));
--- FILE: ./tsconfig.json ---
{
  "compilerOptions": {
    "target": "es5",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./*"
      ]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules"
  ]
}

--- FILE: ./eslint.config.mjs ---
import { defineConfig, globalIgnores } from "eslint/config";
import nextVitals from "eslint-config-next/core-web-vitals";
import nextTs from "eslint-config-next/typescript";

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  // Override default ignores of eslint-config-next.
  globalIgnores([
    // Default ignores of eslint-config-next:
    ".next/**",
    "out/**",
    "build/**",
    "next-env.d.ts",
  ]),
]);

export default eslintConfig;

--- FILE: ./next.config.ts ---
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
  reactCompiler: true,
  images: {
    domains: ['ui-avatars.com', 'images.unsplash.com'],
  },
};

export default nextConfig;
